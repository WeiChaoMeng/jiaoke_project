<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiaoke.quality.dao.QualityGradingManagerDao">
    <select id="selectGradingModelList" resultType="java.util.Map">
        SELECT
               id,
               grading_name,
               DATE_FORMAT(create_time,'%Y-%m-%d') AS create_time,
               grading_remaker,
               up_user
        FROM
             quality_proportioning_grading_model;
    </select>

    <delete id="delectGrading" >
        DELETE  t1.*,t2.*
        FROM
        quality_proportioning_grading_model AS t1
        INNER JOIN quality_proportioning_grading AS t2 ON t1.id = t2.model_id
        WHERE t2.model_id in
        <foreach collection="idArray" open="(" separator="," close=")" item="id">
            #{id}
        </foreach>
    </delete>

    <select id="selectGradingByModelId" resultType="java.util.Map">
        SELECT
               t1.id AS grading_model_id,
               t1.grading_name,
               t1.create_time,
               t1.grading_remaker,
               t1.up_user,
               t2.*
        FROM
             quality_proportioning_grading_model AS t1
                 INNER JOIN quality_proportioning_grading AS t2 ON t1.id = t2.model_id
        WHERE
                t1.id = #{id}
    </select>
</mapper>