<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jiaoke.quality.dao.QualityRealTimeWarningDao">

    <select id="selectLastWarningData" resultType="java.util.Map">
        SELECT
               t1.*, t2.*
        FROM
             quality_warning_data AS t1
                 INNER JOIN (
                            (
                            SELECT
                                    *
                            FROM
                                 quality_warning_promessage_crew
                            WHERE
                                    produce_crewNum = 1
                            ORDER BY
                                     id DESC
                            LIMIT 1
                            )
                            UNION ALL
                            (
                            SELECT
                                    *
                            FROM
                                 quality_warning_promessage_crew
                            WHERE
                                    produce_crewNum = 2
                            ORDER BY
                                     id DESC
                            LIMIT 1
                            )
                            ) AS t2 ON t1.crew_id = t2.id
    </select>
</mapper>