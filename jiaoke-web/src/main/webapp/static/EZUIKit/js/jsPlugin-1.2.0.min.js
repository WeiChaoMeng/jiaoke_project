(function e(t,i){if(typeof exports==="object"&&typeof module==="object")module.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else{var n=i();for(var r in n)(typeof exports==="object"?exports:t)[r]=n[r]}})(window,function(){return function(e){var t={};function i(n){if(t[n]){return t[n].exports}var r=t[n]={i:n,l:false,exports:{}};e[n].call(r.exports,r,r.exports,i);r.l=true;return r.exports}i.m=e;i.c=t;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};i.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};i.t=function(e,t){if(t&1)e=i(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n};i.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};i.d(t,"a",t);return t};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};i.p="";return i(i.s=5)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){r(this,e);this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}n(e,[{key:"$",value:function e(t){var i=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;var n=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(i.test(t)){var r=i.exec(t);return document.getElementById(r[2])}else if(n.test(t)){var a=n.exec(t);var o=document.getElementsByTagName("*");var s=[];for(var l=0,u=o.length;l<u;l++){if(o[l].className.match(new RegExp("(\\s|^)"+a[2]+"(\\s|$)"))){s.push(o[l])}}return s}}},{key:"dateFormat",value:function e(t,i){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};if(/(y+)/.test(i)){i=i.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))}for(var r in n){if(new RegExp("("+r+")").test(i)){i=i.replace(RegExp.$1,RegExp.$1.length===1?n[r]:("00"+n[r]).substr((""+n[r]).length))}}return i}},{key:"downloadFile",value:function e(t,i){var n=t;if(!(t instanceof Blob||t instanceof File)){n=new Blob([t])}var r=window.URL.createObjectURL(n);var a=window.document.createElement("a");a.href=r;a.download=i;var o=document.createEvent("MouseEvents");o.initEvent("click",true,true);a.dispatchEvent(o)}},{key:"createxmlDoc",value:function e(){var t;var i=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"];for(var n=0,r=i.length;n<r;n++){try{t=new ActiveXObject(i[n]);break}catch(e){t=document.implementation.createDocument("","",null);break}}t.async="false";return t}},{key:"parseXmlFromStr",value:function e(t){if(null===t||""===t){return null}var i=this.createxmlDoc();if(navigator.appName==="Netscape"||navigator.appName==="Opera"){var n=new DOMParser;i=n.parseFromString(t,"text/xml")}else{i.loadXML(t)}return i}},{key:"encode",value:function e(t){var i="";var n;var r;var a;var o;var s;var l;var u;var f=0;t=this._utf8_encode(t);while(f<t.length){n=t.charCodeAt(f++);r=t.charCodeAt(f++);a=t.charCodeAt(f++);o=n>>2;s=(n&3)<<4|r>>4;l=(r&15)<<2|a>>6;u=a&63;if(isNaN(r)){l=u=64}else if(isNaN(a)){u=64}i=i+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(l)+this._keyStr.charAt(u)}return i}},{key:"decode",value:function e(t){var i="";var n;var r;var a;var o;var s;var l;var u;var f=0;t=t.replace(/[^A-Za-z0-9+/=]/g,"");while(f<t.length){o=this._keyStr.indexOf(t.charAt(f++));s=this._keyStr.indexOf(t.charAt(f++));l=this._keyStr.indexOf(t.charAt(f++));u=this._keyStr.indexOf(t.charAt(f++));n=o<<2|s>>4;r=(s&15)<<4|l>>2;a=(l&3)<<6|u;i=i+String.fromCharCode(n);if(l!==64){i=i+String.fromCharCode(r)}if(u!==64){i=i+String.fromCharCode(a)}}i=this._utf8_decode(i);return i}},{key:"_utf8_encode",value:function e(t){t=t.replace(/\r\n/g,"\n");var i="";for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<128){i+=String.fromCharCode(r)}else if(r>127&&r<2048){i+=String.fromCharCode(r>>6|192);i+=String.fromCharCode(r&63|128)}else{i+=String.fromCharCode(r>>12|224);i+=String.fromCharCode(r>>6&63|128);i+=String.fromCharCode(r&63|128)}}return i}},{key:"_utf8_decode",value:function e(t){var i="";var n=0;var r=0;var a=0;while(n<t.length){r=t.charCodeAt(n);if(r<128){i+=String.fromCharCode(r);n++}else if(r>191&&r<224){a=t.charCodeAt(n+1);i+=String.fromCharCode((r&31)<<6|a&63);n+=2}else{a=t.charCodeAt(n+1);var o=t.charCodeAt(n+2);i+=String.fromCharCode((r&15)<<12|(a&63)<<6|o&63);n+=3}}return i}},{key:"isFirefox",value:function e(){var t=false;var i=navigator.userAgent.toLowerCase();var n="";var r=-1;if(i.match(/firefox\/([\d.]+)/)){n=i.match(/firefox\/([\d.]+)/)[1];r=parseInt(n.split(".")[0],10);if(r>-1){t=true}}return t}},{key:"isSafari",value:function e(){var t=false;var i=navigator.userAgent.toLowerCase();var n="";var r=-1;if(i.match(/version\/([\d.]+).safari./)){n=i.match(/version\/([\d.]+).safari./)[1];r=parseInt(n.split(".")[0],10);if(r>-1){t=true}}return t}},{key:"isEdge",value:function e(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}},{key:"isIOS",value:function e(){var t=navigator.userAgent;var i=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return i}}]);return e}();var o=t.oTool=new a},function(e,t,i){var n=i(8);var r=i(9);var a=r;a.v1=n;a.v4=r;e.exports=a},function(e,t){var i=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);e.exports=function e(){i(n);return n}}else{var r=new Array(16);e.exports=function e(){for(var t=0,i;t<16;t++){if((t&3)===0)i=Math.random()*4294967296;r[t]=i>>>((t&3)<<3)&255}return r}}},function(e,t){var i=[];for(var n=0;n<256;++n){i[n]=(n+256).toString(16).substr(1)}function r(e,t){var n=t||0;var r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}e.exports=r},function(e,t,i){var n,r;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
(function(t,i){"use strict";if(typeof e==="object"&&typeof e.exports==="object"){e.exports=t.document?i(t,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return i(e)}}else{i(t)}})(typeof window!=="undefined"?window:this,function(i,a){"use strict";var o=[];var s=i.document;var l=Object.getPrototypeOf;var u=o.slice;var f=o.concat;var h=o.push;var c=o.indexOf;var d={};var p=d.toString;var v=d.hasOwnProperty;var y=v.toString;var m=y.call(Object);var g={};var S=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"};var b=function e(t){return t!=null&&t===t.window};var w={type:true,src:true,noModule:true};function _(e,t,i){t=t||s;var n,r=t.createElement("script");r.text=e;if(i){for(n in w){if(i[n]){r[n]=i[n]}}}t.head.appendChild(r).parentNode.removeChild(r)}function P(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?d[p.call(e)]||"object":typeof e}var C="3.3.1",x=function(e,t){return new x.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.fn=x.prototype={jquery:C,constructor:x,length:0,toArray:function(){return u.call(this)},get:function(e){if(e==null){return u.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:o.sort,splice:o.splice};x.extend=x.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof o==="boolean"){u=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!S(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){i=o[t];n=e[t];if(o===n){continue}if(u&&n&&(x.isPlainObject(n)||(r=Array.isArray(n)))){if(r){r=false;a=i&&Array.isArray(i)?i:[]}else{a=i&&x.isPlainObject(i)?i:{}}o[t]=x.extend(u,a,n)}else if(n!==undefined){o[t]=n}}}}return o};x.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;if(!e||p.call(e)!=="[object Object]"){return false}t=l(e);if(!t){return true}i=v.call(t,"constructor")&&t.constructor;return typeof i==="function"&&y.call(i)===m},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e){_(e)},each:function(e,t){var i,n=0;if(D(e)){i=e.length;for(;n<i;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(T,"")},makeArray:function(e,t){var i=t||[];if(e!=null){if(D(Object(e))){x.merge(i,typeof e==="string"?[e]:e)}else{h.call(i,e)}}return i},inArray:function(e,t,i){return t==null?-1:c.call(t,e,i)},merge:function(e,t){var i=+t.length,n=0,r=e.length;for(;n<i;n++){e[r++]=t[n]}e.length=r;return e},grep:function(e,t,i){var n,r=[],a=0,o=e.length,s=!i;for(;a<o;a++){n=!t(e[a],a);if(n!==s){r.push(e[a])}}return r},map:function(e,t,i){var n,r,a=0,o=[];if(D(e)){n=e.length;for(;a<n;a++){r=t(e[a],a,i);if(r!=null){o.push(r)}}}else{for(a in e){r=t(e[a],a,i);if(r!=null){o.push(r)}}}return f.apply([],o)},guid:1,support:g});if(typeof Symbol==="function"){x.fn[Symbol.iterator]=o[Symbol.iterator]}x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});function D(e){var t=!!e&&"length"in e&&e.length,i=P(e);if(S(e)||b(e)){return false}return i==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var k=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,i,n,r,a,o,s,l,u,f,h,c,d,p,v,y,m,g,S,b="sizzle"+1*new Date,w=e.document,_=0,P=0,C=oe(),x=oe(),T=oe(),D=function(e,t){if(e===t){h=true}return 0},k={}.hasOwnProperty,M=[],R=M.pop,E=M.push,I=M.push,z=M.slice,A=function(e,t){var i=0,n=e.length;for(;i<n;i++){if(e[i]===t){return i}}return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",L="\\["+B+"*("+F+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+B+"*\\]",q=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|"+".*"+")\\)|)",N=new RegExp(B+"+","g"),H=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),W=new RegExp("^"+B+"*,"+B+"*"),U=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),j=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),G=new RegExp(q),V=new RegExp("^"+F+"$"),J={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ne=function(){c()},re=ge(function(e){return e.disabled===true&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{I.apply(M=z.call(w.childNodes),w.childNodes);M[w.childNodes.length].nodeType}catch(e){I={apply:M.length?function(e,t){E.apply(e,z.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]){}e.length=i-1}}}function ae(e,t,n,r){var a,s,u,f,h,p,m,g=t&&t.ownerDocument,_=t?t.nodeType:9;n=n||[];if(typeof e!=="string"||!e||_!==1&&_!==9&&_!==11){return n}if(!r){if((t?t.ownerDocument||t:w)!==d){c(t)}t=t||d;if(v){if(_!==11&&(h=$.exec(e))){if(a=h[1]){if(_===9){if(u=t.getElementById(a)){if(u.id===a){n.push(u);return n}}else{return n}}else{if(g&&(u=g.getElementById(a))&&S(t,u)&&u.id===a){n.push(u);return n}}}else if(h[2]){I.apply(n,t.getElementsByTagName(e));return n}else if((a=h[3])&&i.getElementsByClassName&&t.getElementsByClassName){I.apply(n,t.getElementsByClassName(a));return n}}if(i.qsa&&!T[e+" "]&&(!y||!y.test(e))){if(_!==1){g=t;m=e}else if(t.nodeName.toLowerCase()!=="object"){if(f=t.getAttribute("id")){f=f.replace(te,ie)}else{t.setAttribute("id",f=b)}p=o(e);s=p.length;while(s--){p[s]="#"+f+" "+me(p[s])}m=p.join(",");g=Z.test(e)&&ve(t.parentNode)||t}if(m){try{I.apply(n,g.querySelectorAll(m));return n}catch(e){}finally{if(f===b){t.removeAttribute("id")}}}}}}return l(e.replace(H,"$1"),t,n,r)}function oe(){var e=[];function t(i,r){if(e.push(i+" ")>n.cacheLength){delete t[e.shift()]}return t[i+" "]=r}return t}function se(e){e[b]=true;return e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ue(e,t){var i=e.split("|"),r=i.length;while(r--){n.attrHandle[i[r]]=t}}function fe(e,t){var i=t&&e,n=i&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(n){return n}if(i){while(i=i.nextSibling){if(i===t){return-1}}}return e?1:-1}function he(e){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===e}}function ce(e){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===e}}function de(e){return function(t){if("form"in t){if(t.parentNode&&t.disabled===false){if("label"in t){if("label"in t.parentNode){return t.parentNode.disabled===e}else{return t.disabled===e}}return t.isDisabled===e||t.isDisabled!==!e&&re(t)===e}return t.disabled===e}else if("label"in t){return t.disabled===e}return false}}function pe(e){return se(function(t){t=+t;return se(function(i,n){var r,a=e([],i.length,t),o=a.length;while(o--){if(i[r=a[o]]){i[r]=!(n[r]=i[r])}}})})}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}i=ae.support={};a=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};c=ae.setDocument=function(e){var t,r,o=e?e.ownerDocument||e:w;if(o===d||o.nodeType!==9||!o.documentElement){return d}d=o;p=d.documentElement;v=!a(d);if(w!==d&&(r=d.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",ne,false)}else if(r.attachEvent){r.attachEvent("onunload",ne)}}i.attributes=le(function(e){e.className="i";return!e.getAttribute("className")});i.getElementsByTagName=le(function(e){e.appendChild(d.createComment(""));return!e.getElementsByTagName("*").length});i.getElementsByClassName=K.test(d.getElementsByClassName);i.getById=le(function(e){p.appendChild(e).id=b;return!d.getElementsByName||!d.getElementsByName(b).length});if(i.getById){n.filter["ID"]=function(e){var t=e.replace(Q,ee);return function(e){return e.getAttribute("id")===t}};n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&v){var i=t.getElementById(e);return i?[i]:[]}}}else{n.filter["ID"]=function(e){var t=e.replace(Q,ee);return function(e){var i=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return i&&i.value===t}};n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&v){var i,n,r,a=t.getElementById(e);if(a){i=a.getAttributeNode("id");if(i&&i.value===e){return[a]}r=t.getElementsByName(e);n=0;while(a=r[n++]){i=a.getAttributeNode("id");if(i&&i.value===e){return[a]}}}return[]}}}n.find["TAG"]=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(i.qsa){return t.querySelectorAll(e)}}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if(e==="*"){while(i=a[r++]){if(i.nodeType===1){n.push(i)}}return n}return a};n.find["CLASS"]=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&v){return t.getElementsByClassName(e)}};m=[];y=[];if(i.qsa=K.test(d.querySelectorAll)){le(function(e){p.appendChild(e).innerHTML="<a id='"+b+"'></a>"+"<select id='"+b+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){y.push("[*^$]="+B+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){y.push("\\["+B+"*(?:value|"+O+")")}if(!e.querySelectorAll("[id~="+b+"-]").length){y.push("~=")}if(!e.querySelectorAll(":checked").length){y.push(":checked")}if(!e.querySelectorAll("a#"+b+"+*").length){y.push(".#.+[+~]")}});le(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){y.push("name"+B+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){y.push(":enabled",":disabled")}p.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){y.push(":enabled",":disabled")}e.querySelectorAll("*,:x");y.push(",.*:")})}if(i.matchesSelector=K.test(g=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){le(function(e){i.disconnectedMatch=g.call(e,"*");g.call(e,"[s!='']:x");m.push("!=",q)})}y=y.length&&new RegExp(y.join("|"));m=m.length&&new RegExp(m.join("|"));t=K.test(p.compareDocumentPosition);S=t||K.test(p.contains)?function(e,t){var i=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};D=t?function(e,t){if(e===t){h=true;return 0}var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n){return n}n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(n&1||!i.sortDetached&&t.compareDocumentPosition(e)===n){if(e===d||e.ownerDocument===w&&S(w,e)){return-1}if(t===d||t.ownerDocument===w&&S(w,t)){return 1}return f?A(f,e)-A(f,t):0}return n&4?-1:1}:function(e,t){if(e===t){h=true;return 0}var i,n=0,r=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!r||!a){return e===d?-1:t===d?1:r?-1:a?1:f?A(f,e)-A(f,t):0}else if(r===a){return fe(e,t)}i=e;while(i=i.parentNode){o.unshift(i)}i=t;while(i=i.parentNode){s.unshift(i)}while(o[n]===s[n]){n++}return n?fe(o[n],s[n]):o[n]===w?-1:s[n]===w?1:0};return d};ae.matches=function(e,t){return ae(e,null,null,t)};ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d){c(e)}t=t.replace(j,"='$1']");if(i.matchesSelector&&v&&!T[t+" "]&&(!m||!m.test(t))&&(!y||!y.test(t))){try{var n=g.call(e,t);if(n||i.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){}}return ae(t,d,null,[e]).length>0};ae.contains=function(e,t){if((e.ownerDocument||e)!==d){c(e)}return S(e,t)};ae.attr=function(e,t){if((e.ownerDocument||e)!==d){c(e)}var r=n.attrHandle[t.toLowerCase()],a=r&&k.call(n.attrHandle,t.toLowerCase())?r(e,t,!v):undefined;return a!==undefined?a:i.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null};ae.escape=function(e){return(e+"").replace(te,ie)};ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};ae.uniqueSort=function(e){var t,n=[],r=0,a=0;h=!i.detectDuplicates;f=!i.sortStable&&e.slice(0);e.sort(D);if(h){while(t=e[a++]){if(t===e[a]){r=n.push(a)}}while(r--){e.splice(n[r],1)}}f=null;return e};r=ae.getText=function(e){var t,i="",n=0,a=e.nodeType;if(!a){while(t=e[n++]){i+=r(t)}}else if(a===1||a===9||a===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){i+=r(e)}}}else if(a===3||a===4){return e.nodeValue}return i};n=ae.selectors={cacheLength:50,createPseudo:se,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(Q,ee);e[3]=(e[3]||e[4]||e[5]||"").replace(Q,ee);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){ae.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){ae.error(e[0])}return e},PSEUDO:function(e){var t,i=!e[6]&&e[2];if(J["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(i&&G.test(i)&&(t=o(i,true))&&(t=i.indexOf(")",i.length-t)-i.length)){e[0]=e[0].slice(0,t);e[2]=i.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(Q,ee).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&C(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var r=ae.attr(n,e);if(r==null){return t==="!="}if(!t){return true}r+="";return t==="="?r===i:t==="!="?r!==i:t==="^="?i&&r.indexOf(i)===0:t==="*="?i&&r.indexOf(i)>-1:t==="$="?i&&r.slice(-i.length)===i:t==="~="?(" "+r.replace(N," ")+" ").indexOf(i)>-1:t==="|="?r===i||r.slice(0,i.length+1)===i+"-":false}},CHILD:function(e,t,i,n,r){var a=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",s=t==="of-type";return n===1&&r===0?function(e){return!!e.parentNode}:function(t,i,l){var u,f,h,c,d,p,v=a!==o?"nextSibling":"previousSibling",y=t.parentNode,m=s&&t.nodeName.toLowerCase(),g=!l&&!s,S=false;if(y){if(a){while(v){c=t;while(c=c[v]){if(s?c.nodeName.toLowerCase()===m:c.nodeType===1){return false}}p=v=e==="only"&&!p&&"nextSibling"}return true}p=[o?y.firstChild:y.lastChild];if(o&&g){c=y;h=c[b]||(c[b]={});f=h[c.uniqueID]||(h[c.uniqueID]={});u=f[e]||[];d=u[0]===_&&u[1];S=d&&u[2];c=d&&y.childNodes[d];while(c=++d&&c&&c[v]||(S=d=0)||p.pop()){if(c.nodeType===1&&++S&&c===t){f[e]=[_,d,S];break}}}else{if(g){c=t;h=c[b]||(c[b]={});f=h[c.uniqueID]||(h[c.uniqueID]={});u=f[e]||[];d=u[0]===_&&u[1];S=d}if(S===false){while(c=++d&&c&&c[v]||(S=d=0)||p.pop()){if((s?c.nodeName.toLowerCase()===m:c.nodeType===1)&&++S){if(g){h=c[b]||(c[b]={});f=h[c.uniqueID]||(h[c.uniqueID]={});f[e]=[_,S]}if(c===t){break}}}}}S-=r;return S===n||S%n===0&&S/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);if(r[b]){return r(t)}if(r.length>1){i=[e,e,"",t];return n.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,i){var n,a=r(e,t),o=a.length;while(o--){n=A(e,a[o]);e[n]=!(i[n]=a[o])}}):function(e){return r(e,0,i)}}return r}},pseudos:{not:se(function(e){var t=[],i=[],n=s(e.replace(H,"$1"));return n[b]?se(function(e,t,i,r){var a,o=n(e,null,r,[]),s=e.length;while(s--){if(a=o[s]){e[s]=!(t[s]=a)}}}):function(e,r,a){t[0]=e;n(t,null,a,i);t[0]=null;return!i.pop()}}),has:se(function(e){return function(t){return ae(e,t).length>0}}),contains:se(function(e){e=e.replace(Q,ee);return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),lang:se(function(e){if(!V.test(e||"")){ae.error("unsupported lang: "+e)}e=e.replace(Q,ee).toLowerCase();return function(t){var i;do{if(i=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(false),disabled:de(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!n.pseudos["empty"](e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,i){return[i<0?i+t:i]}),even:pe(function(e,t){var i=0;for(;i<t;i+=2){e.push(i)}return e}),odd:pe(function(e,t){var i=1;for(;i<t;i+=2){e.push(i)}return e}),lt:pe(function(e,t,i){var n=i<0?i+t:i;for(;--n>=0;){e.push(n)}return e}),gt:pe(function(e,t,i){var n=i<0?i+t:i;for(;++n<t;){e.push(n)}return e})}};n.pseudos["nth"]=n.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[t]=he(t)}for(t in{submit:true,reset:true}){n.pseudos[t]=ce(t)}function ye(){}ye.prototype=n.filters=n.pseudos;n.setFilters=new ye;o=ae.tokenize=function(e,t){var i,r,a,o,s,l,u,f=x[e+" "];if(f){return t?0:f.slice(0)}s=e;l=[];u=n.preFilter;while(s){if(!i||(r=W.exec(s))){if(r){s=s.slice(r[0].length)||s}l.push(a=[])}i=false;if(r=U.exec(s)){i=r.shift();a.push({value:i,type:r[0].replace(H," ")});s=s.slice(i.length)}for(o in n.filter){if((r=J[o].exec(s))&&(!u[o]||(r=u[o](r)))){i=r.shift();a.push({value:i,type:o,matches:r});s=s.slice(i.length)}}if(!i){break}}return t?s.length:s?ae.error(e):x(e,l).slice(0)};function me(e){var t=0,i=e.length,n="";for(;t<i;t++){n+=e[t].value}return n}function ge(e,t,i){var n=t.dir,r=t.next,a=r||n,o=i&&a==="parentNode",s=P++;return t.first?function(t,i,r){while(t=t[n]){if(t.nodeType===1||o){return e(t,i,r)}}return false}:function(t,i,l){var u,f,h,c=[_,s];if(l){while(t=t[n]){if(t.nodeType===1||o){if(e(t,i,l)){return true}}}}else{while(t=t[n]){if(t.nodeType===1||o){h=t[b]||(t[b]={});f=h[t.uniqueID]||(h[t.uniqueID]={});if(r&&r===t.nodeName.toLowerCase()){t=t[n]||t}else if((u=f[a])&&u[0]===_&&u[1]===s){return c[2]=u[2]}else{f[a]=c;if(c[2]=e(t,i,l)){return true}}}}}return false}}function Se(e){return e.length>1?function(t,i,n){var r=e.length;while(r--){if(!e[r](t,i,n)){return false}}return true}:e[0]}function be(e,t,i){var n=0,r=t.length;for(;n<r;n++){ae(e,t[n],i)}return i}function we(e,t,i,n,r){var a,o=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(a=e[s]){if(!i||i(a,n,r)){o.push(a);if(u){t.push(s)}}}}return o}function _e(e,t,i,n,r,a){if(n&&!n[b]){n=_e(n)}if(r&&!r[b]){r=_e(r,a)}return se(function(a,o,s,l){var u,f,h,c=[],d=[],p=o.length,v=a||be(t||"*",s.nodeType?[s]:s,[]),y=e&&(a||!t)?we(v,c,e,s,l):v,m=i?r||(a?e:p||n)?[]:o:y;if(i){i(y,m,s,l)}if(n){u=we(m,d);n(u,[],s,l);f=u.length;while(f--){if(h=u[f]){m[d[f]]=!(y[d[f]]=h)}}}if(a){if(r||e){if(r){u=[];f=m.length;while(f--){if(h=m[f]){u.push(y[f]=h)}}r(null,m=[],u,l)}f=m.length;while(f--){if((h=m[f])&&(u=r?A(a,h):c[f])>-1){a[u]=!(o[u]=h)}}}}else{m=we(m===o?m.splice(p,m.length):m);if(r){r(null,o,m,l)}else{I.apply(o,m)}}})}function Pe(e){var t,i,r,a=e.length,o=n.relative[e[0].type],s=o||n.relative[" "],l=o?1:0,f=ge(function(e){return e===t},s,true),h=ge(function(e){return A(t,e)>-1},s,true),c=[function(e,i,n){var r=!o&&(n||i!==u)||((t=i).nodeType?f(e,i,n):h(e,i,n));t=null;return r}];for(;l<a;l++){if(i=n.relative[e[l].type]){c=[ge(Se(c),i)]}else{i=n.filter[e[l].type].apply(null,e[l].matches);if(i[b]){r=++l;for(;r<a;r++){if(n.relative[e[r].type]){break}}return _e(l>1&&Se(c),l>1&&me(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(H,"$1"),i,l<r&&Pe(e.slice(l,r)),r<a&&Pe(e=e.slice(r)),r<a&&me(e))}c.push(i)}}return Se(c)}function Ce(e,t){var i=t.length>0,r=e.length>0,a=function(a,o,s,l,f){var h,p,y,m=0,g="0",S=a&&[],b=[],w=u,P=a||r&&n.find["TAG"]("*",f),C=_+=w==null?1:Math.random()||.1,x=P.length;if(f){u=o===d||o||f}for(;g!==x&&(h=P[g])!=null;g++){if(r&&h){p=0;if(!o&&h.ownerDocument!==d){c(h);s=!v}while(y=e[p++]){if(y(h,o||d,s)){l.push(h);break}}if(f){_=C}}if(i){if(h=!y&&h){m--}if(a){S.push(h)}}}m+=g;if(i&&g!==m){p=0;while(y=t[p++]){y(S,b,o,s)}if(a){if(m>0){while(g--){if(!(S[g]||b[g])){b[g]=R.call(l)}}}b=we(b)}I.apply(l,b);if(f&&!a&&b.length>0&&m+t.length>1){ae.uniqueSort(l)}}if(f){_=C;u=w}return S};return i?se(a):a}s=ae.compile=function(e,t){var i,n=[],r=[],a=T[e+" "];if(!a){if(!t){t=o(e)}i=t.length;while(i--){a=Pe(t[i]);if(a[b]){n.push(a)}else{r.push(a)}}a=T(e,Ce(r,n));a.selector=e}return a};l=ae.select=function(e,t,i,r){var a,l,u,f,h,c=typeof e==="function"&&e,d=!r&&o(e=c.selector||e);i=i||[];if(d.length===1){l=d[0]=d[0].slice(0);if(l.length>2&&(u=l[0]).type==="ID"&&t.nodeType===9&&v&&n.relative[l[1].type]){t=(n.find["ID"](u.matches[0].replace(Q,ee),t)||[])[0];if(!t){return i}else if(c){t=t.parentNode}e=e.slice(l.shift().value.length)}a=J["needsContext"].test(e)?0:l.length;while(a--){u=l[a];if(n.relative[f=u.type]){break}if(h=n.find[f]){if(r=h(u.matches[0].replace(Q,ee),Z.test(l[0].type)&&ve(t.parentNode)||t)){l.splice(a,1);e=r.length&&me(l);if(!e){I.apply(i,r);return i}break}}}}(c||s(e,d))(r,t,!v,i,!t||Z.test(e)&&ve(t.parentNode)||t);return i};i.sortStable=b.split("").sort(D).join("")===b;i.detectDuplicates=!!h;c();i.sortDetached=le(function(e){return e.compareDocumentPosition(d.createElement("fieldset"))&1});if(!le(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ue("type|href|height|width",function(e,t,i){if(!i){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!i.attributes||!le(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ue("value",function(e,t,i){if(!i&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!le(function(e){return e.getAttribute("disabled")==null})){ue(O,function(e,t,i){var n;if(!i){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}})}return ae}(i);x.find=k;x.expr=k.selectors;x.expr[":"]=x.expr.pseudos;x.uniqueSort=x.unique=k.uniqueSort;x.text=k.getText;x.isXMLDoc=k.isXML;x.contains=k.contains;x.escapeSelector=k.escape;var M=function(e,t,i){var n=[],r=i!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(r&&x(e).is(i)){break}n.push(e)}}return n};var R=function(e,t){var i=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){i.push(e)}}return i};var E=x.expr.match.needsContext;function I(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(e,t,i){if(S(t)){return x.grep(e,function(e,n){return!!t.call(e,n,e)!==i})}if(t.nodeType){return x.grep(e,function(e){return e===t!==i})}if(typeof t!=="string"){return x.grep(e,function(e){return c.call(t,e)>-1!==i})}return x.filter(t,e,i)}x.filter=function(e,t,i){var n=t[0];if(i){e=":not("+e+")"}if(t.length===1&&n.nodeType===1){return x.find.matchesSelector(n,e)?[n]:[]}return x.find.matches(e,x.grep(t,function(e){return e.nodeType===1}))};x.fn.extend({find:function(e){var t,i,n=this.length,r=this;if(typeof e!=="string"){return this.pushStack(x(e).filter(function(){for(t=0;t<n;t++){if(x.contains(r[t],this)){return true}}}))}i=this.pushStack([]);for(t=0;t<n;t++){x.find(e,r[t],i)}return n>1?x.uniqueSort(i):i},filter:function(e){return this.pushStack(A(this,e||[],false))},not:function(e){return this.pushStack(A(this,e||[],true))},is:function(e){return!!A(this,typeof e==="string"&&E.test(e)?x(e):e||[],false).length}});var O,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,F=x.fn.init=function(e,t,i){var n,r;if(!e){return this}i=i||O;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=B.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof x?t[0]:t;x.merge(this,x.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:s,true));if(z.test(n[1])&&x.isPlainObject(t)){for(n in t){if(S(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{r=s.getElementById(n[2]);if(r){this[0]=r;this.length=1}return this}}else if(!t||t.jquery){return(t||i).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(S(e)){return i.ready!==undefined?i.ready(e):e(x)}return x.makeArray(e,this)};F.prototype=x.fn;O=x(s);var L=/^(?:parents|prev(?:Until|All))/,q={children:true,contents:true,next:true,prev:true};x.fn.extend({has:function(e){var t=x(e,this),i=t.length;return this.filter(function(){var e=0;for(;e<i;e++){if(x.contains(this,t[e])){return true}}})},closest:function(e,t){var i,n=0,r=this.length,a=[],o=typeof e!=="string"&&x(e);if(!E.test(e)){for(;n<r;n++){for(i=this[n];i&&i!==t;i=i.parentNode){if(i.nodeType<11&&(o?o.index(i)>-1:i.nodeType===1&&x.find.matchesSelector(i,e))){a.push(i);break}}}}return this.pushStack(a.length>1?x.uniqueSort(a):a)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return c.call(x(e),this[0])}return c.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function N(e,t){while((e=e[t])&&e.nodeType!==1){}return e}x.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,i){return M(e,"parentNode",i)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,i){return M(e,"nextSibling",i)},prevUntil:function(e,t,i){return M(e,"previousSibling",i)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){if(I(e,"iframe")){return e.contentDocument}if(I(e,"template")){e=e.content||e}return x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(i,n){var r=x.map(this,t,i);if(e.slice(-5)!=="Until"){n=i}if(n&&typeof n==="string"){r=x.filter(n,r)}if(this.length>1){if(!q[e]){x.uniqueSort(r)}if(L.test(e)){r.reverse()}}return this.pushStack(r)}});var H=/[^\x20\t\r\n\f]+/g;function W(e){var t={};x.each(e.match(H)||[],function(e,i){t[i]=true});return t}x.Callbacks=function(e){e=typeof e==="string"?W(e):x.extend({},e);var t,i,n,r,a=[],o=[],s=-1,l=function(){r=r||e.once;n=t=true;for(;o.length;s=-1){i=o.shift();while(++s<a.length){if(a[s].apply(i[0],i[1])===false&&e.stopOnFalse){s=a.length;i=false}}}if(!e.memory){i=false}t=false;if(r){if(i){a=[]}else{a=""}}},u={add:function(){if(a){if(i&&!t){s=a.length-1;o.push(i)}(function t(i){x.each(i,function(i,n){if(S(n)){if(!e.unique||!u.has(n)){a.push(n)}}else if(n&&n.length&&P(n)!=="string"){t(n)}})})(arguments);if(i&&!t){l()}}return this},remove:function(){x.each(arguments,function(e,t){var i;while((i=x.inArray(t,a,i))>-1){a.splice(i,1);if(i<=s){s--}}});return this},has:function(e){return e?x.inArray(e,a)>-1:a.length>0},empty:function(){if(a){a=[]}return this},disable:function(){r=o=[];a=i="";return this},disabled:function(){return!a},lock:function(){r=o=[];if(!i&&!t){a=i=""}return this},locked:function(){return!!r},fireWith:function(e,i){if(!r){i=i||[];i=[e,i.slice?i.slice():i];o.push(i);if(!t){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!n}};return u};function U(e){return e}function j(e){throw e}function G(e,t,i,n){var r;try{if(e&&S(r=e.promise)){r.call(e).done(t).fail(i)}else if(e&&S(r=e.then)){r.call(e,t,i)}else{t.apply(undefined,[e].slice(n))}}catch(e){i.apply(undefined,[e])}}x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){a.done(arguments).fail(arguments);return this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(i){x.each(t,function(t,n){var r=S(e[n[4]])&&e[n[4]];a[n[1]](function(){var e=r&&r.apply(this,arguments);if(e&&S(e.promise)){e.promise().progress(i.notify).done(i.resolve).fail(i.reject)}else{i[n[0]+"With"](this,r?[e]:arguments)}})});e=null}).promise()},then:function(e,n,r){var a=0;function o(e,t,n,r){return function(){var s=this,l=arguments,u=function(){var i,u;if(e<a){return}i=n.apply(s,l);if(i===t.promise()){throw new TypeError("Thenable self-resolution")}u=i&&(typeof i==="object"||typeof i==="function")&&i.then;if(S(u)){if(r){u.call(i,o(a,t,U,r),o(a,t,j,r))}else{a++;u.call(i,o(a,t,U,r),o(a,t,j,r),o(a,t,U,t.notifyWith))}}else{if(n!==U){s=undefined;l=[i]}(r||t.resolveWith)(s,l)}},f=r?u:function(){try{u()}catch(i){if(x.Deferred.exceptionHook){x.Deferred.exceptionHook(i,f.stackTrace)}if(e+1>=a){if(n!==j){s=undefined;l=[i]}t.rejectWith(s,l)}}};if(e){f()}else{if(x.Deferred.getStackHook){f.stackTrace=x.Deferred.getStackHook()}i.setTimeout(f)}}}return x.Deferred(function(i){t[0][3].add(o(0,i,S(r)?r:U,i.notifyWith));t[1][3].add(o(0,i,S(e)?e:U));t[2][3].add(o(0,i,S(n)?n:j))}).promise()},promise:function(e){return e!=null?x.extend(e,r):r}},a={};x.each(t,function(e,i){var o=i[2],s=i[5];r[i[1]]=o.add;if(s){o.add(function(){n=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock)}o.add(i[3].fire);a[i[0]]=function(){a[i[0]+"With"](this===a?undefined:this,arguments);return this};a[i[0]+"With"]=o.fireWith});r.promise(a);if(e){e.call(a,a)}return a},when:function(e){var t=arguments.length,i=t,n=Array(i),r=u.call(arguments),a=x.Deferred(),o=function(e){return function(i){n[e]=this;r[e]=arguments.length>1?u.call(arguments):i;if(!--t){a.resolveWith(n,r)}}};if(t<=1){G(e,a.done(o(i)).resolve,a.reject,!t);if(a.state()==="pending"||S(r[i]&&r[i].then)){return a.then()}}while(i--){G(r[i],o(i),a.reject)}return a.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){if(i.console&&i.console.warn&&e&&V.test(e.name)){i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};x.readyException=function(e){i.setTimeout(function(){throw e})};var J=x.Deferred();x.fn.ready=function(e){J.then(e).catch(function(e){x.readyException(e)});return this};x.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--x.readyWait:x.isReady){return}x.isReady=true;if(e!==true&&--x.readyWait>0){return}J.resolveWith(s,[x])}});x.ready.then=J.then;function Y(){s.removeEventListener("DOMContentLoaded",Y);i.removeEventListener("load",Y);x.ready()}if(s.readyState==="complete"||s.readyState!=="loading"&&!s.documentElement.doScroll){i.setTimeout(x.ready)}else{s.addEventListener("DOMContentLoaded",Y);i.addEventListener("load",Y)}var X=function(e,t,i,n,r,a,o){var s=0,l=e.length,u=i==null;if(P(i)==="object"){r=true;for(s in i){X(e,t,s,i[s],true,a,o)}}else if(n!==undefined){r=true;if(!S(n)){o=true}if(u){if(o){t.call(e,n);t=null}else{u=t;t=function(e,t,i){return u.call(x(e),i)}}}if(t){for(;s<l;s++){t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)))}}}if(r){return e}if(u){return t.call(e)}return l?t(e[0],i):a};var K=/^-ms-/,$=/-([a-z])/g;function Z(e,t){return t.toUpperCase()}function Q(e){return e.replace(K,"ms-").replace($,Z)}var ee=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function te(){this.expando=x.expando+te.uid++}te.uid=1;te.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(ee(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,i){var n,r=this.cache(e);if(typeof t==="string"){r[Q(t)]=i}else{for(n in t){r[Q(n)]=t[n]}}return r},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][Q(t)]},access:function(e,t,i){if(t===undefined||t&&typeof t==="string"&&i===undefined){return this.get(e,t)}this.set(e,t,i);return i!==undefined?i:t},remove:function(e,t){var i,n=e[this.expando];if(n===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(Q)}else{t=Q(t);t=t in n?[t]:t.match(H)||[]}i=t.length;while(i--){delete n[t[i]]}}if(t===undefined||x.isEmptyObject(n)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!x.isEmptyObject(t)}};var ie=new te;var ne=new te;var re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ae=/[A-Z]/g;function oe(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(re.test(e)){return JSON.parse(e)}return e}function se(e,t,i){var n;if(i===undefined&&e.nodeType===1){n="data-"+t.replace(ae,"-$&").toLowerCase();i=e.getAttribute(n);if(typeof i==="string"){try{i=oe(i)}catch(e){}ne.set(e,t,i)}else{i=undefined}}return i}x.extend({hasData:function(e){return ne.hasData(e)||ie.hasData(e)},data:function(e,t,i){return ne.access(e,t,i)},removeData:function(e,t){ne.remove(e,t)},_data:function(e,t,i){return ie.access(e,t,i)},_removeData:function(e,t){ie.remove(e,t)}});x.fn.extend({data:function(e,t){var i,n,r,a=this[0],o=a&&a.attributes;if(e===undefined){if(this.length){r=ne.get(a);if(a.nodeType===1&&!ie.get(a,"hasDataAttrs")){i=o.length;while(i--){if(o[i]){n=o[i].name;if(n.indexOf("data-")===0){n=Q(n.slice(5));se(a,n,r[n])}}}ie.set(a,"hasDataAttrs",true)}}return r}if(typeof e==="object"){return this.each(function(){ne.set(this,e)})}return X(this,function(t){var i;if(a&&t===undefined){i=ne.get(a,e);if(i!==undefined){return i}i=se(a,e);if(i!==undefined){return i}return}this.each(function(){ne.set(this,e,t)})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){ne.remove(this,e)})}});x.extend({queue:function(e,t,i){var n;if(e){t=(t||"fx")+"queue";n=ie.get(e,t);if(i){if(!n||Array.isArray(i)){n=ie.access(e,t,x.makeArray(i))}else{n.push(i)}}return n||[]}},dequeue:function(e,t){t=t||"fx";var i=x.queue(e,t),n=i.length,r=i.shift(),a=x._queueHooks(e,t),o=function(){x.dequeue(e,t)};if(r==="inprogress"){r=i.shift();n--}if(r){if(t==="fx"){i.unshift("inprogress")}delete a.stop;r.call(e,o,a)}if(!n&&a){a.empty.fire()}},_queueHooks:function(e,t){var i=t+"queueHooks";return ie.get(e,i)||ie.access(e,i,{empty:x.Callbacks("once memory").add(function(){ie.remove(e,[t+"queue",i])})})}});x.fn.extend({queue:function(e,t){var i=2;if(typeof e!=="string"){t=e;e="fx";i--}if(arguments.length<i){return x.queue(this[0],e)}return t===undefined?this:this.each(function(){var i=x.queue(this,e,t);x._queueHooks(this,e);if(e==="fx"&&i[0]!=="inprogress"){x.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=x.Deferred(),a=this,o=this.length,s=function(){if(!--n){r.resolveWith(a,[a])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){i=ie.get(a[o],e+"queueHooks");if(i&&i.empty){n++;i.empty.add(s)}}s();return r.promise(t)}});var le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ue=new RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i");var fe=["Top","Right","Bottom","Left"];var he=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&x.contains(e.ownerDocument,e)&&x.css(e,"display")==="none"};var ce=function(e,t,i,n){var r,a,o={};for(a in t){o[a]=e.style[a];e.style[a]=t[a]}r=i.apply(e,n||[]);for(a in t){e.style[a]=o[a]}return r};function de(e,t,i,n){var r,a,o=20,s=n?function(){return n.cur()}:function(){return x.css(e,t,"")},l=s(),u=i&&i[3]||(x.cssNumber[t]?"":"px"),f=(x.cssNumber[t]||u!=="px"&&+l)&&ue.exec(x.css(e,t));if(f&&f[3]!==u){l=l/2;u=u||f[3];f=+l||1;while(o--){x.style(e,t,f+u);if((1-a)*(1-(a=s()/l||.5))<=0){o=0}f=f/a}f=f*2;x.style(e,t,f+u);i=i||[]}if(i){f=+f||+l||0;r=i[1]?f+(i[1]+1)*i[2]:+i[2];if(n){n.unit=u;n.start=f;n.end=r}}return r}var pe={};function ve(e){var t,i=e.ownerDocument,n=e.nodeName,r=pe[n];if(r){return r}t=i.body.appendChild(i.createElement(n));r=x.css(t,"display");t.parentNode.removeChild(t);if(r==="none"){r="block"}pe[n]=r;return r}function ye(e,t){var i,n,r=[],a=0,o=e.length;for(;a<o;a++){n=e[a];if(!n.style){continue}i=n.style.display;if(t){if(i==="none"){r[a]=ie.get(n,"display")||null;if(!r[a]){n.style.display=""}}if(n.style.display===""&&he(n)){r[a]=ve(n)}}else{if(i!=="none"){r[a]="none";ie.set(n,"display",i)}}}for(a=0;a<o;a++){if(r[a]!=null){e[a].style.display=r[a]}}return e}x.fn.extend({show:function(){return ye(this,true)},hide:function(){return ye(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(he(this)){x(this).show()}else{x(this).hide()}})}});var me=/^(?:checkbox|radio)$/i;var ge=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var Se=/^$|^module$|\/(?:java|ecma)script/i;var be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};be.optgroup=be.option;be.tbody=be.tfoot=be.colgroup=be.caption=be.thead;be.th=be.td;function we(e,t){var i;if(typeof e.getElementsByTagName!=="undefined"){i=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){i=e.querySelectorAll(t||"*")}else{i=[]}if(t===undefined||t&&I(e,t)){return x.merge([e],i)}return i}function _e(e,t){var i=0,n=e.length;for(;i<n;i++){ie.set(e[i],"globalEval",!t||ie.get(t[i],"globalEval"))}}var Pe=/<|&#?\w+;/;function Ce(e,t,i,n,r){var a,o,s,l,u,f,h=t.createDocumentFragment(),c=[],d=0,p=e.length;for(;d<p;d++){a=e[d];if(a||a===0){if(P(a)==="object"){x.merge(c,a.nodeType?[a]:a)}else if(!Pe.test(a)){c.push(t.createTextNode(a))}else{o=o||h.appendChild(t.createElement("div"));s=(ge.exec(a)||["",""])[1].toLowerCase();l=be[s]||be._default;o.innerHTML=l[1]+x.htmlPrefilter(a)+l[2];f=l[0];while(f--){o=o.lastChild}x.merge(c,o.childNodes);o=h.firstChild;o.textContent=""}}}h.textContent="";d=0;while(a=c[d++]){if(n&&x.inArray(a,n)>-1){if(r){r.push(a)}continue}u=x.contains(a.ownerDocument,a);o=we(h.appendChild(a),"script");if(u){_e(o)}if(i){f=0;while(a=o[f++]){if(Se.test(a.type||"")){i.push(a)}}}}return h}(function(){var e=s.createDocumentFragment(),t=e.appendChild(s.createElement("div")),i=s.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");t.appendChild(i);g.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";g.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var xe=s.documentElement;var Te=/^key/,De=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ke=/^([^.]*)(?:\.(.+)|)/;function Me(){return true}function Re(){return false}function Ee(){try{return s.activeElement}catch(e){}}function Ie(e,t,i,n,r,a){var o,s;if(typeof t==="object"){if(typeof i!=="string"){n=n||i;i=undefined}for(s in t){Ie(e,s,i,n,t[s],a)}return e}if(n==null&&r==null){r=i;n=i=undefined}else if(r==null){if(typeof i==="string"){r=n;n=undefined}else{r=n;n=i;i=undefined}}if(r===false){r=Re}else if(!r){return e}if(a===1){o=r;r=function(e){x().off(e);return o.apply(this,arguments)};r.guid=o.guid||(o.guid=x.guid++)}return e.each(function(){x.event.add(this,t,r,n,i)})}x.event={global:{},add:function(e,t,i,n,r){var a,o,s,l,u,f,h,c,d,p,v,y=ie.get(e);if(!y){return}if(i.handler){a=i;i=a.handler;r=a.selector}if(r){x.find.matchesSelector(xe,r)}if(!i.guid){i.guid=x.guid++}if(!(l=y.events)){l=y.events={}}if(!(o=y.handle)){o=y.handle=function(t){return typeof x!=="undefined"&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(H)||[""];u=t.length;while(u--){s=ke.exec(t[u])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){continue}h=x.event.special[d]||{};d=(r?h.delegateType:h.bindType)||d;h=x.event.special[d]||{};f=x.extend({type:d,origType:v,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:p.join(".")},a);if(!(c=l[d])){c=l[d]=[];c.delegateCount=0;if(!h.setup||h.setup.call(e,n,p,o)===false){if(e.addEventListener){e.addEventListener(d,o)}}}if(h.add){h.add.call(e,f);if(!f.handler.guid){f.handler.guid=i.guid}}if(r){c.splice(c.delegateCount++,0,f)}else{c.push(f)}x.event.global[d]=true}},remove:function(e,t,i,n,r){var a,o,s,l,u,f,h,c,d,p,v,y=ie.hasData(e)&&ie.get(e);if(!y||!(l=y.events)){return}t=(t||"").match(H)||[""];u=t.length;while(u--){s=ke.exec(t[u])||[];d=v=s[1];p=(s[2]||"").split(".").sort();if(!d){for(d in l){x.event.remove(e,d+t[u],i,n,true)}continue}h=x.event.special[d]||{};d=(n?h.delegateType:h.bindType)||d;c=l[d]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");o=a=c.length;while(a--){f=c[a];if((r||v===f.origType)&&(!i||i.guid===f.guid)&&(!s||s.test(f.namespace))&&(!n||n===f.selector||n==="**"&&f.selector)){c.splice(a,1);if(f.selector){c.delegateCount--}if(h.remove){h.remove.call(e,f)}}}if(o&&!c.length){if(!h.teardown||h.teardown.call(e,p,y.handle)===false){x.removeEvent(e,d,y.handle)}delete l[d]}}if(x.isEmptyObject(l)){ie.remove(e,"handle events")}},dispatch:function(e){var t=x.event.fix(e);var i,n,r,a,o,s,l=new Array(arguments.length),u=(ie.get(this,"events")||{})[t.type]||[],f=x.event.special[t.type]||{};l[0]=t;for(i=1;i<arguments.length;i++){l[i]=arguments[i]}t.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,t)===false){return}s=x.event.handlers.call(this,t,u);i=0;while((a=s[i++])&&!t.isPropagationStopped()){t.currentTarget=a.elem;n=0;while((o=a.handlers[n++])&&!t.isImmediatePropagationStopped()){if(!t.rnamespace||t.rnamespace.test(o.namespace)){t.handleObj=o;t.data=o.data;r=((x.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,l);if(r!==undefined){if((t.result=r)===false){t.preventDefault();t.stopPropagation()}}}}}if(f.postDispatch){f.postDispatch.call(this,t)}return t.result},handlers:function(e,t){var i,n,r,a,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!(e.type==="click"&&e.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(e.type==="click"&&u.disabled===true)){a=[];o={};for(i=0;i<l;i++){n=t[i];r=n.selector+" ";if(o[r]===undefined){o[r]=n.needsContext?x(r,this).index(u)>-1:x.find(r,this,null,[u]).length}if(o[r]){a.push(n)}}if(a.length){s.push({elem:u,handlers:a})}}}}u=this;if(l<t.length){s.push({elem:u,handlers:t.slice(l)})}return s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:true,configurable:true,get:S(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==Ee()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===Ee()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&I(this,"input")){this.click();return false}},_default:function(e){return I(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};x.removeEvent=function(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i)}};x.Event=function(e,t){if(!(this instanceof x.Event)){return new x.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?Me:Re;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){x.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[x.expando]=true};x.Event.prototype={constructor:x.Event,isDefaultPrevented:Re,isPropagationStopped:Re,isImmediatePropagationStopped:Re,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};x.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&Te.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&De.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},x.event.addProp);x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,a=e.handleObj;if(!r||r!==n&&!x.contains(n,r)){e.type=a.origType;i=a.handler.apply(this,arguments);e.type=t}return i}}});x.fn.extend({on:function(e,t,i,n){return Ie(this,e,t,i,n)},one:function(e,t,i,n){return Ie(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;x(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,t,e[r])}return this}if(t===false||typeof t==="function"){i=t;t=undefined}if(i===false){i=Re}return this.each(function(){x.event.remove(this,e,i,t)})}});var ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Fe(e,t){if(I(e,"table")&&I(t.nodeType!==11?t:t.firstChild,"tr")){return x(e).children("tbody")[0]||e}return e}function Le(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function qe(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Ne(e,t){var i,n,r,a,o,s,l,u;if(t.nodeType!==1){return}if(ie.hasData(e)){a=ie.access(e);o=ie.set(t,a);u=a.events;if(u){delete o.handle;o.events={};for(r in u){for(i=0,n=u[r].length;i<n;i++){x.event.add(t,r,u[r][i])}}}}if(ne.hasData(e)){s=ne.access(e);l=x.extend({},s);ne.set(t,l)}}function He(e,t){var i=t.nodeName.toLowerCase();if(i==="input"&&me.test(e.type)){t.checked=e.checked}else if(i==="input"||i==="textarea"){t.defaultValue=e.defaultValue}}function We(e,t,i,n){t=f.apply([],t);var r,a,o,s,l,u,h=0,c=e.length,d=c-1,p=t[0],v=S(p);if(v||c>1&&typeof p==="string"&&!g.checkClone&&Oe.test(p)){return e.each(function(r){var a=e.eq(r);if(v){t[0]=p.call(this,r,a.html())}We(a,t,i,n)})}if(c){r=Ce(t,e[0].ownerDocument,false,e,n);a=r.firstChild;if(r.childNodes.length===1){r=a}if(a||n){o=x.map(we(r,"script"),Le);s=o.length;for(;h<c;h++){l=r;if(h!==d){l=x.clone(l,true,true);if(s){x.merge(o,we(l,"script"))}}i.call(e[h],l,h)}if(s){u=o[o.length-1].ownerDocument;x.map(o,qe);for(h=0;h<s;h++){l=o[h];if(Se.test(l.type||"")&&!ie.access(l,"globalEval")&&x.contains(u,l)){if(l.src&&(l.type||"").toLowerCase()!=="module"){if(x._evalUrl){x._evalUrl(l.src)}}else{_(l.textContent.replace(Be,""),u,l)}}}}}}return e}function Ue(e,t,i){var n,r=t?x.filter(t,e):e,a=0;for(;(n=r[a])!=null;a++){if(!i&&n.nodeType===1){x.cleanData(we(n))}if(n.parentNode){if(i&&x.contains(n.ownerDocument,n)){_e(we(n,"script"))}n.parentNode.removeChild(n)}}return e}x.extend({htmlPrefilter:function(e){return e.replace(ze,"<$1></$2>")},clone:function(e,t,i){var n,r,a,o,s=e.cloneNode(true),l=x.contains(e.ownerDocument,e);if(!g.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!x.isXMLDoc(e)){o=we(s);a=we(e);for(n=0,r=a.length;n<r;n++){He(a[n],o[n])}}if(t){if(i){a=a||we(e);o=o||we(s);for(n=0,r=a.length;n<r;n++){Ne(a[n],o[n])}}else{Ne(e,s)}}o=we(s,"script");if(o.length>0){_e(o,!l&&we(e,"script"))}return s},cleanData:function(e){var t,i,n,r=x.event.special,a=0;for(;(i=e[a])!==undefined;a++){if(ee(i)){if(t=i[ie.expando]){if(t.events){for(n in t.events){if(r[n]){x.event.remove(i,n)}else{x.removeEvent(i,n,t.handle)}}}i[ie.expando]=undefined}if(i[ne.expando]){i[ne.expando]=undefined}}}}});x.fn.extend({detach:function(e){return Ue(this,e,true)},remove:function(e){return Ue(this,e)},text:function(e){return X(this,function(e){return e===undefined?x.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return We(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Fe(this,e);t.appendChild(e)}})},prepend:function(){return We(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Fe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return We(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return We(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){x.cleanData(we(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return x.clone(this,e,t)})},html:function(e){return X(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Ae.test(e)&&!be[(ge.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;i<n;i++){t=this[i]||{};if(t.nodeType===1){x.cleanData(we(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,function(t){var i=this.parentNode;if(x.inArray(this,e)<0){x.cleanData(we(this));if(i){i.replaceChild(t,this)}}},e)}});x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var i,n=[],r=x(e),a=r.length-1,o=0;for(;o<=a;o++){i=o===a?this:this.clone(true);x(r[o])[t](i);h.apply(n,i.get())}return this.pushStack(n)}});var je=new RegExp("^("+le+")(?!px)[a-z%]+$","i");var Ge=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=i}return t.getComputedStyle(e)};var Ve=new RegExp(fe.join("|"),"i");(function(){function e(){if(!f){return}u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";f.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";xe.appendChild(u).appendChild(f);var e=i.getComputedStyle(f);n=e.top!=="1%";l=t(e.marginLeft)===12;f.style.right="60%";o=t(e.right)===36;r=t(e.width)===36;f.style.position="absolute";a=f.offsetWidth===36||"absolute";xe.removeChild(u);f=null}function t(e){return Math.round(parseFloat(e))}var n,r,a,o,l,u=s.createElement("div"),f=s.createElement("div");if(!f.style){return}f.style.backgroundClip="content-box";f.cloneNode(true).style.backgroundClip="";g.clearCloneStyle=f.style.backgroundClip==="content-box";x.extend(g,{boxSizingReliable:function(){e();return r},pixelBoxStyles:function(){e();return o},pixelPosition:function(){e();return n},reliableMarginLeft:function(){e();return l},scrollboxSize:function(){e();return a}})})();function Je(e,t,i){var n,r,a,o,s=e.style;i=i||Ge(e);if(i){o=i.getPropertyValue(t)||i[t];if(o===""&&!x.contains(e.ownerDocument,e)){o=x.style(e,t)}if(!g.pixelBoxStyles()&&je.test(o)&&Ve.test(t)){n=s.width;r=s.minWidth;a=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=i.width;s.width=n;s.minWidth=r;s.maxWidth=a}}return o!==undefined?o+"":o}function Ye(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Xe=/^(none|table(?!-c[ea]).+)/,Ke=/^--/,$e={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"},Qe=["Webkit","Moz","ms"],et=s.createElement("div").style;function tt(e){if(e in et){return e}var t=e[0].toUpperCase()+e.slice(1),i=Qe.length;while(i--){e=Qe[i]+t;if(e in et){return e}}}function it(e){var t=x.cssProps[e];if(!t){t=x.cssProps[e]=tt(e)||e}return t}function nt(e,t,i){var n=ue.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function rt(e,t,i,n,r,a){var o=t==="width"?1:0,s=0,l=0;if(i===(n?"border":"content")){return 0}for(;o<4;o+=2){if(i==="margin"){l+=x.css(e,i+fe[o],true,r)}if(!n){l+=x.css(e,"padding"+fe[o],true,r);if(i!=="padding"){l+=x.css(e,"border"+fe[o]+"Width",true,r)}else{s+=x.css(e,"border"+fe[o]+"Width",true,r)}}else{if(i==="content"){l-=x.css(e,"padding"+fe[o],true,r)}if(i!=="margin"){l-=x.css(e,"border"+fe[o]+"Width",true,r)}}}if(!n&&a>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))}return l}function at(e,t,i){var n=Ge(e),r=Je(e,t,n),a=x.css(e,"boxSizing",false,n)==="border-box",o=a;if(je.test(r)){if(!i){return r}r="auto"}o=o&&(g.boxSizingReliable()||r===e.style[t]);if(r==="auto"||!parseFloat(r)&&x.css(e,"display",false,n)==="inline"){r=e["offset"+t[0].toUpperCase()+t.slice(1)];o=true}r=parseFloat(r)||0;return r+rt(e,t,i||(a?"border":"content"),o,n,r)+"px"}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Je(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,i,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,a,o,s=Q(t),l=Ke.test(t),u=e.style;if(!l){t=it(s)}o=x.cssHooks[t]||x.cssHooks[s];if(i!==undefined){a=typeof i;if(a==="string"&&(r=ue.exec(i))&&r[1]){i=de(e,t,r);a="number"}if(i==null||i!==i){return}if(a==="number"){i+=r&&r[3]||(x.cssNumber[s]?"":"px")}if(!g.clearCloneStyle&&i===""&&t.indexOf("background")===0){u[t]="inherit"}if(!o||!("set"in o)||(i=o.set(e,i,n))!==undefined){if(l){u.setProperty(t,i)}else{u[t]=i}}}else{if(o&&"get"in o&&(r=o.get(e,false,n))!==undefined){return r}return u[t]}},css:function(e,t,i,n){var r,a,o,s=Q(t),l=Ke.test(t);if(!l){t=it(s)}o=x.cssHooks[t]||x.cssHooks[s];if(o&&"get"in o){r=o.get(e,true,i)}if(r===undefined){r=Je(e,t,n)}if(r==="normal"&&t in Ze){r=Ze[t]}if(i===""||i){a=parseFloat(r);return i===true||isFinite(a)?a||0:r}return r}});x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,i,n){if(i){return Xe.test(x.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?ce(e,$e,function(){return at(e,t,n)}):at(e,t,n)}},set:function(e,i,n){var r,a=Ge(e),o=x.css(e,"boxSizing",false,a)==="border-box",s=n&&rt(e,t,n,o,a);if(o&&g.scrollboxSize()===a.position){s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-rt(e,t,"border",false,a)-.5)}if(s&&(r=ue.exec(i))&&(r[3]||"px")!=="px"){e.style[t]=i;i=x.css(e,t)}return nt(e,i,s)}}});x.cssHooks.marginLeft=Ye(g.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Je(e,"marginLeft"))||e.getBoundingClientRect().left-ce(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(i){var n=0,r={},a=typeof i==="string"?i.split(" "):[i];for(;n<4;n++){r[e+fe[n]+t]=a[n]||a[n-2]||a[0]}return r}};if(e!=="margin"){x.cssHooks[e+t].set=nt}});x.fn.extend({css:function(e,t){return X(this,function(e,t,i){var n,r,a={},o=0;if(Array.isArray(t)){n=Ge(e);r=t.length;for(;o<r;o++){a[t[o]]=x.css(e,t[o],false,n)}return a}return i!==undefined?x.style(e,t,i):x.css(e,t)},e,t,arguments.length>1)}});function ot(e,t,i,n,r){return new ot.prototype.init(e,t,i,n,r)}x.Tween=ot;ot.prototype={constructor:ot,init:function(e,t,i,n,r,a){this.elem=e;this.prop=i;this.easing=r||x.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=a||(x.cssNumber[i]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,i=ot.propHooks[this.prop];if(this.options.duration){this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{ot.propHooks._default.set(this)}return this}};ot.prototype.init.prototype=ot.prototype;ot.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=x.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(x.fx.step[e.prop]){x.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[x.cssProps[e.prop]]!=null||x.cssHooks[e.prop])){x.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};x.fx=ot.prototype.init;x.fx.step={};var st,lt,ut=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function ht(){if(lt){if(s.hidden===false&&i.requestAnimationFrame){i.requestAnimationFrame(ht)}else{i.setTimeout(ht,x.fx.interval)}x.fx.tick()}}function ct(){i.setTimeout(function(){st=undefined});return st=Date.now()}function dt(e,t){var i,n=0,r={height:e};t=t?1:0;for(;n<4;n+=2-t){i=fe[n];r["margin"+i]=r["padding"+i]=e}if(t){r.opacity=r.width=e}return r}function pt(e,t,i){var n,r=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),a=0,o=r.length;for(;a<o;a++){if(n=r[a].call(i,t,e)){return n}}}function vt(e,t,i){var n,r,a,o,s,l,u,f,h="width"in t||"height"in t,c=this,d={},p=e.style,v=e.nodeType&&he(e),y=ie.get(e,"fxshow");if(!i.queue){o=x._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;c.always(function(){c.always(function(){o.unqueued--;if(!x.queue(e,"fx").length){o.empty.fire()}})})}for(n in t){r=t[n];if(ut.test(r)){delete t[n];a=a||r==="toggle";if(r===(v?"hide":"show")){if(r==="show"&&y&&y[n]!==undefined){v=true}else{continue}}d[n]=y&&y[n]||x.style(e,n)}}l=!x.isEmptyObject(t);if(!l&&x.isEmptyObject(d)){return}if(h&&e.nodeType===1){i.overflow=[p.overflow,p.overflowX,p.overflowY];u=y&&y.display;if(u==null){u=ie.get(e,"display")}f=x.css(e,"display");if(f==="none"){if(u){f=u}else{ye([e],true);u=e.style.display||u;f=x.css(e,"display");ye([e])}}if(f==="inline"||f==="inline-block"&&u!=null){if(x.css(e,"float")==="none"){if(!l){c.done(function(){p.display=u});if(u==null){f=p.display;u=f==="none"?"":f}}p.display="inline-block"}}}if(i.overflow){p.overflow="hidden";c.always(function(){p.overflow=i.overflow[0];p.overflowX=i.overflow[1];p.overflowY=i.overflow[2]})}l=false;for(n in d){if(!l){if(y){if("hidden"in y){v=y.hidden}}else{y=ie.access(e,"fxshow",{display:u})}if(a){y.hidden=!v}if(v){ye([e],true)}c.done(function(){if(!v){ye([e])}ie.remove(e,"fxshow");for(n in d){x.style(e,n,d[n])}})}l=pt(v?y[n]:0,n,c);if(!(n in y)){y[n]=l.start;if(v){l.end=l.start;l.start=0}}}}function yt(e,t){var i,n,r,a,o;for(i in e){n=Q(i);r=t[n];a=e[i];if(Array.isArray(a)){r=a[1];a=e[i]=a[0]}if(i!==n){e[n]=a;delete e[i]}o=x.cssHooks[n];if(o&&"expand"in o){a=o.expand(a);delete e[n];for(i in a){if(!(i in e)){e[i]=a[i];t[i]=r}}}else{t[n]=r}}}function mt(e,t,i){var n,r,a=0,o=mt.prefilters.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(r){return false}var t=st||ct(),i=Math.max(0,u.startTime+u.duration-t),n=i/u.duration||0,a=1-n,o=0,l=u.tweens.length;for(;o<l;o++){u.tweens[o].run(a)}s.notifyWith(e,[u,a,i]);if(a<1&&l){return i}if(!l){s.notifyWith(e,[u,1,0])}s.resolveWith(e,[u]);return false},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(true,{specialEasing:{},easing:x.easing._default},i),originalProperties:t,originalOptions:i,startTime:st||ct(),duration:i.duration,tweens:[],createTween:function(t,i){var n=x.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);u.tweens.push(n);return n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r){return this}r=true;for(;i<n;i++){u.tweens[i].run(1)}if(t){s.notifyWith(e,[u,1,0]);s.resolveWith(e,[u,t])}else{s.rejectWith(e,[u,t])}return this}}),f=u.props;yt(f,u.opts.specialEasing);for(;a<o;a++){n=mt.prefilters[a].call(u,e,f,u.opts);if(n){if(S(n.stop)){x._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)}return n}}x.map(f,pt,u);if(S(u.opts.start)){u.opts.start.call(e,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue}));return u}x.Animation=x.extend(mt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);de(i.elem,e,ue.exec(t),i);return i}]},tweener:function(e,t){if(S(e)){t=e;e=["*"]}else{e=e.match(H)}var i,n=0,r=e.length;for(;n<r;n++){i=e[n];mt.tweeners[i]=mt.tweeners[i]||[];mt.tweeners[i].unshift(t)}},prefilters:[vt],prefilter:function(e,t){if(t){mt.prefilters.unshift(e)}else{mt.prefilters.push(e)}}});x.speed=function(e,t,i){var n=e&&typeof e==="object"?x.extend({},e):{complete:i||!i&&t||S(e)&&e,duration:e,easing:i&&t||t&&!S(t)&&t};if(x.fx.off){n.duration=0}else{if(typeof n.duration!=="number"){if(n.duration in x.fx.speeds){n.duration=x.fx.speeds[n.duration]}else{n.duration=x.fx.speeds._default}}}if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(S(n.old)){n.old.call(this)}if(n.queue){x.dequeue(this,n.queue)}};return n};x.fn.extend({fadeTo:function(e,t,i,n){return this.filter(he).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=x.isEmptyObject(e),a=x.speed(t,i,n),o=function(){var t=mt(this,x.extend({},e),a);if(r||ie.get(this,"finish")){t.stop(true)}};o.finish=o;return r||a.queue===false?this.each(o):this.queue(a.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof e!=="string"){i=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,r=e!=null&&e+"queueHooks",a=x.timers,o=ie.get(this);if(r){if(o[r]&&o[r].stop){n(o[r])}}else{for(r in o){if(o[r]&&o[r].stop&&ft.test(r)){n(o[r])}}}for(r=a.length;r--;){if(a[r].elem===this&&(e==null||a[r].queue===e)){a[r].anim.stop(i);t=false;a.splice(r,1)}}if(t||!i){x.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,i=ie.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],a=x.timers,o=n?n.length:0;i.finish=true;x.queue(this,e,[]);if(r&&r.stop){r.stop.call(this,true)}for(t=a.length;t--;){if(a[t].elem===this&&a[t].queue===e){a[t].anim.stop(true);a.splice(t,1)}}for(t=0;t<o;t++){if(n[t]&&n[t].finish){n[t].finish.call(this)}}delete i.finish})}});x.each(["toggle","show","hide"],function(e,t){var i=x.fn[t];x.fn[t]=function(e,n,r){return e==null||typeof e==="boolean"?i.apply(this,arguments):this.animate(dt(t,true),e,n,r)}});x.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}});x.timers=[];x.fx.tick=function(){var e,t=0,i=x.timers;st=Date.now();for(;t<i.length;t++){e=i[t];if(!e()&&i[t]===e){i.splice(t--,1)}}if(!i.length){x.fx.stop()}st=undefined};x.fx.timer=function(e){x.timers.push(e);x.fx.start()};x.fx.interval=13;x.fx.start=function(){if(lt){return}lt=true;ht()};x.fx.stop=function(){lt=null};x.fx.speeds={slow:600,fast:200,_default:400};x.fn.delay=function(e,t){e=x.fx?x.fx.speeds[e]||e:e;t=t||"fx";return this.queue(t,function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}})};(function(){var e=s.createElement("input"),t=s.createElement("select"),i=t.appendChild(s.createElement("option"));e.type="checkbox";g.checkOn=e.value!=="";g.optSelected=i.selected;e=s.createElement("input");e.value="t";e.type="radio";g.radioValue=e.value==="t"})();var gt,St=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return X(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}});x.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(a===3||a===8||a===2){return}if(typeof e.getAttribute==="undefined"){return x.prop(e,t,i)}if(a!==1||!x.isXMLDoc(e)){r=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?gt:undefined)}if(i!==undefined){if(i===null){x.removeAttr(e,t);return}if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}e.setAttribute(t,i+"");return i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}n=x.find.attr(e,t);return n==null?undefined:n},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&t==="radio"&&I(e,"input")){var i=e.value;e.setAttribute("type",t);if(i){e.value=i}return t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(H);if(r&&e.nodeType===1){while(i=r[n++]){e.removeAttribute(i)}}}});gt={set:function(e,t,i){if(t===false){x.removeAttr(e,i)}else{e.setAttribute(i,i)}return i}};x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var i=St[t]||x.find.attr;St[t]=function(e,t,n){var r,a,o=t.toLowerCase();if(!n){a=St[o];St[o]=r;r=i(e,t,n)!=null?o:null;St[o]=a}return r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;x.fn.extend({prop:function(e,t){return X(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}});x.extend({prop:function(e,t,i){var n,r,a=e.nodeType;if(a===3||a===8||a===2){return}if(a!==1||!x.isXMLDoc(e)){t=x.propFix[t]||t;r=x.propHooks[t]}if(i!==undefined){if(r&&"set"in r&&(n=r.set(e,i,t))!==undefined){return n}return e[t]=i}if(r&&"get"in r&&(n=r.get(e,t))!==null){return n}return e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!g.optSelected){x.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this});function _t(e){var t=e.match(H)||[];return t.join(" ")}function Pt(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(H)||[]}return[]}x.fn.extend({addClass:function(e){var t,i,n,r,a,o,s,l=0;if(S(e)){return this.each(function(t){x(this).addClass(e.call(this,t,Pt(this)))})}t=Ct(e);if(t.length){while(i=this[l++]){r=Pt(i);n=i.nodeType===1&&" "+_t(r)+" ";if(n){o=0;while(a=t[o++]){if(n.indexOf(" "+a+" ")<0){n+=a+" "}}s=_t(n);if(r!==s){i.setAttribute("class",s)}}}}return this},removeClass:function(e){var t,i,n,r,a,o,s,l=0;if(S(e)){return this.each(function(t){x(this).removeClass(e.call(this,t,Pt(this)))})}if(!arguments.length){return this.attr("class","")}t=Ct(e);if(t.length){while(i=this[l++]){r=Pt(i);n=i.nodeType===1&&" "+_t(r)+" ";if(n){o=0;while(a=t[o++]){while(n.indexOf(" "+a+" ")>-1){n=n.replace(" "+a+" "," ")}}s=_t(n);if(r!==s){i.setAttribute("class",s)}}}}return this},toggleClass:function(e,t){var i=typeof e,n=i==="string"||Array.isArray(e);if(typeof t==="boolean"&&n){return t?this.addClass(e):this.removeClass(e)}if(S(e)){return this.each(function(i){x(this).toggleClass(e.call(this,i,Pt(this),t),t)})}return this.each(function(){var t,r,a,o;if(n){r=0;a=x(this);o=Ct(e);while(t=o[r++]){if(a.hasClass(t)){a.removeClass(t)}else{a.addClass(t)}}}else if(e===undefined||i==="boolean"){t=Pt(this);if(t){ie.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":ie.get(this,"__className__")||"")}}})},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++]){if(i.nodeType===1&&(" "+_t(Pt(i))+" ").indexOf(t)>-1){return true}}return false}});var xt=/\r/g;x.fn.extend({val:function(e){var t,i,n,r=this[0];if(!arguments.length){if(r){t=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()];if(t&&"get"in t&&(i=t.get(r,"value"))!==undefined){return i}i=r.value;if(typeof i==="string"){return i.replace(xt,"")}return i==null?"":i}return}n=S(e);return this.each(function(i){var r;if(this.nodeType!==1){return}if(n){r=e.call(this,i,x(this).val())}else{r=e}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(Array.isArray(r)){r=x.map(r,function(e){return e==null?"":e+""})}t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,r,"value")===undefined){this.value=r}})}});x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return t!=null?t:_t(x.text(e))}},select:{get:function(e){var t,i,n,r=e.options,a=e.selectedIndex,o=e.type==="select-one",s=o?null:[],l=o?a+1:r.length;if(a<0){n=l}else{n=o?a:0}for(;n<l;n++){i=r[n];if((i.selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){t=x(i).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var i,n,r=e.options,a=x.makeArray(t),o=r.length;while(o--){n=r[o];if(n.selected=x.inArray(x.valHooks.option.get(n),a)>-1){i=true}}if(!i){e.selectedIndex=-1}return a}}}});x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=x.inArray(x(e).val(),t)>-1}}};if(!g.checkOn){x.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});g.focusin="onfocusin"in i;var Tt=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,t,n,r){var a,o,l,u,f,h,c,d,p=[n||s],y=v.call(e,"type")?e.type:e,m=v.call(e,"namespace")?e.namespace.split("."):[];o=d=l=n=n||s;if(n.nodeType===3||n.nodeType===8){return}if(Tt.test(y+x.event.triggered)){return}if(y.indexOf(".")>-1){m=y.split(".");y=m.shift();m.sort()}f=y.indexOf(":")<0&&"on"+y;e=e[x.expando]?e:new x.Event(y,typeof e==="object"&&e);e.isTrigger=r?2:3;e.namespace=m.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=n}t=t==null?[e]:x.makeArray(t,[e]);c=x.event.special[y]||{};if(!r&&c.trigger&&c.trigger.apply(n,t)===false){return}if(!r&&!c.noBubble&&!b(n)){u=c.delegateType||y;if(!Tt.test(u+y)){o=o.parentNode}for(;o;o=o.parentNode){p.push(o);l=o}if(l===(n.ownerDocument||s)){p.push(l.defaultView||l.parentWindow||i)}}a=0;while((o=p[a++])&&!e.isPropagationStopped()){d=o;e.type=a>1?u:c.bindType||y;h=(ie.get(o,"events")||{})[e.type]&&ie.get(o,"handle");if(h){h.apply(o,t)}h=f&&o[f];if(h&&h.apply&&ee(o)){e.result=h.apply(o,t);if(e.result===false){e.preventDefault()}}}e.type=y;if(!r&&!e.isDefaultPrevented()){if((!c._default||c._default.apply(p.pop(),t)===false)&&ee(n)){if(f&&S(n[y])&&!b(n)){l=n[f];if(l){n[f]=null}x.event.triggered=y;if(e.isPropagationStopped()){d.addEventListener(y,Dt)}n[y]();if(e.isPropagationStopped()){d.removeEventListener(y,Dt)}x.event.triggered=undefined;if(l){n[f]=l}}}}return e.result},simulate:function(e,t,i){var n=x.extend(new x.Event,i,{type:e,isSimulated:true});x.event.trigger(n,null,t)}});x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i){return x.event.trigger(e,t,i,true)}}});if(!g.focusin){x.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=ie.access(n,t);if(!r){n.addEventListener(e,i,true)}ie.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=ie.access(n,t)-1;if(!r){n.removeEventListener(e,i,true);ie.remove(n,t)}else{ie.access(n,t,r)}}}})}var kt=i.location;var Mt=Date.now();var Rt=/\?/;x.parseXML=function(e){var t;if(!e||typeof e!=="string"){return null}try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){x.error("Invalid XML: "+e)}return t};var Et=/\[\]$/,It=/\r?\n/g,zt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,n){var r;if(Array.isArray(t)){x.each(t,function(t,r){if(i||Et.test(e)){n(e,r)}else{Ot(e+"["+(typeof r==="object"&&r!=null?t:"")+"]",r,i,n)}})}else if(!i&&P(t)==="object"){for(r in t){Ot(e+"["+r+"]",t[r],i,n)}}else{n(e,t)}}x.param=function(e,t){var i,n=[],r=function(e,t){var i=S(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(i==null?"":i)};if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e)){x.each(e,function(){r(this.name,this.value)})}else{for(i in e){Ot(i,e[i],t,r)}}return n.join("&")};x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&At.test(this.nodeName)&&!zt.test(e)&&(this.checked||!me.test(e))}).map(function(e,t){var i=x(this).val();if(i==null){return null}if(Array.isArray(i)){return x.map(i,function(e){return{name:t.name,value:e.replace(It,"\r\n")}})}return{name:t.name,value:i.replace(It,"\r\n")}}).get()}});var Bt=/%20/g,Ft=/#.*$/,Lt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Wt=/^\/\//,Ut={},jt={},Gt="*/".concat("*"),Vt=s.createElement("a");Vt.href=kt.href;function Jt(e){return function(t,i){if(typeof t!=="string"){i=t;t="*"}var n,r=0,a=t.toLowerCase().match(H)||[];if(S(i)){while(n=a[r++]){if(n[0]==="+"){n=n.slice(1)||"*";(e[n]=e[n]||[]).unshift(i)}else{(e[n]=e[n]||[]).push(i)}}}}}function Yt(e,t,i,n){var r={},a=e===jt;function o(s){var l;r[s]=true;x.each(e[s]||[],function(e,s){var u=s(t,i,n);if(typeof u==="string"&&!a&&!r[u]){t.dataTypes.unshift(u);o(u);return false}else if(a){return!(l=u)}});return l}return o(t.dataTypes[0])||!r["*"]&&o("*")}function Xt(e,t){var i,n,r=x.ajaxSettings.flatOptions||{};for(i in t){if(t[i]!==undefined){(r[i]?e:n||(n={}))[i]=t[i]}}if(n){x.extend(true,e,n)}return e}function Kt(e,t,i){var n,r,a,o,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(r in s){if(s[r]&&s[r].test(n)){l.unshift(r);break}}}if(l[0]in i){a=l[0]}else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}if(!o){o=r}}a=a||o}if(a){if(a!==l[0]){l.unshift(a)}return i[a]}}function $t(e,t,i,n){var r,a,o,s,l,u={},f=e.dataTypes.slice();if(f[1]){for(o in e.converters){u[o.toLowerCase()]=e.converters[o]}}a=f.shift();while(a){if(e.responseFields[a]){i[e.responseFields[a]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=a;a=f.shift();if(a){if(a==="*"){a=l}else if(l!=="*"&&l!==a){o=u[l+" "+a]||u["* "+a];if(!o){for(r in u){s=r.split(" ");if(s[1]===a){o=u[l+" "+s[0]]||u["* "+s[0]];if(o){if(o===true){o=u[r]}else if(u[r]!==true){a=s[0];f.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}}}}}return{state:"success",data:t}}x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:Nt.test(kt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Xt(Xt(e,x.ajaxSettings),t):Xt(x.ajaxSettings,e)},ajaxPrefilter:Jt(Ut),ajaxTransport:Jt(jt),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var n,r,a,o,l,u,f,h,c,d,p=x.ajaxSetup({},t),v=p.context||p,y=p.context&&(v.nodeType||v.jquery)?x(v):x.event,m=x.Deferred(),g=x.Callbacks("once memory"),S=p.statusCode||{},b={},w={},_="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(f){if(!o){o={};while(t=qt.exec(a)){o[t[1].toLowerCase()]=t[2]}}t=o[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return f?a:null},setRequestHeader:function(e,t){if(f==null){e=w[e.toLowerCase()]=w[e.toLowerCase()]||e;b[e]=t}return this},overrideMimeType:function(e){if(f==null){p.mimeType=e}return this},statusCode:function(e){var t;if(e){if(f){P.always(e[P.status])}else{for(t in e){S[t]=[S[t],e[t]]}}}return this},abort:function(e){var t=e||_;if(n){n.abort(t)}C(0,t);return this}};m.promise(P);p.url=((e||p.url||kt.href)+"").replace(Wt,kt.protocol+"//");p.type=t.method||t.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(H)||[""];if(p.crossDomain==null){u=s.createElement("a");try{u.href=p.url;u.href=u.href;p.crossDomain=Vt.protocol+"//"+Vt.host!==u.protocol+"//"+u.host}catch(e){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=x.param(p.data,p.traditional)}Yt(Ut,p,t,P);if(f){return P}h=x.event&&p.global;if(h&&x.active++===0){x.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Ht.test(p.type);r=p.url.replace(Ft,"");if(!p.hasContent){d=p.url.slice(r.length);if(p.data&&(p.processData||typeof p.data==="string")){r+=(Rt.test(r)?"&":"?")+p.data;delete p.data}if(p.cache===false){r=r.replace(Lt,"$1");d=(Rt.test(r)?"&":"?")+"_="+Mt+++d}p.url=r+d}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(Bt,"+")}if(p.ifModified){if(x.lastModified[r]){P.setRequestHeader("If-Modified-Since",x.lastModified[r])}if(x.etag[r]){P.setRequestHeader("If-None-Match",x.etag[r])}}if(p.data&&p.hasContent&&p.contentType!==false||t.contentType){P.setRequestHeader("Content-Type",p.contentType)}P.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+Gt+"; q=0.01":""):p.accepts["*"]);for(c in p.headers){P.setRequestHeader(c,p.headers[c])}if(p.beforeSend&&(p.beforeSend.call(v,P,p)===false||f)){return P.abort()}_="abort";g.add(p.complete);P.done(p.success);P.fail(p.error);n=Yt(jt,p,t,P);if(!n){C(-1,"No Transport")}else{P.readyState=1;if(h){y.trigger("ajaxSend",[P,p])}if(f){return P}if(p.async&&p.timeout>0){l=i.setTimeout(function(){P.abort("timeout")},p.timeout)}try{f=false;n.send(b,C)}catch(e){if(f){throw e}C(-1,e)}}function C(e,t,o,s){var u,c,d,b,w,_=t;if(f){return}f=true;if(l){i.clearTimeout(l)}n=undefined;a=s||"";P.readyState=e>0?4:0;u=e>=200&&e<300||e===304;if(o){b=Kt(p,P,o)}b=$t(p,b,P,u);if(u){if(p.ifModified){w=P.getResponseHeader("Last-Modified");if(w){x.lastModified[r]=w}w=P.getResponseHeader("etag");if(w){x.etag[r]=w}}if(e===204||p.type==="HEAD"){_="nocontent"}else if(e===304){_="notmodified"}else{_=b.state;c=b.data;d=b.error;u=!d}}else{d=_;if(e||!_){_="error";if(e<0){e=0}}}P.status=e;P.statusText=(t||_)+"";if(u){m.resolveWith(v,[c,_,P])}else{m.rejectWith(v,[P,_,d])}P.statusCode(S);S=undefined;if(h){y.trigger(u?"ajaxSuccess":"ajaxError",[P,p,u?c:d])}g.fireWith(v,[P,_]);if(h){y.trigger("ajaxComplete",[P,p]);if(!--x.active){x.event.trigger("ajaxStop")}}}return P},getJSON:function(e,t,i){return x.get(e,t,i,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}});x.each(["get","post"],function(e,t){x[t]=function(e,i,n,r){if(S(i)){r=r||n;n=i;i=undefined}return x.ajax(x.extend({url:e,type:t,dataType:r,data:i,success:n},x.isPlainObject(e)&&e))}});x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};x.fn.extend({wrapAll:function(e){var t;if(this[0]){if(S(e)){e=e.call(this[0])}t=x(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(S(e)){return this.each(function(t){x(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=x(this),i=t.contents();if(i.length){i.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=S(e);return this.each(function(i){x(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)});return this}});x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)};x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};x.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Qt=x.ajaxSettings.xhr();g.cors=!!Qt&&"withCredentials"in Qt;g.ajax=Qt=!!Qt;x.ajaxTransport(function(e){var t,n;if(g.cors||Qt&&!e.crossDomain){return{send:function(r,a){var o,s=e.xhr();s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(o in e.xhrFields){s[o]=e.xhrFields[o]}}if(e.mimeType&&s.overrideMimeType){s.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!r["X-Requested-With"]){r["X-Requested-With"]="XMLHttpRequest"}for(o in r){s.setRequestHeader(o,r[o])}t=function(e){return function(){if(t){t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null;if(e==="abort"){s.abort()}else if(e==="error"){if(typeof s.status!=="number"){a(0,"error")}else{a(s.status,s.statusText)}}else{a(Zt[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!=="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders())}}}};s.onload=t();n=s.onerror=s.ontimeout=t("error");if(s.onabort!==undefined){s.onabort=n}else{s.onreadystatechange=function(){if(s.readyState===4){i.setTimeout(function(){if(t){n()}})}}}t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t){throw e}}},abort:function(){if(t){t()}}}}});x.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){x.globalEval(e);return e}}});x.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});x.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=x("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove();i=null;if(e){r(e.type==="error"?404:200,e.type)}});s.head.appendChild(t[0])},abort:function(){if(i){i()}}}}});var ei=[],ti=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ei.pop()||x.expando+"_"+Mt++;this[e]=true;return e}});x.ajaxPrefilter("json jsonp",function(e,t,n){var r,a,o,s=e.jsonp!==false&&(ti.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ti.test(e.data)&&"data");if(s||e.dataTypes[0]==="jsonp"){r=e.jsonpCallback=S(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(s){e[s]=e[s].replace(ti,"$1"+r)}else if(e.jsonp!==false){e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+r}e.converters["script json"]=function(){if(!o){x.error(r+" was not called")}return o[0]};e.dataTypes[0]="json";a=i[r];i[r]=function(){o=arguments};n.always(function(){if(a===undefined){x(i).removeProp(r)}else{i[r]=a}if(e[r]){e.jsonpCallback=t.jsonpCallback;ei.push(r)}if(o&&S(a)){a(o[0])}o=a=undefined});return"script"}});g.createHTMLDocument=function(){var e=s.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();x.parseHTML=function(e,t,i){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){i=t;t=false}var n,r,a;if(!t){if(g.createHTMLDocument){t=s.implementation.createHTMLDocument("");n=t.createElement("base");n.href=s.location.href;t.head.appendChild(n)}else{t=s}}r=z.exec(e);a=!i&&[];if(r){return[t.createElement(r[1])]}r=Ce([e],t,a);if(a&&a.length){x(a).remove()}return x.merge([],r.childNodes)};x.fn.load=function(e,t,i){var n,r,a,o=this,s=e.indexOf(" ");if(s>-1){n=_t(e.slice(s));e=e.slice(0,s)}if(S(t)){i=t;t=undefined}else if(t&&typeof t==="object"){r="POST"}if(o.length>0){x.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments;o.html(n?x("<div>").append(x.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,a||[e.responseText,t,e])})})}return this};x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}});x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length};x.offset={setOffset:function(e,t,i){var n,r,a,o,s,l,u,f=x.css(e,"position"),h=x(e),c={};if(f==="static"){e.style.position="relative"}s=h.offset();a=x.css(e,"top");l=x.css(e,"left");u=(f==="absolute"||f==="fixed")&&(a+l).indexOf("auto")>-1;if(u){n=h.position();o=n.top;r=n.left}else{o=parseFloat(a)||0;r=parseFloat(l)||0}if(S(t)){t=t.call(e,i,x.extend({},s))}if(t.top!=null){c.top=t.top-s.top+o}if(t.left!=null){c.left=t.left-s.left+r}if("using"in t){t.using.call(e,c)}else{h.css(c)}}};x.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)})}var t,i,n=this[0];if(!n){return}if(!n.getClientRects().length){return{top:0,left:0}}t=n.getBoundingClientRect();i=n.ownerDocument.defaultView;return{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}},position:function(){if(!this[0]){return}var e,t,i,n=this[0],r={top:0,left:0};if(x.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{t=this.offset();i=n.ownerDocument;e=n.offsetParent||i.documentElement;while(e&&(e===i.body||e===i.documentElement)&&x.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==n&&e.nodeType===1){r=x(e).offset();r.top+=x.css(e,"borderTopWidth",true);r.left+=x.css(e,"borderLeftWidth",true)}}return{top:t.top-r.top-x.css(n,"marginTop",true),left:t.left-r.left-x.css(n,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&x.css(e,"position")==="static"){e=e.offsetParent}return e||xe})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;x.fn[e]=function(n){return X(this,function(e,n,r){var a;if(b(e)){a=e}else if(e.nodeType===9){a=e.defaultView}if(r===undefined){return a?a[t]:e[n]}if(a){a.scrollTo(!i?r:a.pageXOffset,i?r:a.pageYOffset)}else{e[n]=r}},e,n,arguments.length)}});x.each(["top","left"],function(e,t){x.cssHooks[t]=Ye(g.pixelPosition,function(e,i){if(i){i=Je(e,t);return je.test(i)?x(e).position()[t]+"px":i}})});x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){x.fn[n]=function(r,a){var o=arguments.length&&(i||typeof r!=="boolean"),s=i||(r===true||a===true?"margin":"border");return X(this,function(t,i,r){var a;if(b(t)){return n.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){a=t.documentElement;return Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])}return r===undefined?x.css(t,i,s):x.style(t,i,r,s)},t,o?r:undefined,o)}})});x.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,t){x.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}});x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});x.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",i)}});x.proxy=function(e,t){var i,n,r;if(typeof t==="string"){i=e[t];t=e;e=i}if(!S(e)){return undefined}n=u.call(arguments,2);r=function(){return e.apply(t||this,n.concat(u.call(arguments)))};r.guid=e.guid=e.guid||x.guid++;return r};x.holdReady=function(e){if(e){x.readyWait++}else{x.ready(true)}};x.isArray=Array.isArray;x.parseJSON=JSON.parse;x.nodeName=I;x.isFunction=S;x.isWindow=b;x.camelCase=Q;x.type=P;x.now=Date.now;x.isNumeric=function(e){var t=x.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};if(true){!(n=[],r=function(){return x}.apply(t,n),r!==undefined&&(e.exports=r))}var ii=i.jQuery,ni=i.$;x.noConflict=function(e){if(i.$===x){i.$=ni}if(e&&i.jQuery===x){i.jQuery=ii}return x};if(!a){i.jQuery=i.$=x}return x})},function(e,t,i){e.exports=i(6)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.JSPlugin=undefined;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=i(0);var a=i(7);var o=i(16);var s=i(17);var l=i(18);var u=i(4);var f=h(u);function h(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){var e=null;var t=-1;var i=0;var u=0;var h=1;var d=40;var p=1024*1024*4;var v=1001;var y=1002;var m=1003;var g=2001;var S=2002;var b=new a.StreamClient;var w=null;var _=null;var P=Symbol("OPTIONS");var C=Symbol("CURRENTPLAYRATE");var x=Symbol("CURRENTSOUNDWND");var T=Symbol("MAXWNDNUM");var D=Symbol("MAXWNDNUM");var k=Symbol("DRAWCANVAS");var M=Symbol("SHAPEID");var R=Symbol("WINDOWFULL");var E=Symbol("SINGLEWINDOW");var I=Symbol("FILETMP");var z=Symbol("STATUSTMP");var A=Symbol("UPGRADESTATUSURL");var O=Symbol("CURWNDINDEX");var B=Symbol("CALLBACKFUNCTION");var F=Symbol("PLUGINVERSION");var L=Symbol("CANFULLSCREEN");function q(){document.addEventListener("visibilitychange",function(){if(document.hidden){for(var t=0;t<16;t++){if(e[D][t]&&e[D][t].bLoad){e[D][t].oPlayCtrl.PlayM4_IsVisible(false)}}}else{for(var i=0;i<16;i++){if(e[D][i]&&e[D][i].bLoad){e[D][i].oPlayCtrl.PlayM4_IsVisible(true)}}}},false)}function N(t,i){if(t&&i){e[P].iWidth=t;e[P].iHeight=i}var n=e[P].iWidth%e[P].iCurrentSplit;var r=e[P].iHeight%e[P].iCurrentSplit;var a=(e[P].iWidth-n-e[P].iCurrentSplit*2)/e[P].iCurrentSplit;var o=(e[P].iHeight-r-e[P].iCurrentSplit*2)/e[P].iCurrentSplit;var s=(e[P].iWidth-n)/e[P].iCurrentSplit;var l=(e[P].iHeight-r)/e[P].iCurrentSplit;var u=e[P].iCurrentSplit;if(typeof e[P].szId==="string"){_=(0,f.default)("#"+e[P].szId)}else{_=e[P].szId}var h='<div class="parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">';for(var c=0;c<e[T];c++){t=a+(c%u===u-1?n:0);i=o+(c+u>=Math.pow(u,2)?r:0);var d=s+(c%u===u-1?n:0);var p=l+(c+u>=Math.pow(u,2)?r:0);h+='<div style="float:left; background-color: '+e[P].oStyle.background+"; position: relative; width: "+d+"px; height: "+p+'px;">'+'<canvas id="canvas'+c+'" class="play-window" wid="'+c+'" width="'+d+'" height="'+p+'"></canvas>'+(c===0?'<img style="display:none;" id="playImg'+c+'" src="">':"")+'<canvas id="canvas_draw'+c+'"  class="draw-window" style="border:1px solid '+e[P].oStyle.border+';position:absolute; top:0; left:0;" wid="'+c+'" width='+t+" height="+i+"></canvas>"+"</div>"}h+="</div>";_.html(h);_.find(".parent-wnd").eq(0).children().eq(0).find(".draw-window").eq(0).css("border","1px solid "+e[P].oStyle.borderSelect)}function H(t,i){if(t&&i){e[P].iWidth=t;e[P].iHeight=i}var n=e[P].iWidth%e[P].iCurrentSplit;var r=e[P].iHeight%e[P].iCurrentSplit;var a=(e[P].iWidth-n-e[P].iCurrentSplit*2)/e[P].iCurrentSplit;var o=(e[P].iHeight-r-e[P].iCurrentSplit*2)/e[P].iCurrentSplit;var s=(e[P].iWidth-n)/e[P].iCurrentSplit;var l=(e[P].iHeight-r)/e[P].iCurrentSplit;var u=e[P].iCurrentSplit;if(typeof e[P].szId==="string"){_=(0,f.default)("#"+e[P].szId)}else{_=e[P].szId}_.html("");var h='<div class="parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">';for(var c=0;c<e[T];c++){t=a+(c%u===u-1?n:0);i=o+(c+u>=Math.pow(u,2)?r:0);var d=s+(c%u===u-1?n:0);var p=l+(c+u>=Math.pow(u,2)?r:0);h+='<div style="float:left; background-color: '+e[P].oStyle.background+"; position: relative; width: "+d+"px; height: "+p+'px;">'+'<img id="canvas'+c+'" class="play-window" wid="'+c+'" width="'+d+'" height="'+p+'"></img>'+'<canvas id="canvas_draw'+c+'"  class="draw-window" style="border:1px solid '+e[P].oStyle.border+';position:absolute; top:0; left:0;" wid="'+c+'" width='+t+" height="+i+"></canvas>"+"</div>"}h+="</div>";_.html(h);_.find(".parent-wnd").eq(0).children().eq(0).find(".draw-window").eq(0).css("border","1px solid "+e[P].oStyle.borderSelect)}function W(){e.EventCallback=function(){return{loadEventHandler:function e(){window.loadEventHandler&&window.loadEventHandler()},zoomEventResponse:function e(){},windowEventSelect:function t(i){if(e[O]===i){return}e[O]=i;if(e[D][i].bEZoom||e[D][i].b3DZoom){(0,f.default)(".draw-window").unbind();e[k].setDrawStatus(false);e[k]=null;e[k]=new l.ESCanvas("canvas_draw"+i);e[k].setShapeType("Rect");e[k].setDrawStyle("#ff0000","",0);if(e[D][i].bEZoom){e[k].setDrawStatus(true,function(t){if(t.startPos&&t.endPos){if(t.startPos[0]>t.endPos[0]){e[D][i].oPlayCtrl.PlayM4_SetDisplayRegion(null,false)}else{e[D][i].oPlayCtrl.PlayM4_SetDisplayRegion({left:t.startPos[0],top:t.startPos[1],right:t.endPos[0],bottom:t.endPos[1]},true)}}})}else if(e[D][i].b3DZoom){e[k].setDrawStatus(true,function(t){e[B](t)})}}window.GetSelectWndInfo&&window.GetSelectWndInfo(i)},pluginErrorHandler:function e(t,i,n){window.PluginEventHandler&&window.PluginEventHandler(t,i,n)},windowEventOver:function e(t){window.windowEventOver&&window.windowEventOver(t)},windowEventOut:function e(t){window.windowEventOut&&window.windowEventOut(t)},windowEventUp:function e(t){window.windowEventUp&&window.windowEventUp(t)},windowFullCcreenChange:function e(t){window.windowFullCcreenChange&&window.windowFullCcreenChange(t)},firstFrameDisplay:function e(t,i,n){window.firstFrameDisplay&&window.firstFrameDisplay(t,i,n)},performanceLack:function e(){window.performanceLack&&window.performanceLack()},mouseEvent:function e(t,i,n){var r='<?xml version="1.0"?><MouseEvent><WndIndex>0</WndIndex><EventType>'+t+"</EventType>"+"<Position><x>"+i+"</x><y>"+n+"</y><delta>0</delta></Position></MouseEvent>";window.onMouseEvent&&window.onMouseEvent(r)}}}()}function U(){W();_.find(".parent-wnd").eq(0).children().each(function(t){var i=this;var n=false;(0,f.default)(i).unbind().bind("mousedown",function(){_.find(".parent-wnd").eq(0).find(".draw-window").css("border","1px solid "+e[P].oStyle.border);_.find(".parent-wnd").eq(0).children().eq(t).find(".draw-window").eq(0).css("border","1px solid "+e[P].oStyle.borderSelect);e.EventCallback.windowEventSelect(parseInt(_.find(".parent-wnd").eq(0).children().eq(t).find(".play-window").eq(0).attr("wid"),10))});(0,f.default)(i).bind("mouseover",function(i){e.EventCallback.windowEventOver(t);i.stopPropagation()});(0,f.default)(i).bind("mouseout",function(i){e.EventCallback.windowEventOut(t);i.stopPropagation()});(0,f.default)(i).bind("mousedown",function(t){n=true;var i=t.offsetX/e[k].m_iCanvasWidth;var r=t.offsetY/e[k].m_iCanvasHeight;if(t.button===2){e.EventCallback.mouseEvent(4,i,r)}else if(t.button===0){e.EventCallback.mouseEvent(1,i,r)}t.stopPropagation()});(0,f.default)(i).bind("mousemove",function(t){var i=t.offsetX/e[k].m_iCanvasWidth;var r=t.offsetY/e[k].m_iCanvasHeight;if(n){e.EventCallback.mouseEvent(7,i,r)}else{e.EventCallback.mouseEvent(6,i,r)}t.stopPropagation()});(0,f.default)(i).bind("mousewheel",function(t){var i=t.offsetX/e[k].m_iCanvasWidth;var n=t.offsetY/e[k].m_iCanvasHeight;e.EventCallback.mouseEvent(8,i,n);t.stopPropagation()});(0,f.default)(i).bind("mouseup",function(i){n=false;e.EventCallback.windowEventUp(t);var r=i.offsetX/e[k].m_iCanvasWidth;var a=i.offsetY/e[k].m_iCanvasHeight;if(i.button===2){e.EventCallback.mouseEvent(5,r,a)}else if(i.button===0){e.EventCallback.mouseEvent(3,r,a)}});(0,f.default)(i).bind("dblclick",function(t){if(!e[D][e[O]].bPlay||e[P].iType!==2){return}if(!e[L]){return}var n=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||false;var r=(0,f.default)(i).get(0);if(!n){if(r.requestFullScreen){r.requestFullScreen()}else if(r.webkitRequestFullScreen){r.webkitRequestFullScreen()}else if(r.mozRequestFullScreen){r.mozRequestFullScreen()}e[E]=(0,f.default)(i)}else{if(_.find(".parent-wnd").eq(0).width()===(0,f.default)(window).width()){return}if(document.exitFullscreen){document.exitFullscreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}e[E]=null;e[R]=false}var a=t.offsetX/e[k].m_iCanvasWidth;var o=t.offsetX/e[k].m_iCanvasHeight;e.EventCallback.mouseEvent(2,a,o);t.stopPropagation()})});if(typeof document.fullScreen!=="undefined"){document.addEventListener("fullscreenchange",function(){var t=document.fullscreen||false;e.EventCallback.windowFullCcreenChange(t)})}else if(typeof document.webkitIsFullScreen!=="undefined"){document.addEventListener("webkitfullscreenchange",function(){var t=document.webkitIsFullScreen||false;e.EventCallback.windowFullCcreenChange(t)})}else if(typeof document.mozFullScreen!=="undefined"){document.addEventListener("mozfullscreenchange",function(){var t=document.mozFullScreen||false;e.EventCallback.windowFullCcreenChange(t)})}}function j(){var t=_.find(".parent-wnd").eq(0).children().length;var i=e[P].iWidth%e[P].iCurrentSplit;var n=e[P].iHeight%e[P].iCurrentSplit;var r=(e[P].iWidth-i-e[P].iCurrentSplit*2)/e[P].iCurrentSplit;var a=(e[P].iHeight-n-e[P].iCurrentSplit*2)/e[P].iCurrentSplit;var o=(e[P].iWidth-i)/e[P].iCurrentSplit;var s=(e[P].iHeight-n)/e[P].iCurrentSplit;var l=e[P].iCurrentSplit;for(var u=0;u<t;u++){var f=r+(u%l===l-1?i:0);var h=a+(u+l>=Math.pow(l,2)?n:0);var c=o+(u%l===l-1?i:0);var d=s+(u+l>=Math.pow(l,2)?n:0);_.find(".parent-wnd").eq(0).children().eq(u).width(c);_.find(".parent-wnd").eq(0).children().eq(u).height(d);_.find(".parent-wnd").eq(0).children().eq(u).find(".draw-window").attr("width",f);_.find(".parent-wnd").eq(0).children().eq(u).find(".draw-window").attr("height",h);_.find(".parent-wnd").eq(0).children().eq(u).find(".play-window").attr("width",c);_.find(".parent-wnd").eq(0).children().eq(u).find(".play-window").attr("height",d)}_.find(".parent-wnd").eq(e[O]).find(".draw-window").css("border","1px solid "+e[P].oStyle.border);_.find(".parent-wnd").eq(e[O]).children().eq(0).find(".draw-window").eq(0).css("border","1px solid "+e[P].oStyle.borderSelect)}function G(t,i,n,r,a,o,s){if(!(0,f.default)("#"+e[D][n].windowID).length){return}var l=false;if(r&&a){l=true}e[D][n].bLoad=true;b.openStream(t,i,function(t){if(t.bHead&&!e[D][n].bPlay){e[D][n].bPlay=true;e[D][n].aHead=new Uint8Array(t.buf);e[D][n].oPlayCtrl.PlayM4_OpenStream(t.buf,d,1024*1024*2);if(e[D][n].szSecretKey!==""){setTimeout(function(){e[D][n].oPlayCtrl.PlayM4_SetSecretKey(1,e[D][n].szSecretKey,128);e[D][n].szSecretKey=""},100)}if(e[D][n].aHead[8]===4){e[D][n].oPlayCtrl.PlayM4_SetStreamOpenMode(0)}else{e[D][n].oPlayCtrl.PlayM4_SetStreamOpenMode(1)}e[D][n].oPlayCtrl.PlayM4_SetInputBufSize(p);e[D][n].oPlayCtrl.PlayM4_Play(e[D][n].windowID)}else{var i=new Uint8Array(t.buf);var r=e[D][n].oPlayCtrl.PlayM4_GetInputBufSize();var a=e[D][n].oPlayCtrl.PlayM4_GetYUVBufSize();if(a===2&&!e[D][n].bFirstFrame){e[D][n].bFirstFrame=true;e[D][n].oPlayCtrl.PlayM4_GetFrameResolution(function(t,i){e.EventCallback.firstFrameDisplay(n,t,i)})}var o=e[D][n].oPlayCtrl.PlayM4_GetDecodeFrameType();if(r>p*.5&&r<p*.8&&e[D][n].iRate===1){if(o!==h&&!e[D][n].bFrameForward){e[D][n].oPlayCtrl.PlayM4_SetDecodeFrameType(h);e.EventCallback.performanceLack()}}else if(r>=p*.8){}if(a>10&&a<15&&!e[D][n].bFrameForward){if(o!==h){e[D][n].oPlayCtrl.PlayM4_SetDecodeFrameType(h);e.EventCallback.performanceLack()}}else if(a>15){}if(a<10&&r<p*.5){if(o!==u&&e[D][n].iRate===1){e[D][n].oPlayCtrl.PlayM4_SetDecodeFrameType(u)}}if(t.statusString){e.EventCallback.pluginErrorHandler(n,v,t)}else if(t.type&&t.type==="exception"){e.EventCallback.pluginErrorHandler(n,y,t)}else{e[D][n].oPlayCtrl.PlayM4_InputData(i,i.length)}}if(e[D][n].szStorageUUID){w.inputData(e[D][n].szStorageUUID,t.buf)}t=null},function(){if(e[D][n].bPlay){e.EventCallback.pluginErrorHandler(n,m);e[D][n].bPlay=false;e[D][n].bFrameForward=false;e[D][n].iRate=1;if(e[D][n].oPlayCtrl){e[D][n].oPlayCtrl.PlayM4_Stop();e[D][n].oPlayCtrl.PlayM4_CloseStream()}}}).then(function(t){e[D][n].szStreamUUID=t;b.startPlay(t,r,a).then(function(){if(l){e[D][n].szPlayType="playback";e[D][n].iRate=1;e[D][n].oPlayCtrl.PlayM4_PlayRate(e[D][n].iRate)}else{e[D][n].szPlayType="realplay"}o()},function(e){s(e)})},function(e){s(e)})}function V(t,i,n,r,a,o,s){if(!(0,f.default)("#"+e[D][n].windowID).length){return}e[D][n].bPlay=true;b.openStream(t,i,function(e){if(!e.bHead){var t=new Blob([e.buf],{type:"image/jpeg"});var i=URL.createObjectURL(t);if((0,f.default)("#canvas"+n).length){document.getElementById("canvas"+n).src=i}}},function(){if(e[D][n].bPlay){e.EventCallback.pluginErrorHandler(n,m);e[D][n].bPlay=false}}).then(function(t){e[D][n].szStreamUUID=t;b.startPlay(t,r,a).then(function(){e[D][n].szPlayType="realplay";o()},function(e){s(e)})},function(e){s(e)})}var J=function(){function a(t){c(this,a);e=this;var i={szId:"playWnd",iMode:0,iType:1,iWidth:400,iHeight:300,iMaxSplit:4,iCurrentSplit:2,szBasePath:"./"};this[P]=Object.assign(i,t);var n={border:"#343434",borderSelect:"#FFCC00",background:"#4C4B4B"};n=Object.assign(n,t.oStyle);this[P].oStyle=n;if(this[P].iCurrentSplit>this[P].iMaxSplit){this[P].iCurrentSplit=this[P].iMaxSplit}this[C]=1;this[x]=-1;this[T]=this[P].iMaxSplit*this[P].iMaxSplit;this[M]="";this[R]=false;this[E]=null;this[I]=null;this[z]="";this[A]="";this[O]=-1;this[B]=null;this[L]=true;this[F]="V1.2.0 build20190123";w=new s.StorageManager(this[P].szBasePath+"/transform");if(typeof e[P].szId==="string"){_=(0,f.default)("#"+e[P].szId)}else{_=e[P].szId}this[D]=[];for(var r=0;r<this[T];r++){this[D][r]={};this[D][r].bSelect=false;this[D][r].bPlay=false;this[D][r].bPause=false;this[D][r].bRecord=false;this[D][r].oPlayCtrl=null;this[D][r].szPlayType="";this[D][r].szStorageUUID="";this[D][r].szStreamUUID="";this[D][r].aHead=[];this[D][r].bLoad=false;this[D][r].windowID="canvas"+r;this[D][r].drawID="canvas_draw"+r;this[D][r].iRate=1;this[D][r].bEZoom=false;this[D][r].b3DZoom=false;this[D][r].szSecretKey="";this[D][r].bFrameForward=false;this[D][r].iDecodeType=u;this[D][r].bFirstFrame=false}q();if(this[P].iMode===0){N()}else if(this[P].iMode===1){}else if(this[P].iMode===2){H()}this[k]=new l.ESCanvas("canvas_draw0");if(this[P].iType===0){_.hide()}U();e.EventCallback.windowEventSelect(0)}n(a,[{key:"JS_UpdateWindowStyle",value:function e(t){this[P].oStyle=t;j()}},{key:"JS_GetPluginVersion",value:function t(){return e[F]}},{key:"JS_ArrangeWindow",value:function t(i){if(i<e[P].iMaxSplit){e[P].iCurrentSplit=i}else{e[P].iCurrentSplit=e[P].iMaxSplit}if(r.oTool.isFirefox()){for(var n=0;n<e[P].iMaxSplit*e[P].iMaxSplit;n++){if(e[D][n].oPlayCtrl){e[D][n].oPlayCtrl.PlayM4_ClearCanvas()}}}j();e.EventCallback.windowEventSelect(0)}},{key:"JS_SetSecretKey",value:function e(t,i){if(t<0){return-1}if(i===""||typeof i==="undefined"){return-1}this[D][t].szSecretKey=i;return 0}},{key:"JS_Play",value:function t(i,n,r,a,s){var l=new Promise(function(t,l){if(r<0||r>e[T]-1){l();return}if(e[D][r].bFrameForward){l();return}if(e[D][r].bPlay){e.JS_Stop(r)}if(e[P].iMode===0){setTimeout(function(){e[D][r].bFirstFrame=false;e[D][r].iDecodeType=u;if(e[D][r].oPlayCtrl){G(i,n,r,a,s,t,l)}else{e[D][r].oPlayCtrl=new o.JSPlayCtrl(e[P].szBasePath+"/playctrl/",function(o){if(o.cmd==="loaded"&&!e[D][r].bLoad){G(i,n,r,a,s,t,l)}else if(o.cmd==="OnebyOne"){if(!o.status){if(!e[D][r].bPause){b.pause(e[D][r].szStreamUUID);e[D][r].bPause=true}}else{if(e[D][r].bPause){b.resume(e[D][r].szStreamUUID);e[D][r].bPause=false}}}else if(o.cmd==="GetFrameData"){e.EventCallback.pluginErrorHandler(r,g)}},r)}},200)}else if(e[P].iMode===1){}else if(e[P].iMode===2){var h=(0,f.default)(".play-window").eq(r);h.show();V(i,n,r,a,s,t,l)}});return l}},{key:"JS_Seek",value:function t(i,n,r){var a=new Promise(function(t,a){if(i<0||i>e[T]-1){a();return}if(!e[D][i].bPlay){a();return}b.seek(e[D][i].szStreamUUID,n,r).then(function(){t()},function(e){a(e)})});return a}},{key:"JS_GetSdkVersion",value:function t(){return e[D][0].oPlayCtrl.PlayM4_GetSdkVersion()}},{key:"JS_DestroyWorker",value:function t(){e[D].forEach(function(e){if(e.bPlay){e.oPlayCtrl.PlayM4_CloseStream()}if(e.oPlayCtrl){e.oPlayCtrl.PlayM4_Destroy();e.oPlayCtrl=null;e.bLoad=false}});e[k].setShapeType("")}},{key:"JS_Stop",value:function t(i){var n=new Promise(function(t,n){if(i<0||i>e[T]-1){n();return}if(e[D][i].szStorageUUID){e.JS_StopSave(i)}if(e[D][i].bEZoom){e.JS_DisableZoom(i)}if(e[x]===i){e[x]=-1}b.stop(e[D][i].szStreamUUID).then(function(){e[D][i].bPlay=false;e[D][i].bFrameForward=false;e[D][i].iRate=1;if(e[P].iMode===0){if(e[D][i].oPlayCtrl){e[D][i].oPlayCtrl.PlayM4_Stop&&e[D][i].oPlayCtrl.PlayM4_Stop();e[D][i].oPlayCtrl.PlayM4_CloseStream&&e[D][i].oPlayCtrl.PlayM4_CloseStream()}}else if(e[P].iMode===2){var n=(0,f.default)(".play-window").eq(i);n.hide()}setTimeout(function(){t()},500)},function(){setTimeout(function(){n()},500)})});return n}},{key:"JS_Pause",value:function t(i){var n=new Promise(function(t,n){if(i<0||i>e[T]-1){n();return}if(!e[D][i].bPlay){n();return}if(e[D][i].bFrameForward){n();return}b.pause(e[D][i].szStreamUUID).then(function(){e[D][i].oPlayCtrl.PlayM4_Pause(true);e[D][i].bPause=true;t()},function(e){n(e)})});return n}},{key:"JS_Resume",value:function t(i){var n=new Promise(function(t,n){if(i<0||i>e[T]-1){n();return}if(!e[D][i].bPlay){n();return}b.resume(e[D][i].szStreamUUID).then(function(){if(e[C]!==1){e[D][i].iRate=e[C];b.setPlayRate(e[D][i].szStreamUUID,e[D][i].iRate);e[D][i].oPlayCtrl.PlayM4_PlayRate(e[D][i].iRate);if(e[C]>1){e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(h)}else{e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(u)}}if(e[D][i].bFrameForward){e[D][i].oPlayCtrl.PlayM4_Play(e[D][i].windowID);e[D][i].bFrameForward=false}else{e[D][i].oPlayCtrl.PlayM4_Pause(false)}e[D][i].bPause=false;t()},function(e){n(e)})});return n}},{key:"JS_Slow",value:function t(i){var n=new Promise(function(t,n){if(i<0||i>e[T]-1){n();return}if(!e[D][i].bPlay){n();return}if(e[D][i].szPlayType!=="playback"){n();return}if(e[D][i].iRate===-8){n();return}if(e[D][i].bFrameForward){n();return}if(e[D][i].iRate<0&&e[D][i].iRate>-8){e[D][i].iRate*=2}if(e[D][i].iRate===1){e[D][i].iRate*=-2}if(e[D][i].iRate>1){e[D][i].iRate/=2}b.setPlayRate(e[D][i].szStreamUUID,e[D][i].iRate).then(function(){if(e[D][i].iRate<2){e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(u)}else{e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(h);e[D][i].oPlayCtrl.PlayM4_SetIFrameDecInterval(0)}e[D][i].oPlayCtrl.PlayM4_PlayRate(e[D][i].iRate);t()},function(e){n(e)})});return n}},{key:"JS_Fast",value:function t(i){var n=new Promise(function(t,n){if(i<0||i>e[T]-1){n();return}if(!e[D][i].bPlay){n();return}if(e[D][i].szPlayType!=="playback"){n();return}if(e[D][i].bFrameForward){n();return}if(e[D][i].iRate===8){n();return}if(e[D][i].iRate===-2){e[D][i].iRate=1}else if(e[D][i].iRate<-2){e[D][i].iRate/=2}else if(e[D][i].iRate>0&&e[D][i].iRate<8){e[D][i].iRate*=2}b.setPlayRate(e[D][i].szStreamUUID,e[D][i].iRate).then(function(){if(e[D][i].iRate<2){e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(u)}else{e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(h);if(e[D][i].iRate===8){e[D][i].oPlayCtrl.PlayM4_SetIFrameDecInterval(2)}else{e[D][i].oPlayCtrl.PlayM4_SetIFrameDecInterval(0)}}e[D][i].oPlayCtrl.PlayM4_PlayRate(e[D][i].iRate);t()},function(e){n(e)})});return n}},{key:"JS_Transmission",value:function t(i,n){var r=new Promise(function(t,r){if(i<0||i>e[T]-1){r();return}if(!e[D][i].szStreamUUID){r();return}b.transmission(e[D][i].szStreamUUID,n).then(function(e){t(e)},function(e){r(e)})});return r}},{key:"JS_FrameForward",value:function t(i){var n=new Promise(function(t,n){if(i<0||i>e[T]-1){n();return}if(!e[D][i].bPlay){n();return}if(e[D][i].iRate!==1){e[D][i].iRate=1;e[C]=e[D][i].iRate;b.setPlayRate(e[D][i].szStreamUUID,e[D][i].iRate).then(function(){e[D][i].oPlayCtrl.PlayM4_PlayRate(e[D][i].iRate);e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(u);e[D][i].oPlayCtrl.PlayM4_OneByOne();e[D][i].bFrameForward=true},function(e){n(e)})}else{e[D][i].oPlayCtrl.PlayM4_PlayRate(e[D][i].iRate);e[D][i].oPlayCtrl.PlayM4_SetDecodeFrameType(u);e[D][i].oPlayCtrl.PlayM4_OneByOne();e[D][i].bFrameForward=true}t()});return n}},{key:"JS_GetOSDTime",value:function i(n){var a=new Promise(function(i,a){if(n<0||n>e[T]-1){a(t);return}if(!e[D][n].bPlay){a(t);return}var o=e[D][n].oPlayCtrl.PlayM4_GetOSDTime(function(e){var t=r.oTool.isIOS()||r.oTool.isSafari()||r.oTool.isEdge()?"/":" ";var n=Date.parse(e.replace(/-/g,t))/1e3;i(n)});if(o!==0){a(t);return}});return a}},{key:"JS_OpenSound",value:function n(r){if(r<0||r>e[T]-1){return t}if(!e[D][r].bPlay){return t}if(e[x]===r){return t}if(e[x]!==-1){e[D][e[x]].oPlayCtrl.PlayM4_StopSound()}if(e[D][r].oPlayCtrl.PlayM4_PlaySound(r)!==0){return t}e[x]=r;return i}},{key:"JS_GetVolume",value:function t(i,n){e[D][i].oPlayCtrl.PlayM4_GetVolume(function(e){n(e)})}},{key:"JS_SetVolume",value:function n(r,a){if(e[D][r].oPlayCtrl.PlayM4_SetVolume(a)!==0){return t}return i}},{key:"JS_CloseSound",value:function n(){var r=e[x];if(r<0||r>e[T]-1){return t}if(!e[D][r].bPlay){return t}if(e[D][r].oPlayCtrl.PlayM4_StopSound()!==0){return t}e[x]=-1;return i}},{key:"JS_EnableZoom",value:function n(r){if(r<0||r>e[T]-1){return t}if(!e[D][r].bPlay){return t}(0,f.default)(".draw-window").unbind();this[k]=new l.ESCanvas("canvas_draw"+r);this[k].setShapeType("Rect");this[k].setDrawStyle("#ff0000","",0);this[k].setDrawStatus(true,function(t){if(t.startPos&&t.endPos){if(t.startPos[0]>t.endPos[0]){e[D][r].oPlayCtrl.PlayM4_SetDisplayRegion(null,false)}else{e[D][r].oPlayCtrl.PlayM4_SetDisplayRegion({left:t.startPos[0],top:t.startPos[1],right:t.endPos[0],bottom:t.endPos[1]},true)}}});e[D][r].bEZoom=true;return i}},{key:"JS_DisableZoom",value:function n(r){if(r<0||r>e[T]-1){return t}if(!e[D][r].bPlay){return t}this[k].setDrawStatus(false);if(this[D][r].oPlayCtrl.PlayM4_SetDisplayRegion(null,false)!==0){return t}this[D][r].bEZoom=false;return i}},{key:"JS_Enable3DZoom",value:function n(r,a){if(r<0||r>e[T]-1){return t}if(!e[D][r].bPlay){return t}(0,f.default)(".draw-window").unbind();this[B]=a;this[k]=new l.ESCanvas("canvas_draw"+r);this[k].setShapeType("Rect");this[k].setDrawStyle("#ff0000","",0);this[k].setDrawStatus(true,function(e){a(e)});e[D][r].b3DZoom=true;return i}},{key:"JS_Disable3DZoom",value:function n(r){if(r<0||r>e[T]-1){return t}if(!e[D][r].bPlay){return t}this[k].setDrawStatus(false);this[D][r].b3DZoom=false;return i}},{key:"JS_CapturePicture",value:function t(i,n,a,o){var s=new Promise(function(t,s){if(i<0||i>e[T]-1){s();return}if(!e[D][i].bPlay){s();return}if(!a){a="JPEG"}if(a==="BMP"){e[D][i].oPlayCtrl.PlayM4_GetBMP(function(e){if(e===6){s(S)}else{if(o){o(e)}else{r.oTool.downloadFile(e,n+".BMP")}t()}})}else if(a==="JPEG"){e[D][i].oPlayCtrl.PlayM4_GetJPEG(function(e){if(e===6){s(S)}else{if(o){o(e)}else{r.oTool.downloadFile(e,n+".jpeg")}t()}})}});return s}},{key:"JS_StopRealPlayAll",value:function t(){b.stopAll();e[D].forEach(function(t,i){if(t.bPlay){if(t.szStorageUUID){e.JS_StopSave(i)}if(t.bEZoom){e.JS_DisableZoom(i)}if(e[P].iMode===0){t.oPlayCtrl.PlayM4_Stop();t.oPlayCtrl.PlayM4_CloseStream()}else if(e[P].iMode===2){(0,f.default)(".play-window").hide()}}t.bPlay=false});e[x]=-1}},{key:"JS_StartSave",value:function t(i,n,r){var a=new Promise(function(t,a){var o=0;if(r){o=r.iPackage}if(i<0||i>e[T]-1){a();return}if(!e[D][i].bPlay){a();return}if(n.indexOf(".mp4")<0){n=n+".mp4"}var s=e[D][i].aHead;var l=0;if(e[D][i].szPlayType==="playback"){l=1}w.startRecord(n,s,2,l,{cbEventHandler:function t(n){e.EventCallback.pluginErrorHandler(i,n)},iPackage:o}).then(function(n){e[D][i].szStorageUUID=n;t()},function(){a()})});return a}},{key:"JS_StopSave",value:function t(i){var n=new Promise(function(t,n){if(!e[D][i].szStorageUUID){n();return}w.stopRecord(e[D][i].szStorageUUID).then(function(){e[D][i].szStorageUUID="";t()},function(e){n(e)})});return n}},{key:"JS_GetLocalConfig",value:function e(){return""}},{key:"JS_SetLocalConfig",value:function e(){return 0}},{key:"JS_SetGridInfo",value:function e(t){if(t===null||typeof t==="undefined"){return-1}var i="#ff0000";if(t.drawColor){i=t.drawColor}this[k].setDrawStyle(i);this[k].setShapesInfoByType("Grid",[{szGridMap:t.gridMap,iGridColNum:t.gridColNum,iGridRowNum:t.gridRowNum}]);return 0}},{key:"JS_GetGridInfo",value:function e(){if(!this[k]){return{}}var t=this[k].getShapesInfoByType("Grid")[0];if(!t){return{iGridRowNum:18,iGridColNum:22,szGridMap:""}}return{gridColNum:t.iGridColNum,gridRowNum:t.iGridRowNum,gridMap:t.szGridMap}}},{key:"JS_SetDrawShapeInfo",value:function e(t,i){if(typeof t==="undefined"||t===""){return-1}this[k].setShapeType(t);this[k].setDrawStyle(i.szDrawColor||"",i.szFillColor||"",i.iTranslucent||0);if(i.iMaxShapeSupport&&i.iMaxShapeSupport>0){this[k].setMaxShapeSupport(i.iMaxShapeSupport)}if(i.iMaxPointSupport&&i.iMaxPointSupport>0){this[k].setCurrentShapeInfo({szId:"",szTips:"",iMinClosed:3,iMaxPointNum:i.iMaxPointSupport,iPolygonType:1,szDrawColor:i.szDrawColor||"",szFillColor:i.szFillColor||"",iTranslucent:i.iTranslucent||0})}}},{key:"JS_SetPolygonInfo",value:function e(t){if(typeof t==="undefined"||!t.length){return-1}var i=[];if(t.length>0){for(var n=0,r=t.length;n<r;n++){var a=t[n].aPoint;if(a.length>0){i.push(t[n])}}}if(i.length>0){this[k].setShapesInfoByType("Polygon",i);return 0}return-1}},{key:"JS_GetPolygonInfo",value:function e(){var t=[];var i=this[k].getShapesInfoByType("Polygon");for(var n=0,r=i.length;n<r;n++){var a=i[n];var o={aPoint:a.aPoint,bClosed:a.bClosed,szTips:a.szTips};t.push(o)}return t}},{key:"JS_SetLineInfo",value:function e(t){if(typeof t==="undefined"||!t.length){return-1}var i=[];if(t.length>0){for(var n=0,r=t.length;n<r;n++){var a=t[n].aPoint;if(a.length>0){i.push(t[n])}}}if(i.length>0){this[k].setShapesInfoByType("Line",i);return 0}return-1}},{key:"JS_GetLineInfo",value:function e(){var t=[];var i=this[k].getShapesInfoByType("Line");for(var n=0,r=i.length;n<r;n++){var a=i[n];var o={iLineType:a.iLineType,aPoint:a.aPoint,szTips:a.szTips};t.push(o)}return t}},{key:"JS_SetRectInfo",value:function e(t){if(typeof t==="undefined"||!t.length){return-1}var i=[];if(t.length>0){for(var n=0,r=t.length;n<r;n++){var a=t[n].aPoint;if(a.length>0){i.push(t[n])}}}if(i.length>0){this[k].setShapesInfoByType("Rect",i);return 0}return-1}},{key:"JS_GetRectInfo",value:function e(){var t=[];var i=this[k].getShapesInfoByType("Rect");for(var n=0,r=i.length;n<r;n++){var a=i[n];var o={aPoint:a.aPoint,szTips:a.szTips};t.push(o)}return t}},{key:"JS_SetRegionInfo",value:function t(i){this[k].clearAllShape();var n=r.oTool.parseXmlFromStr(i);this[k].setDrawStyle("#ff0000","#343434",.3);if((0,f.default)(n).find("DetectionRegionInfo").length>0){this[k].setShapeType("Rect");var a=parseInt((0,f.default)(n).find("MaxRegionNum").eq(0).text(),10);this[k].setMaxShapeSupport(a);this[k].m_szDisplayMode=(0,f.default)(n).find("DisplayMode").eq(0).text();this[k].m_szVideoFormat=(0,f.default)(n).find("videoFormat").eq(0).text();this[k].m_iHorizontalResolution=parseInt((0,f.default)(n).find("HorizontalResolution").eq(0).text(),10);this[k].m_iVerticalResolution=parseInt((0,f.default)(n).find("VerticalResolution").eq(0).text(),10);var o=[];(0,f.default)(n).find("DetectionRegion").each(function(){var t=[];for(var i=0,n=(0,f.default)(this).find("positionX").length;i<n;i++){var r=Math.round((0,f.default)(this).find("positionX").eq(i).text())*e[k].m_iCanvasWidth/e[k].m_iHorizontalResolution;var a=(e[k].m_iVerticalResolution-Math.round((0,f.default)(this).find("positionY").eq(i).text()))*e[k].m_iCanvasHeight/e[k].m_iVerticalResolution;t.push([r,a])}if(t.length>0&&!(t[0][0]===0&&t[1][0]===0&&t[2][0]===0&&t[3][0]===0)){o.push({aPoint:t,iEditType:e[k].m_szDisplayMode==="transparent"?1:0,szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.3})}});this[k].setShapesInfoByType("Rect",o)}else if((0,f.default)(n).find("MoveDetection").length>0){this[k].setShapeType("Grid");var s=parseInt((0,f.default)(n).find("columnGranularity").eq(0).text(),10);var l=parseInt((0,f.default)(n).find("rowGranularity").eq(0).text(),10);var u=(0,f.default)(n).find("gridMap").eq(0).text();this[k].setShapesInfoByType("Grid",[{szGridMap:u,iGridColNum:s,iGridRowNum:l}])}return 0}},{key:"JS_GetRegionInfo",value:function e(){if(!this[k]){return""}var t=this[k].getShapeType();var i='<?xml version="1.0" encoding="utf-8"?>';if(t==="Rect"){i+="<DetectionRegionInfo>";i+="<videoFormat>"+this[k].m_szVideoFormat+"</videoFormat><RegionType>roi</RegionType>";i+="<ROI><HorizontalResolution>"+this[k].m_iHorizontalResolution+"</HorizontalResolution><VerticalResolution>"+this[k].m_iVerticalResolution+"</VerticalResolution></ROI>";i+="<DisplayMode>"+this[k].m_szDisplayMode+"</DisplayMode><MaxRegionNum>"+this[k].getMaxShapeSupport()+"</MaxRegionNum>";i+="<DetectionRegionList>";var n=this[k].getShapesInfoByType("Rect");for(var r=0,a=n.length;r<a;r++){var o=n[r].aPoint;i+="<DetectionRegion><RegionCoordinatesList>";i+="<RegionCoordinates><positionX>"+Math.round(o[3][0]*this[k].m_iHorizontalResolution/this[k].m_iCanvasWidth)+"</positionX><positionY>"+(this[k].m_iVerticalResolution-Math.round(o[3][1]*this[k].m_iVerticalResolution/this[k].m_iCanvasHeight))+"</positionY></RegionCoordinates>";i+="<RegionCoordinates><positionX>"+Math.round(o[2][0]*this[k].m_iHorizontalResolution/this[k].m_iCanvasWidth)+"</positionX><positionY>"+(this[k].m_iVerticalResolution-Math.round(o[2][1]*this[k].m_iVerticalResolution/this[k].m_iCanvasHeight))+"</positionY></RegionCoordinates>";i+="<RegionCoordinates><positionX>"+Math.round(o[1][0]*this[k].m_iHorizontalResolution/this[k].m_iCanvasWidth)+"</positionX><positionY>"+(this[k].m_iVerticalResolution-Math.round(o[1][1]*this[k].m_iVerticalResolution/this[k].m_iCanvasHeight))+"</positionY></RegionCoordinates>";i+="<RegionCoordinates><positionX>"+Math.round(o[0][0]*this[k].m_iHorizontalResolution/this[k].m_iCanvasWidth)+"</positionX><positionY>"+(this[k].m_iVerticalResolution-Math.round(o[0][1]*this[k].m_iVerticalResolution/this[k].m_iCanvasHeight))+"</positionY></RegionCoordinates>";i+="</RegionCoordinatesList></DetectionRegion>"}i+="</DetectionRegionList>";i+="</DetectionRegionInfo>"}else if(t==="Grid"){var s=this[k].getShapesInfoByType("Grid")[0];if(!s){s={iGridRowNum:18,iGridColNum:22,szGridMap:""}}i+="<MoveDetection><videoFormat>PAL</videoFormat><RegionType>grid</RegionType>";i+="<Grid><rowGranularity>"+s.iGridRowNum+"</rowGranularity><columnGranularity>"+s.iGridColNum+"</columnGranularity></Grid>";i+="<DisplayMode>transparent</DisplayMode>";i+="<gridMap>"+s.szGridMap+"</gridMap></MoveDetection>"}return i}},{key:"JS_SetDrawStatus",value:function e(t){if(!this[k]){return-1}this[k].setDrawStatus(t);return 0}},{key:"JS_ClearRegion",value:function e(){if(!this[k]){return-1}this[k].clearAllShape();return 0}},{key:"JS_GetTextOverlay",value:function e(){if(!this[k]){return""}var t='<?xml version="1.0" encoding="utf-8"?>';t+="<OSD>";t+="<videoResolutionWidth>"+this[k].m_iHorizontalResolution+"</videoResolutionWidth>";t+="<videoResolutionHeight>"+this[k].m_iVerticalResolution+"</videoResolutionHeight>";var i="";var n="";var r="";var a=this[k].getShapesInfoByType("RectOSD");for(var o=0,s=a.length;o<s;o++){var l=a[o];var u=Math.round(l.iPositionX*this[k].m_iHorizontalResolution/this[k].m_iCanvasWidth);var f=Math.round(l.iPositionY*this[k].m_iVerticalResolution/this[k].m_iCanvasHeight);if(l.szOSDType==="overlay-date"){i+="<DateTimeOverlay><Type>"+l.szDateStyle+"</Type>";i+="<clockType>"+l.szClockType+"</clockType>";i+="<displayWeek>"+l.szDisplayWeek+"</displayWeek>";i+="<enabled>"+l.szEnabled+"</enabled>";i+="<alignment>"+l.szAlignment+"</alignment>";i+="<positionX>"+u+"</positionX><positionY>"+f+"</positionY></DateTimeOverlay>"}else if(l.szOSDType==="overlay-ch"){n+="<channelNameOverlay><enabled>"+l.szEnabled+"</enabled>";n+="<ChannelName>"+l.szText+"</ChannelName>";n+="<alignment>"+l.szAlignment+"</alignment>";n+="<positionX>"+u+"</positionX><positionY>"+f+"</positionY></channelNameOverlay>"}else if(l.szOSDType==="overlay-text"){r+="<TextOverlay><id>"+l.szId+"</id><enabled>"+l.szEnabled+"</enabled>";r+="<alignment>"+l.szAlignment+"</alignment>";r+="<displayText>"+l.szText+"</displayText>";r+="<positionX>"+u+"</positionX><positionY>"+f+"</positionY></TextOverlay>"}}t+=i;t+=n;t+="<TextOverlayList>";t+=r;t+="</TextOverlayList>";t+="</OSD>";return t}},{key:"JS_SetTextOverlay",value:function t(i){this[k].setMaxShapeSupport(20);var n=r.oTool.parseXmlFromStr(i);this[k].clearShapeByType("RectOSD");if((0,f.default)(n).find("OSD").length>0){this[k].setDrawStyle("#ff0000","#343434",.7);this[k].m_iHorizontalResolution=parseInt((0,f.default)(n).find("videoResolutionWidth").eq(0).text(),10);this[k].m_iVerticalResolution=parseInt((0,f.default)(n).find("videoResolutionHeight").eq(0).text(),10);if((0,f.default)(n).find("channelNameOverlay").length>0){var a=(0,f.default)(n).find("channelNameOverlay").eq(0);var o=(0,f.default)(a).find("ChannelName").eq(0).text();var s=(0,f.default)(a).find("enabled").eq(0).text();var l=Math.round((0,f.default)(a).find("positionX").eq(0).text())*this[k].m_iCanvasWidth/this[k].m_iHorizontalResolution;var u=Math.round((0,f.default)(a).find("positionY").eq(0).text())*this[k].m_iCanvasHeight/this[k].m_iVerticalResolution;var h=(0,f.default)(a).find("alignment").eq(0).text()||"0";this[k].addOSDShape(o,s,l,u,{szOSDType:"overlay-ch",szAlignment:h})}if((0,f.default)(n).find("DateTimeOverlay").length>0){var c=(0,f.default)(n).find("DateTimeOverlay").eq(0);var d=(0,f.default)(c).find("enabled").eq(0).text();var p=(0,f.default)(c).find("Type").eq(0).text()||(0,f.default)(c).find("type").eq(0).text();var v=(0,f.default)(c).find("displayWeek").eq(0).text();var y=(0,f.default)(c).find("clockType").eq(0).text();var m="";var g="";var S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var b=new Date;if(v==="true"){g=S[b.getDay()]}if(y==="24hour"){y=""}else{y="AM/PM"}switch(p){case"0":m="YYYY-MM-DD "+g+" hh:mm:ss "+y;break;case"1":m="MM-DD-YYYY "+g+" hh:mm:ss "+y;break;case"2":m="CHR-YYYY-MM-DD "+g+" hh:mm:ss "+y;break;case"3":m="CHR-MM-DD-YYYY "+g+" hh:mm:ss "+y;break;case"4":m="DD-MM-YYYY "+g+" hh:mm:ss "+y;break;case"5":m="CHR-DD-MM-YYYY "+g+" hh:mm:ss "+y;break;default:break}var w=Math.round((0,f.default)(c).find("positionX").eq(0).text())*this[k].m_iCanvasWidth/this[k].m_iHorizontalResolution;var _=Math.round((0,f.default)(c).find("positionY").eq(0).text())*this[k].m_iCanvasHeight/this[k].m_iVerticalResolution;var P=(0,f.default)(c).find("alignment").eq(0).text()||"0";this[k].addOSDShape(m,d,w,_,{szOSDType:"overlay-date",szDateStyle:p,szDisplayWeek:v,szClockType:y,szAlignment:P})}if((0,f.default)(n).find("TextOverlayList").length>0){(0,f.default)(n).find("TextOverlayList").eq(0).find("TextOverlay").each(function(){var t=(0,f.default)(this).find("displayText").eq(0).text();var i=(0,f.default)(this).find("enabled").eq(0).text();var n=(0,f.default)(this).find("id").eq(0).text();var r=Math.round((0,f.default)(this).find("positionX").eq(0).text())*e[k].m_iCanvasWidth/e[k].m_iHorizontalResolution;var a=Math.round((0,f.default)(this).find("positionY").eq(0).text())*e[k].m_iCanvasHeight/e[k].m_iVerticalResolution;var o=(0,f.default)(this).find("alignment").eq(0).text()||"0";e[k].addOSDShape(t,i,r,a,{szOSDType:"overlay-text",szId:n,szAlignment:o})})}}return 0}},{key:"JS_ClearSnapInfo",value:function e(t){if(!this[k]){return-1}if(t===0){this[k].clearShapeByType("Rect")}else if(t===1){this[k].clearShapeByType("Polygon")}else if(t===2){this[k].clearShapeByType("Line")}else if(t===3){this[k].clearShapeByType("Rect");this[k].clearShapeByType("Polygon")}else if(t===5){this[k].clearShapeByType("Point")}else{this[k].clearAllShape()}return 0}},{key:"JS_ClearTargetPolygon",value:function e(t){var i=r.oTool.parseXmlFromStr(t);var n=this[k].getAllShapesInfo();var a=n.length;if(a>0){for(var o=0;o<a;o++){var s=(0,f.default)(i).find("id").eq(0).text();if(n[o].szType==="Polygon"){if(n[o].szId===s){this[k].deleteShape(o);break}}}}}},{key:"JS_SetSnapPolygonInfo",value:function t(i){this[k].setShapeType("Polygon");this[k].setMaxShapeSupport(20);this[k].setDrawStyle("#FFFF00","#FFFF00",.1);var n=r.oTool.parseXmlFromStr(i);var a=this[k].getAllShapesInfo();var o=a.length;if(o>0){for(var s=0;s<o;s++){var l=(0,f.default)(n).find("id").eq(0).text();if(a[s].szType==="Polygon"){if(a[s].szId===l){this[k].deleteShape(s);break}}}}var u=[];if((0,f.default)(n).find("SnapPolygonList").length>0){(0,f.default)(n).find("SnapPolygonList").eq(0).find("SnapPolygon").each(function(){var t=(0,f.default)(this).find("id").eq(0).text();var i=parseInt((0,f.default)(this).find("polygonType").eq(0).text()||"1",10);var n=(0,f.default)(this).find("Tips").eq(0).text()||(0,f.default)(this).find("tips").eq(0).text();var r=parseInt((0,f.default)(this).find("MinClosed").eq(0).text(),10);var a=parseInt((0,f.default)(this).find("PointNumMax").eq(0).text(),10);var o=parseInt((0,f.default)(this).find("EditType").eq(0).text(),10)||0;var s=(0,f.default)(this).find("isClosed").eq(0).text()==="true";var l="rgb("+(0,f.default)(this).find("r").eq(0).text()+","+(0,f.default)(this).find("g").eq(0).text()+","+(0,f.default)(this).find("b").eq(0).text()+")";var h=l;var c=.1;var d=parseInt((0,f.default)(this).find("RedrawMode").eq(0).text(),10)||0;var p=[];(0,f.default)(this).find("pointList").eq(0).find("point").each(function(t){p[t]=[];p[t][0]=Math.round((0,f.default)(this).find("x").eq(0).text()*e[k].m_iCanvasWidth);p[t][1]=Math.round((0,f.default)(this).find("y").eq(0).text()*e[k].m_iCanvasHeight)});if(p.length>0){u.push({szId:t,iPolygonType:i,iMinClosed:r,iMaxPointNum:a,iEditType:o,aPoint:p,bClosed:s,szTips:n,szDrawColor:l,szFillColor:h,iTranslucent:c,iRedrawMode:d});e[k].setDrawStatus(false)}else{e[k].setCurrentShapeInfo({szId:t,szTips:n,iMinClosed:r,iMaxPointNum:a,iPolygonType:i,szDrawColor:l,szFillColor:h,iTranslucent:c,iRedrawMode:d});e[k].setDrawStatus(true)}})}if(u.length>0){this[k].setShapesInfoByType("Polygon",u)}return 0}},{key:"JS_GetSnapPolygonInfo",value:function e(){var t="<?xml version='1.0' encoding='utf-8'?><SnapPolygonList>";var i=this[k].getShapesInfoByType("Polygon");for(var n=0,r=i.length;n<r;n++){var a=i[n];t+="<SnapPolygon>";t+="<id>"+a.szId+"</id>";t+="<polygonType>"+a.iPolygonType+"</polygonType>";t+="<color>";var o=a.szDrawColor.substring(4,a.szDrawColor.length-1).split(",");t+="<r>"+o[0]+"</r>";t+="<g>"+o[1]+"</g>";t+="<b>"+o[2]+"</b>";t+="</color>";t+="<tips>"+a.szTips+"</tips>";t+="<isClosed>"+a.bClosed+"</isClosed>";var s=a.aPoint;t+="<pointList>";for(var l=0,u=s.length;l<u;l++){t+="<point><x>"+(s[l][0]/this[k].m_iCanvasWidth).toFixed(6)+"</x><y>"+(s[l][1]/this[k].m_iCanvasHeight).toFixed(6)+"</y></point>"}t+="</pointList>";t+="</SnapPolygon>"}t+="</SnapPolygonList>";return t}},{key:"JS_SetSnapDrawMode",value:function t(i,n){if(!this[k]){return-1}this[k].setDrawMutiShapeOneTime(false);if(i===0&&n===3){e[k].setDrawStatus(false)}return 0}},{key:"JS_SetSnapLineInfo",value:function t(i){this[k].setShapeType("Line");this[k].setMaxShapeSupport(20);this[k].setDrawStyle("#FFFF00","#FFFF00",.1);var n=r.oTool.parseXmlFromStr(i);var a=this[k].getAllShapesInfo();var o=a.length;if(o>0){for(var s=0;s<o;s++){var l=(0,f.default)(n).find("id").eq(0).text();if(a[s].szType==="Line"){if(a[s].szId===l){this[k].deleteShape(s);break}}}}var u=[];if((0,f.default)(n).find("SnapLineList").length>0){(0,f.default)(n).find("SnapLineList").eq(0).find("SnapLine").each(function(){var t=(0,f.default)(this).find("id").eq(0).text();var i=parseInt((0,f.default)(this).find("LineTypeEx").eq(0).text(),10);var n=parseInt((0,f.default)(this).find("CustomType").text()||(0,f.default)(this).find("LineType").text(),10);var r=parseInt((0,f.default)(this).find("ArrowType").text()||0,10);var a=(0,f.default)(this).find("Tips").eq(0).text()||(0,f.default)(this).find("tips").eq(0).text();var o="rgb("+(0,f.default)(this).find("r").eq(0).text()+","+(0,f.default)(this).find("g").eq(0).text()+","+(0,f.default)(this).find("b").eq(0).text()+")";var s=[];s[0]=[];s[1]=[];s[0][0]=Math.round((0,f.default)(this).find("StartPos").eq(0).find("x").eq(0).text()*e[k].m_iCanvasWidth);s[0][1]=Math.round((0,f.default)(this).find("StartPos").eq(0).find("y").eq(0).text()*e[k].m_iCanvasHeight);s[1][0]=Math.round((0,f.default)(this).find("EndPos").eq(0).find("x").eq(0).text()*e[k].m_iCanvasWidth);s[1][1]=Math.round((0,f.default)(this).find("EndPos").eq(0).find("y").eq(0).text()*e[k].m_iCanvasHeight);if(s.length>0){u.push({szId:t,iLineType:i,aPoint:s,szTips:a,iDirection:n,iArrowType:r,szDrawColor:o});e[k].setDrawStatus(false)}})}if(u.length>0){this[k].setShapesInfoByType("Line",u)}return 0}},{key:"JS_GetSnapLineInfo",value:function t(){var i="<?xml version='1.0' encoding='utf-8'?><SnapLineList>";var n=this[k].getShapesInfoByType("Line");for(var r=0,a=n.length;r<a;r++){i+="<SnapLine>";i+="<id>"+n[r].szId+"</id>";i+="<LineTypeEx>"+n[r].iLineType+"</LineTypeEx>";i+="<CustomType>0</CustomType><MoveChange>0</MoveChange><ArrowType>"+n[r].iArrowType+"</ArrowType>";i+="<tips>"+n[r].szTips+"</tips>";var o=n[r].aPoint;i+="<StartPos><x>"+(o[0][0]/e[k].m_iCanvasWidth).toFixed(6)+"</x><y>"+(o[0][1]/e[k].m_iCanvasHeight).toFixed(6)+"</y></StartPos>";i+="<EndPos><x>"+(o[1][0]/e[k].m_iCanvasWidth).toFixed(6)+"</x><y>"+(o[1][1]/e[k].m_iCanvasHeight).toFixed(6)+"</y></EndPos>";i+="<LineSelected>false</LineSelected>";if(n[r].aCrossArrowPoint.length>0){i+="<PDCArrow><Sp_x>"+(n[r].aCrossArrowPoint[0][0]/e[k].m_iCanvasWidth).toFixed(6)+"</Sp_x>";i+="<Sp_y>"+(n[r].aCrossArrowPoint[0][1]/e[k].m_iCanvasWidth).toFixed(6)+"</Sp_y>";i+="<Ep_x>"+(n[r].aCrossArrowPoint[1][0]/e[k].m_iCanvasWidth).toFixed(6)+"</Ep_x>";i+="<Ep_y>"+(n[r].aCrossArrowPoint[1][1]/e[k].m_iCanvasWidth).toFixed(6)+"</Ep_y></PDCArrow>"}i+="<PDCShowMark>false</PDCShowMark>";var s=n[r].szDrawColor.split(",")[0].split("(")[1];var l=n[r].szDrawColor.split(",")[1];var u=n[r].szDrawColor.split(",")[2].split(")")[0];i+="<color><r>"+(s||"255")+"</r><g>"+(l||"255")+"</g><b>"+(u||"0")+"</b></color>";i+="</SnapLine>"}i+="</SnapLineList>";return i}},{key:"JS_GetSnapPointInfo",value:function e(){return""}},{key:"JS_SelectShapeById",value:function e(t,i){if(!t){return-1}this[k].selectShapeById(t,i);return 0}},{key:"JS_DeleteChoosedShape",value:function e(){var t=this[k].getAllShapesInfo();var i=t.length;if(i>0){for(var n=0;n<i;n++){if(t[n].bChoosed){this[k].deleteShape(n);return t[n].szId}}return""}return""}},{key:"JS_SetSnapPointInfo",value:function t(i){var n=r.oTool.parseXmlFromStr(i);if((0,f.default)(n).find("mode").eq(0).text()==="1"){var a=(0,f.default)(n).find("id").eq(0).text();var o="rgb("+(0,f.default)(n).find("r").eq(0).text()+","+(0,f.default)(n).find("g").eq(0).text()+","+(0,f.default)(n).find("b").eq(0).text()+")";this[k].setShapeType("Point");this[k].setDrawStatus(true);this[k].setMaxShapeSupport(12);e[k].setCurrentShapeInfo({szId:a,szDrawColor:o,iTranslucent:1})}else{var s=[];this[k].clearShapeByType("Point");this[k].setMaxShapeSupport(12);this[k].setDrawStatus(false);if((0,f.default)(n).find("SnapPointList").length>0){(0,f.default)(n).find("SnapPointList").eq(0).find("SnapPoint").each(function(){var t=(0,f.default)(this).find("id").eq(0).text();var i="rgb("+(0,f.default)(this).find("r").eq(0).text()+","+(0,f.default)(this).find("g").eq(0).text()+","+(0,f.default)(this).find("b").eq(0).text()+")";var n=[];n[0]=[];n[0][0]=Math.round((0,f.default)(this).find("positionX").eq(0).text()*e[k].m_iCanvasWidth);n[0][1]=Math.round((0,f.default)(this).find("positionY").eq(0).text()*e[k].m_iCanvasHeight);if(n.length>0){s.push({szId:t,aPoint:n,szDrawColor:i,iTranslucent:1})}})}if(s.length>0){this[k].setShapesInfoByType("Point",s)}}return 0}},{key:"JS_FullScreenDisplay",value:function e(t){if(t){var i=_.get(0);if(i.requestFullScreen){i.requestFullScreen()}else if(i.webkitRequestFullScreen){i.webkitRequestFullScreen()}else if(i.mozRequestFullScreen){i.mozRequestFullScreen()}}this[R]=t}},{key:"JS_FullScreenSingle",value:function t(i){if(!e[D][i].bPlay){return}var n=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||false;var r=_.find(".parent-wnd").eq(0).children().eq(i).get(0);if(!n){if(r.requestFullScreen){r.requestFullScreen()}else if(r.webkitRequestFullScreen){r.webkitRequestFullScreen()}else if(r.mozRequestFullScreen){r.mozRequestFullScreen()}e[E]=_.find(".parent-wnd").eq(0).children().eq(i)}else{if(_.find(".parent-wnd").eq(0).width()===(0,f.default)(window).width()){return}if(document.exitFullscreen){document.exitFullscreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}e[E]=null;e[R]=false}}},{key:"JS_StartDownload",value:function e(t,i,n,a){var o=(0,f.default)(r.oTool.parseXmlFromStr(a)).find("playbackURI").eq(0).text();var s=t+"?playbackURI="+o;var l=".mp4";if(t.indexOf("picture/Streaming/tracks")>0){s=t;l=".jpg"}var u=s.indexOf("&name=")+6;var h=s.indexOf("&size=");n=s.substring(u,h);(0,f.default)("body").append('<a id="jsplugin_download_a" href="'+s+'" download='+n+l+'><li id="jsplugin_download_li"></li></a>');(0,f.default)("#jsplugin_download_li").trigger("click");(0,f.default)("#jsplugin_download_a").remove();return 0}},{key:"JS_Resize",value:function t(i,n){var a=this;setTimeout(function(){var t=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||false;if(a[R]&&t){i=(0,f.default)(window).width();n=(0,f.default)(window).height();_.css({width:i,height:n})}else{_.css({width:i,height:n})}a[P].iWidth=i;a[P].iHeight=n;if(r.oTool.isFirefox()){for(var o=0;o<e[P].iMaxSplit*e[P].iMaxSplit;o++){if(e[D][o].oPlayCtrl){e[D][o].oPlayCtrl.PlayM4_ClearCanvas()}}}j();if(e[E]&&t){i=(0,f.default)(window).width();n=(0,f.default)(window).height();e[E].css({width:i,height:n});e[E].find(".play-window").attr("width",i);e[E].find(".play-window").attr("height",n);e[E].find(".draw-window").attr("width",i-2);e[E].find(".draw-window").attr("height",n-2)}if(!t){e[E]=null;e[R]=false}a[k].resizeCanvas();a[k].canvasRedraw()},80)}},{key:"JS_WndCreate",value:function t(i,n,r){N(n,r);this[k].updateCanvas("canvas_draw0");this[k].clearAllShape();if(i===0){_.hide()}else{_.show()}e.EventCallback.windowEventSelect(0);U();e[I]=null}},{key:"JS_ExportDeviceConfig",value:function e(t){(0,f.default)("body").append('<a id="jsplugin_download_a" href="'+t+'"><li id="jsplugin_download_li"></li></a>');(0,f.default)("#jsplugin_download_li").trigger("click");(0,f.default)("#jsplugin_download_a").remove();return 0}},{key:"JS_OpenFileBrowser",value:function t(i,n,r,a,o){e[I]=null;var s=window.document.createElement("input");s.type="file";if(n.toLowerCase()==="bmp"){s.accept="image/bmp";s.style.display="none";(0,f.default)("body").append(s)}if(i===0){s.setAttribute("webkitdirectory","")}s.addEventListener("change",function(){if(i===1){e[I]=s.files[0];r[a]=s.files[0].name;o&&o.$digest(function(){r[a]=s.files[0].name})}else if(i===0){e[I]=s.files}});var l=document.createEvent("MouseEvents");l.initEvent("click",true,true);s.dispatchEvent(l)}},{key:"JS_UploadFile",value:function t(i,n,r,a){var o=0;var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===4){if(s.status!==200){o=-1}}};s.open("put",i,false);s.setRequestHeader("Content-Type",a);s.send(e[I]);return o}},{key:"JS_StartAsynUpload",value:function t(i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){e[z]=n.responseText}};n.open("put",i,true);n.send(e[I]);return 0}},{key:"JS_StopAsynUpload",value:function t(){e[z]=""}},{key:"JS_GetUploadErrorInfo",value:function t(){if(typeof e[z]==="string"&&e[z].length>0){return e[z]}return""}},{key:"JS_StartUpgradeEx",value:function i(n,a){var o=new Promise(function(i,o){if(!n){o();return t}if(!a){o();return t}e[z]=0;var s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===4){if(s.status===200){e[z]=100;i()}else{e[z]=1;var t=r.oTool.parseXmlFromStr(s.responseText);if((0,f.default)(t).find("subStatusCode").text()==="lowPrivilege"){o(403)}else{o()}}}};s.open("put",n,true);s.send(e[I]);e[A]=a;setTimeout(function(){i()},3e3)});return o}},{key:"JS_UpgradeStatus",value:function t(){if(e[z]===100){return 0}return e[z]}},{key:"JS_UpgradeProgress",value:function t(){var i=0;var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){if(n.status===200){i=parseInt((0,f.default)(r.oTool.parseXmlFromStr(n.responseText)).find("percent").text(),10)}}};n.open("get",e[A],false);n.send(null);if(e[z]===100){return 100}return i}},{key:"JS_StopUpgrade",value:function t(){e[I]=null;return 0}},{key:"JS_ExportDeviceLog",value:function e(t,i){i="Log.txt";var n=[];var r=[];n=n.concat((0,f.default)(t).find("searchMatchItem").toArray());for(var a=0;a<n.length;a++){r[a]=[];r[a][0]=(0,f.default)(n[a]).find("logtime").text().replace("T"," ").replace("Z","");r[a][1]=(0,f.default)(n[a]).find("majortype").text();r[a][2]=(0,f.default)(n[a]).find("minortype").text();r[a][3]=(0,f.default)(n[a]).find("channelid").text();r[a][4]=(0,f.default)(n[a]).find("userName").text();r[a][5]=(0,f.default)(n[a]).find("remoteaddress").text()}var o=[];function s(e){o.push(e);var t=e.slice("");if(/^[\u4e00-\u9fa5]/.test(e)){for(var i=0;i<30-t.length*2;i++){o.push(" ")}}else{for(var n=0;n<30-t.length;n++){o.push(" ")}}}s(" ");s((0,f.default)(t).find("laLogTime").text());s((0,f.default)(t).find("laLogMajorType").text());s((0,f.default)(t).find("laLogMinorType").text());s((0,f.default)(t).find("laLogChannel").text());s((0,f.default)(t).find("laLogRemoteUser").text());s((0,f.default)(t).find("laLogRemoteIP").text());o.push("\r\n");for(var l=0;l<r.length;l++){var u=(l+1).toString();s(u);for(var h=0;h<6;h++){s(r[l][h])}o.push("\r\n")}o=o.join("");var c=new Blob([o],{type:"text/plain"});var d=(window.URL||window.webkitURL).createObjectURL(c);var p=window.document.createElement("a");p.href=d;p.download=i;var v=document.createEvent("MouseEvents");v.initEvent("click",true,true);p.dispatchEvent(v)}},{key:"outCsv",value:function e(t,i,n,r){var a="";var o="";for(var s=0;s<n.length;s++){o+=(0,f.default)(t).find(n[s]).eq(0).text()+","}o=o.slice(0,-1);a+=o+"\r\n";for(var l=0;l<r.length;l++){o="";for(var u=0;u<n.length;u++){o+='"'+r[l][u]+'",'}o.slice(0,o.length-1);a+=o+"\r\n"}if(a===""){return}var h="";h+=i;var c="\ufeff";if(window.navigator.msSaveOrOpenBlob){var d=c+a;var p=new Blob([decodeURIComponent(encodeURI(d))],{type:"data:text/csv;charset=utf-8,"});navigator.msSaveBlob(p,h+".csv")}else{c="data:text/csv;charset=utf-8,\ufeff";var v=c+a;var y=encodeURI(v);var m=document.createElement("a");m.setAttribute("href",y);m.setAttribute("download",h+".csv");document.body.appendChild(m);m.click()}}},{key:"JS_ExportReport",value:function e(t,i,n){var r=this;var a=new Promise(function(e){var a=[];var o=[];var s=(0,f.default)(t).find("NameList").text().split(",");a=a.concat((0,f.default)(t).find("tDataItem").toArray());for(var l=0;l<a.length;l++){o[l]=[];for(var u=0;u<s.length;u++){o[l][u]=(0,f.default)(a[l]).find(s[u]).text();if(s[u]==="logtime"){o[l][u]=o[l][u].replace("T"," ").replace("Z","")}}}var h=[];if(n===1){r.outCsv(t,i,s,o)}else{var c=function e(t){h.push(t);var i=t.slice("");if(/^[\u4e00-\u9fa5]/.test(t)){for(var n=0;n<30-i.length*2;n++){h.push(" ")}}else{for(var r=0;r<30-i.length;r++){h.push(" ")}}};c(" ");for(var d=0;d<s.length;d++){c((0,f.default)(t).find(s[d]).eq(0).text())}h.push("\r\n");for(var p=0;p<o.length;p++){var v=(p+1).toString();c(v);for(var y=0;y<s.length;y++){c(o[p][y])}h.push("\r\n")}h=h.join("");var m=void 0;m=new Blob([h],{type:"text/plain"});var g=(window.URL||window.webkitURL).createObjectURL(m);var S=window.document.createElement("a");S.href=g;S.download=i;var b=document.createEvent("MouseEvents");b.initEvent("click",true,true);S.dispatchEvent(b)}e()});return a}},{key:"JS_GetWndContainer",value:function e(t){if(t<0||typeof t==="undefined"||t===null){return-1}return _.find(".parent-wnd").eq(0).children().eq(t)[0]}},{key:"JS_GetWndStatus",value:function e(t){if(t<0||typeof t==="undefined"||t===null){return-1}var i={bPlay:this[D][t].bPlay,bSound:this[x]===t,bSelect:this[D][t].bSelect,iRate:this[D][t].iRate};return i}},{key:"JS_SelectWnd",value:function e(t){_.find(".parent-wnd").eq(0).children().eq(t).mousedown()}},{key:"JS_PlayWithImg",value:function e(t){if(this[P].iType!==1){return}var i=(0,f.default)("#canvas0");var n=(0,f.default)("#canvas0").width();var r=(0,f.default)("#canvas0").height();i.hide();var a=(0,f.default)("#playImg0");a.show();a.css({width:n+"px",height:r+"px",border:"1px solid "+this[P].oStyle.border});a.attr("src",t)}},{key:"JS_SetCanFullScreen",value:function e(t){this[L]=t}},{key:"JS_OpenPlayerSDKPrintLog",value:function t(i){e[D][i].oPlayCtrl.OpenPlayerSDKPrintLog()}},{key:"JS_DownloadYUVdata",value:function t(i){e[D][i].oPlayCtrl.DownloadYUVdata()}},{key:"JS_DownloadPCMdata",value:function t(i){e[D][i].oPlayCtrl.DownloadPCMdata()}}]);return a}();return J}();t.JSPlugin=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StreamClient=undefined;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=i(1);var a=f(r);var o=i(10);var s=i(11);var l=i(12);var u=i(15);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){var e=Symbol("WEBSOCKET");var t=Symbol("GETINDEX");var i=Symbol("PROTOCOLVERSION");var r=Symbol("CIPHERSUITES");var f=new o.DirectDeviceCustom;var c=new s.DirectDevice;var d=new l.LiveMedia;var p=new u.LocalService;var v=function(){function o(){h(this,o);this[i]="0.1";this[r]=0;this[e]=[];this.ERRORS={};this[t]=function(t){var i=-1;for(var n=0,r=this[e].length;n<r;n++){if(this[e][n].id===t){i=n;break}}return i}}n(o,[{key:"openStream",value:function n(o,s,l,u){var h=false;if(o.indexOf("[")>-1){h=true}var v=this;var y=o.split("://");var m=y[0];var g="";var S=7681;var b=1;var w=0;var _=false;if(h){g=y[1].split("]:")[0]+"]";S=Math.floor(y[1].split("]:")[1].split("/")[0]);b=Math.floor(y[1].split("]:")[1].split("/")[1]/100);w=Math.floor(y[1].split("]:")[1].split("/")[1]%100)-1}else{g=y[1].split(":")[0];S=Math.floor(y[1].split(":")[1].split("/")[0]);b=Math.floor(y[1].split(":")[1].split("/")[1]/100);w=Math.floor(y[1].split(":")[1].split("/")[1]%100)-1;var P=y[1].split(":")[1].split("/")[2];if(P!==""&&P==="webSocketVideoCtrlProxy"){_=true}}if(b===0){w=0}s=s||{};var C="&sessionID=";if(s.token&&!s.playURL){C="&token="}var x=s.sessionID||s.session||(s.playURL?"":s.token)||"";var T=new window.WebSocket(m+"://"+g+":"+S+(s.mode?"/"+s.mode:"")+(_?"/webSocketVideoCtrlProxy":"")+"?version="+v[i]+"&cipherSuites="+v[r]+C+x+(s.proxy?"&proxy="+s.proxy:""));T.binaryType="arraybuffer";var D=a.default.v4();var k=-1;var M=new Promise(function(n,a){T.onopen=function(){if(!s.playURL&&!s.sessionID&&!s.deviceSerial&&!s.token){v[e].push(f.createClientObject(T,D,b,w));n(D)}};T.onmessage=function(o){if(typeof o.data==="string"){var u=JSON.parse(o.data);var f=v[t](D);if(u&&u.version&&u.cipherSuite){v[i]=u.version;v[r]=parseInt(u.cipherSuite,10);if(u&&u.PKD&&u.rand){v[e].push(d.createClientObject(T,D,u.PKD,u.rand,s))}else{var h="live://"+g+":"+S+"/"+b+"/"+w;if(v[r]===-1){v[e].push(p.createClientObject(T,D,h,s))}else{v[e].push(c.createClientObject(T,D,h))}}n(D);return}if(u&&u.sdp){var y=c.getMediaFromSdp(u.sdp);l({bHead:true,buf:y})}if(u&&u.cmd){if(u.cmd==="end"){l({type:"exception",cmd:u.cmd})}}if(u&&u.statusString){if(u.statusString.toLowerCase()==="ok"){if(v[e][f].resolve){v[e][f].resolve(u)}}if(u.statusString.toLowerCase()!=="ok"){var m=c.getError(u);if(f>-1){if(v[e][f].reject){v[e][f].reject(m)}}else{a(m)}}}}else{var _={};var P=new Uint8Array(o.data);k++;if(P.byteLength===64||P.byteLength===40){var C=-1;var x=P.byteLength;for(var M=0;M<x;M++){if(P[M]===73&&P[M+1]===77&&P[M+2]===75&&P[M+3]===72){C=M;break}}if(C!==-1){var R=P.slice(C,C+40);_={bHead:true,buf:R}}else{_={bHead:false,buf:P}}l(_)}else{if(k>0){_={bHead:false,buf:P};l(_)}}P=null;_=null;o=null}};T.onclose=function(){for(var t=0,i=v[e].length;t<i;t++){if(v[e][t].id===D){v[e][t].resolve();v[e].splice(t,1);setTimeout(function(){u()},200);break}}a()}});return M}},{key:"startPlay",value:function n(a,o,s){var l=this;var u=this[t](a);if(o&&s&&l[i]==="0.1"){o=o.replace(/-/g,"").replace(/:/g,"");s=s.replace(/-/g,"").replace(/:/g,"")}var h=new Promise(function(t,n){if(u>-1){l[e][u].resolve=t;l[e][u].reject=n;var a=null;if(!o||!s){if(l[e][u].iCurChannel===0&&l[i]==="0.1"){a=f.zeroPlayCmd(l[e][u].iCurChannel,l[e][u].iCurStream)}else{if(l[i]!=="0.1"){if(l[r]===0){a=d.playCmd(l[e][u])}else if(l[r]===1){a=c.playCmd(l[e][u].playURL)}else if(l[r]===-1){a=p.playCmd(l[e][u])}}else{a=f.playCmd(l[e][u].iCurChannel,l[e][u].iCurStream)}}}else{if(l[i]!=="0.1"){if(l[r]===0){a=d.playbackCmd(l[e][u],o,s)}else if(l[r]===1){a=c.playbackCmd(o,s,l[e][u].playURL)}else if(l[r]===-1){a=p.playbackCmd(l[e][u],o,s)}}else{a=f.playbackCmd(o,s,l[e][u].iCurChannel,l[e][u].iCurStream)}}l[e][u].socket.send(a);if(l[i]==="0.1"){t()}}else{if(l[i]==="0.1"){n()}}});return h}},{key:"singleFrame",value:function e(){}},{key:"setPlayRate",value:function t(n,r){var a=this;var o=new Promise(function(t,o){for(var s=0,l=a[e].length;s<l;s++){if(a[e][s].id===n){if(a[i]==="0.1"){var u=f.playRateCmd(r);a[e][s].socket.send(u);t();break}else{a[e][s].resolve=t;a[e][s].reject=o;var h=c.playRateCmd(r);a[e][s].socket.send(h)}}}});return o}},{key:"seek",value:function t(i,n,r){var a=this;var o=new Promise(function(t,o){for(var s=0,l=a[e].length;s<l;s++){if(a[e][s].id===i){a[e][s].resolve=t;a[e][s].reject=o;var u=d.seekCmd(n,r);a[e][s].socket.send(u)}}});return o}},{key:"pause",value:function t(n){var r=this;var a=new Promise(function(t,a){for(var o=0,s=r[e].length;o<s;o++){if(r[e][o].id===n){if(r[i]==="0.1"){var l=f.pauseCmd();r[e][o].socket.send(l);t();break}else{r[e][o].resolve=t;r[e][o].reject=a;var u=c.pauseCmd();r[e][o].socket.send(u)}}}});return a}},{key:"transmission",value:function t(i,n){var r=this;var a=new Promise(function(t,a){for(var o=0,s=r[e].length;o<s;o++){if(r[e][o].id===i){r[e][o].resolve=t;r[e][o].reject=a;r[e][o].socket.send(n)}}});return a}},{key:"resume",value:function t(n){var r=this;var a=new Promise(function(t,a){for(var o=0,s=r[e].length;o<s;o++){if(r[e][o].id===n){if(r[i]==="0.1"){var l=f.resumeCmd();r[e][o].socket.send(l);t();break}else{r[e][o].resolve=t;r[e][o].reject=a;var u=c.resumeCmd();r[e][o].socket.send(u)}}}});return a}},{key:"stop",value:function t(i){var n=this;var r=new Promise(function(t,r){if(!i){r()}else{var a=-1;for(var o=0,s=n[e].length;o<s;o++){if(n[e][o].id===i){a=o;n[e][o].resolve=t;n[e][o].socket.close(1e3,"CLOSE");break}}if(a===-1){r()}}});return r}},{key:"stopAll",value:function t(){var i=this;for(var n=0,r=i[e].length;n<r;n++){i[e][n].socket.close(1e3,"CLOSE")}}}]);return o}();return v}();t.StreamClient=c},function(e,t,i){var n=i(2);var r=i(3);var a;var o;var s=0;var l=0;function u(e,t,i){var u=t&&i||0;var f=t||[];e=e||{};var h=e.node||a;var c=e.clockseq!==undefined?e.clockseq:o;if(h==null||c==null){var d=n();if(h==null){h=a=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]}if(c==null){c=o=(d[6]<<8|d[7])&16383}}var p=e.msecs!==undefined?e.msecs:(new Date).getTime();var v=e.nsecs!==undefined?e.nsecs:l+1;var y=p-s+(v-l)/1e4;if(y<0&&e.clockseq===undefined){c=c+1&16383}if((y<0||p>s)&&e.nsecs===undefined){v=0}if(v>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}s=p;l=v;o=c;p+=122192928e5;var m=((p&268435455)*1e4+v)%4294967296;f[u++]=m>>>24&255;f[u++]=m>>>16&255;f[u++]=m>>>8&255;f[u++]=m&255;var g=p/4294967296*1e4&268435455;f[u++]=g>>>8&255;f[u++]=g&255;f[u++]=g>>>24&15|16;f[u++]=g>>>16&255;f[u++]=c>>>8|128;f[u++]=c&255;for(var S=0;S<6;++S){f[u+S]=h[S]}return t?t:r(f)}e.exports=u},function(e,t,i){var n=i(2);var r=i(3);function a(e,t,i){var a=t&&i||0;if(typeof e=="string"){t=e==="binary"?new Array(16):null;e=null}e=e||{};var o=e.random||(e.rng||n)();o[6]=o[6]&15|64;o[8]=o[8]&63|128;if(t){for(var s=0;s<16;++s){t[a+s]=o[s]}}return t||r(o)}e.exports=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){var e=function(){function e(){r(this,e)}n(e,[{key:"createClientObject",value:function e(t,i,n,r){return{socket:t,id:i,iCurChannel:n,iCurStream:r,resolve:null,reject:null}}},{key:"zeroPlayCmd",value:function e(t,i){var n=[0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t+1,0,0,0,i,0,0,4,0];return new Uint8Array(n)}},{key:"playCmd",value:function e(t,i){var n=[0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t,0,0,0,i,0,0,4,0];return new Uint8Array(n)}},{key:"playbackCmd",value:function e(t,i,n,r){var a=t.split("T")[0];var o=t.split("T")[1];var s="0"+parseInt(a.substring(0,4),10).toString(16);var l=parseInt(a.substring(4,6),10);var u=parseInt(a.substring(6),10);var f=parseInt(o.substring(0,2),10);var h=parseInt(o.substring(2,4),10);var c=parseInt(o.substring(4,6),10);var d=i.split("T")[0];var p=i.split("T")[1];var v="0"+parseInt(d.substring(0,4),10).toString(16);var y=parseInt(d.substring(4,6),10);var m=parseInt(p.substring(0,2),10);var g=parseInt(p.substring(2,4),10);var S=parseInt(p.substring(4,6),10);var b=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n,0,0,parseInt(s.substring(0,2),16),parseInt(s.substring(2,4),16),0,0,0,l,0,0,0,u,0,0,0,f,0,0,0,h,0,0,0,c,0,0,parseInt(v.substring(0,2),16),parseInt(v.substring(2,4),16),0,0,0,y,0,0,0,u,0,0,0,m,0,0,0,g,0,0,0,S,0,0,0,0,0,0,0,0,r,0,0,0];return new Uint8Array(b)}},{key:"playRateCmd",value:function e(t){var i=(parseInt(t,10)>>>0).toString(16).toLocaleUpperCase().toString(16);for(var n=i.length;n<8;n++){i="0"+i}var r=[0,0,0,0];for(var a=0,o=i.length;a<o;a=a+2){r[Math.floor(a/2)]=parseInt(i.substring(a,a+2),16)}var s=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r[0],r[1],r[2],r[3]];return new Uint8Array(s)}},{key:"pauseCmd",value:function e(){var t=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(t)}},{key:"resumeCmd",value:function e(){var t=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(t)}}]);return e}();return e}();t.DirectDeviceCustom=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=3001;var o=3002;var s=3003;var l=function(){var e=function(){function e(){r(this,e)}n(e,[{key:"createClientObject",value:function e(t,i,n){return{socket:t,id:i,playURL:n,resolve:null,reject:null}}},{key:"getMediaFromSdp",value:function e(t){var i=t.indexOf("MEDIAINFO=")+10;var n=t.slice(i,i+80);var r=[];for(var a=0,o=n.length/2;a<o;a++){r[a]=parseInt(n.slice(a*2,a*2+2),16)}return new Uint8Array(r)}},{key:"playCmd",value:function e(t){var i={sequence:0,cmd:"realplay",url:t};return JSON.stringify(i)}},{key:"playbackCmd",value:function e(t,i,n){var r={sequence:0,cmd:"playback",url:n,startTime:t,endTime:i};return JSON.stringify(r)}},{key:"playRateCmd",value:function e(t){var i={sequence:0,cmd:"speed",rate:t};return JSON.stringify(i)}},{key:"pauseCmd",value:function e(){var t={sequence:0,cmd:"pause"};return JSON.stringify(t)}},{key:"resumeCmd",value:function e(){var t={sequence:0,cmd:"resume"};return JSON.stringify(t)}},{key:"getError",value:function e(t){var i=a;if(t){if(parseInt(t.statusCode,10)===6&&t.subStatusCode==="streamLimit"){i=o}else if(parseInt(t.statusCode,10)===4&&t.subStatusCode==="badAuthorization"){i=s}}return{iErrorNum:i,oError:t}}}]);return e}();return e}();t.DirectDevice=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LiveMedia=undefined;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=i(13);var a=l(r);var o=i(14);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){var e=function(){function e(){u(this,e)}n(e,[{key:"createClientObject",value:function e(t,i,n,r,a){var o=s.default.AES.encrypt((new Date).getTime().toString(),s.default.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:s.default.mode.CBC,iv:s.default.enc.Hex.parse("12345678912345671234567891234567"),padding:s.default.pad.Pkcs7}).ciphertext.toString();if(o.length<64){o=o+o}var l=s.default.AES.encrypt((new Date).getTime().toString(),s.default.enc.Hex.parse("12345678912345671234567891234567"),{mode:s.default.mode.CBC,iv:s.default.enc.Hex.parse("12345678912345671234567891234567"),padding:s.default.pad.Pkcs7}).ciphertext.toString();return{socket:t,id:i,PKD:n,rand:r,playURL:a.playURL||"",auth:a.auth||"",token:a.token||"",key:o,iv:l,resolve:null,reject:null}}},{key:"playCmd",value:function e(t){var i={sequence:0,cmd:"realplay",url:t.playURL,key:a.default.encrypt(t.iv+":"+t.key,t.PKD).cipher.split("?")[0],authorization:s.default.AES.encrypt(t.rand+":"+t.auth,s.default.enc.Hex.parse(t.key),{mode:s.default.mode.CBC,iv:s.default.enc.Hex.parse(t.iv),padding:s.default.pad.Pkcs7}).ciphertext.toString(),token:s.default.AES.encrypt(t.token,s.default.enc.Hex.parse(t.key),{mode:s.default.mode.CBC,iv:s.default.enc.Hex.parse(t.iv),padding:s.default.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(i)}},{key:"playbackCmd",value:function e(t,i,n){var r={sequence:0,cmd:"playback",url:t.playURL,key:a.default.encrypt(t.iv+":"+t.key,t.PKD).cipher.split("?")[0],authorization:s.default.AES.encrypt(t.rand+":"+t.auth,s.default.enc.Hex.parse(t.key),{mode:s.default.mode.CBC,iv:s.default.enc.Hex.parse(t.iv),padding:s.default.pad.Pkcs7}).ciphertext.toString(),token:s.default.AES.encrypt(t.token,s.default.enc.Hex.parse(t.key),{mode:s.default.mode.CBC,iv:s.default.enc.Hex.parse(t.iv),padding:s.default.pad.Pkcs7}).ciphertext.toString(),startTime:i,endTime:n};return JSON.stringify(r)}},{key:"seekCmd",value:function e(t,i){var n={sequence:0,cmd:"seek",startTime:t,endTime:i};return JSON.stringify(n)}}]);return e}();return e}();t.LiveMedia=f},function(e,t,n){"use strict";var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a={appName:"Netscape",appVersion:40};var o,s=0xdeadbeefcafe,l=(s&16777215)==15715070;function u(e,t,i){e!=null&&("number"==typeof e?this.fromNumber(e,t,i):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function f(){return new u(null)}function h(e,t,i,n,r,a){for(;--a>=0;){var o=t*this[e++]+i[n]+r,r=Math.floor(o/67108864);i[n++]=o&67108863}return r}function c(e,t,i,n,r,a){var o=t&32767;for(t>>=15;--a>=0;){var s=this[e]&32767,l=this[e++]>>15,u=t*s+l*o,s=o*s+((u&32767)<<15)+i[n]+(r&1073741823),r=(s>>>30)+(u>>>15)+t*l+(r>>>30);i[n++]=s&1073741823}return r}function d(e,t,i,n,r,a){var o=t&16383;for(t>>=14;--a>=0;){var s=this[e]&16383,l=this[e++]>>14,u=t*s+l*o,s=o*s+((u&16383)<<14)+i[n]+r,r=(s>>28)+(u>>14)+t*l;i[n++]=s&268435455}return r}l&&a.appName=="Microsoft Internet Explorer"?(u.prototype.am=c,o=30):l&&a.appName!="Netscape"?(u.prototype.am=h,o=26):(u.prototype.am=d,o=28);u.prototype.DB=o;u.prototype.DM=(1<<o)-1;u.prototype.DV=1<<o;var p=52;u.prototype.FV=Math.pow(2,p);u.prototype.F1=p-o;u.prototype.F2=2*o-p;var y="0123456789abcdefghijklmnopqrstuvwxyz",m=[],g,S;g="0".charCodeAt(0);for(S=0;S<=9;++S){m[g++]=S}g="a".charCodeAt(0);for(S=10;S<36;++S){m[g++]=S}g="A".charCodeAt(0);for(S=10;S<36;++S){m[g++]=S}function b(e){return y.charAt(e)}function w(e,t){var i=m[e.charCodeAt(t)];return i==null?-1:i}function _(e){for(var t=this.t-1;t>=0;--t){e[t]=this[t]}e.t=this.t;e.s=this.s}function P(e){this.t=1;this.s=e<0?-1:0;e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function C(e){var t=f();t.fromInt(e);return t}function x(e,t){var i;if(t==16)i=4;else if(t==8)i=3;else if(t==256)i=8;else if(t==2)i=1;else if(t==32)i=5;else if(t==4)i=2;else{this.fromRadix(e,t);return}this.s=this.t=0;for(var n=e.length,r=!1,a=0;--n>=0;){var o=i==8?e[n]&255:w(e,n);o<0?e.charAt(n)=="-"&&(r=!0):(r=!1,a==0?this[this.t++]=o:a+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,a+=i,a>=this.DB&&(a-=this.DB))}if(i==8&&(e[0]&128)!=0)this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a);this.clamp();r&&u.ZERO.subTo(this,this)}function T(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;){--this.t}}function D(e){if(this.s<0)return"-"+this.negate().toString(e);if(e==16)e=4;else if(e==8)e=3;else if(e==2)e=1;else if(e==32)e=5;else if(e==64)e=6;else if(e==4)e=2;else return this.toRadix(e);var t=(1<<e)-1,i,n=!1,r="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0){if(o<this.DB&&(i=this[a]>>o)>0)n=!0,r=b(i);for(;a>=0;){o<e?(i=(this[a]&(1<<o)-1)<<e-o,i|=this[--a]>>(o+=this.DB-e)):(i=this[a]>>(o-=e)&t,o<=0&&(o+=this.DB,--a)),i>0&&(n=!0),n&&(r+=b(i))}}return n?r:"0"}function k(){var e=f();u.ZERO.subTo(this,e);return e}function M(){return this.s<0?this.negate():this}function R(e){var t=this.s-e.s;if(t!=0)return t;var i=this.t,t=i-e.t;if(t!=0)return t;for(;--i>=0;){if((t=this[i]-e[i])!=0)return t}return 0}function E(e){var t=1,i;if((i=e>>>16)!=0)e=i,t+=16;if((i=e>>8)!=0)e=i,t+=8;if((i=e>>4)!=0)e=i,t+=4;if((i=e>>2)!=0)e=i,t+=2;e>>1!=0&&(t+=1);return t}function I(){return this.t<=0?0:this.DB*(this.t-1)+E(this[this.t-1]^this.s&this.DM)}function z(e,t){var i;for(i=this.t-1;i>=0;--i){t[i+e]=this[i]}for(i=e-1;i>=0;--i){t[i]=0}t.t=this.t+e;t.s=this.s}function A(e,t){for(var i=e;i<this.t;++i){t[i-e]=this[i]}t.t=Math.max(this.t-e,0);t.s=this.s}function O(e,t){var i=e%this.DB,n=this.DB-i,r=(1<<n)-1,a=Math.floor(e/this.DB),o=this.s<<i&this.DM,s;for(s=this.t-1;s>=0;--s){t[s+a+1]=this[s]>>n|o,o=(this[s]&r)<<i}for(s=a-1;s>=0;--s){t[s]=0}t[a]=o;t.t=this.t+a+1;t.s=this.s;t.clamp()}function B(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,r=this.DB-n,a=(1<<n)-1;t[0]=this[i]>>n;for(var o=i+1;o<this.t;++o){t[o-i-1]|=(this[o]&a)<<r,t[o-i]=this[o]>>n}n>0&&(t[this.t-i-1]|=(this.s&a)<<r);t.t=this.t-i;t.clamp()}}function F(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;){n+=this[i]-e[i],t[i++]=n&this.DM,n>>=this.DB}if(e.t<this.t){for(n-=e.s;i<this.t;){n+=this[i],t[i++]=n&this.DM,n>>=this.DB}n+=this.s}else{for(n+=this.s;i<e.t;){n-=e[i],t[i++]=n&this.DM,n>>=this.DB}n-=e.s}t.s=n<0?-1:0;n<-1?t[i++]=this.DV+n:n>0&&(t[i++]=n);t.t=i;t.clamp()}function L(e,t){var i=this.abs(),n=e.abs(),r=i.t;for(t.t=r+n.t;--r>=0;){t[r]=0}for(r=0;r<n.t;++r){t[r+i.t]=i.am(0,n[r],t,r,0,i.t)}t.s=0;t.clamp();this.s!=e.s&&u.ZERO.subTo(t,t)}function q(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;){e[i]=0}for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);if((e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV)e[i+t.t]-=t.DV,e[i+t.t+1]=1}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1));e.s=0;e.clamp()}function N(e,t,i){var n=e.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)t!=null&&t.fromInt(0),i!=null&&this.copyTo(i);else{i==null&&(i=f());var a=f(),o=this.s,e=e.s,s=this.DB-E(n[n.t-1]);s>0?(n.lShiftTo(s,a),r.lShiftTo(s,i)):(n.copyTo(a),r.copyTo(i));n=a.t;r=a[n-1];if(r!=0){var l=r*(1<<this.F1)+(n>1?a[n-2]>>this.F2:0),h=this.FV/l,l=(1<<this.F1)/l,c=1<<this.F2,d=i.t,p=d-n,v=t==null?f():t;a.dlShiftTo(p,v);i.compareTo(v)>=0&&(i[i.t++]=1,i.subTo(v,i));u.ONE.dlShiftTo(n,v);for(v.subTo(a,a);a.t<n;){a[a.t++]=0}for(;--p>=0;){var y=i[--d]==r?this.DM:Math.floor(i[d]*h+(i[d-1]+c)*l);if((i[d]+=a.am(0,y,i,p,0,n))<y){a.dlShiftTo(p,v);for(i.subTo(v,i);i[d]<--y;){i.subTo(v,i)}}}t!=null&&(i.drShiftTo(n,t),o!=e&&u.ZERO.subTo(t,t));i.t=n;i.clamp();s>0&&i.rShiftTo(s,i);o<0&&u.ZERO.subTo(i,i)}}}}function H(e){var t=f();this.abs().divRemTo(e,null,t);this.s<0&&t.compareTo(u.ZERO)>0&&e.subTo(t,t);return t}function W(e){this.m=e}function U(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function j(e){return e}function G(e){e.divRemTo(this.m,null,e)}function V(e,t,i){e.multiplyTo(t,i);this.reduce(i)}function J(e,t){e.squareTo(t);this.reduce(t)}W.prototype.convert=U;W.prototype.revert=j;W.prototype.reduce=G;W.prototype.mulTo=V;W.prototype.sqrTo=J;function Y(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3,t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV;return t>0?this.DV-t:-t}function X(e){this.m=e;this.mp=e.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<e.DB-15)-1;this.mt2=2*e.t}function K(e){var t=f();e.abs().dlShiftTo(this.m.t,t);t.divRemTo(this.m,null,t);e.s<0&&t.compareTo(u.ZERO)>0&&this.m.subTo(t,t);return t}function $(e){var t=f();e.copyTo(t);this.reduce(t);return t}function Z(e){for(;e.t<=this.mt2;){e[e.t++]=0}for(var t=0;t<this.m.t;++t){var i=e[t]&32767,n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM,i=t+this.m.t;for(e[i]+=this.m.am(0,n,e,t,0,this.m.t);e[i]>=e.DV;){e[i]-=e.DV,e[++i]++}}e.clamp();e.drShiftTo(this.m.t,e);e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Q(e,t){e.squareTo(t);this.reduce(t)}function ee(e,t,i){e.multiplyTo(t,i);this.reduce(i)}X.prototype.convert=K;X.prototype.revert=$;X.prototype.reduce=Z;X.prototype.mulTo=ee;X.prototype.sqrTo=Q;function te(){return(this.t>0?this[0]&1:this.s)==0}function ie(e,t){if(e>4294967295||e<1)return u.ONE;var i=f(),n=f(),r=t.convert(this),a=E(e)-1;for(r.copyTo(i);--a>=0;){if(t.sqrTo(i,n),(e&1<<a)>0)t.mulTo(n,r,i);else var o=i,i=n,n=o}return t.revert(i)}function ne(e,t){var i;i=e<256||t.isEven()?new W(t):new X(t);return this.exp(e,i)}u.prototype.copyTo=_;u.prototype.fromInt=P;u.prototype.fromString=x;u.prototype.clamp=T;u.prototype.dlShiftTo=z;u.prototype.drShiftTo=A;u.prototype.lShiftTo=O;u.prototype.rShiftTo=B;u.prototype.subTo=F;u.prototype.multiplyTo=L;u.prototype.squareTo=q;u.prototype.divRemTo=N;u.prototype.invDigit=Y;u.prototype.isEven=te;u.prototype.exp=ie;u.prototype.toString=D;u.prototype.negate=k;u.prototype.abs=M;u.prototype.compareTo=R;u.prototype.bitLength=I;u.prototype.mod=H;u.prototype.modPowInt=ne;u.ZERO=C(0);u.ONE=C(1);function re(){var e=f();this.copyTo(e);return e}function ae(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else{if(this.t==0)return-1}}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function oe(){return this.t==0?this.s:this[0]<<24>>24}function se(){return this.t==0?this.s:this[0]<<16>>16}function le(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ue(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function fe(e){e==null&&(e=10);if(this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),t=Math.pow(e,t),i=C(t),n=f(),r=f(),a="";for(this.divRemTo(i,n,r);n.signum()>0;){a=(t+r.intValue()).toString(e).substr(1)+a,n.divRemTo(i,n,r)}return r.intValue().toString(e)+a}function he(e,t){this.fromInt(0);t==null&&(t=10);for(var i=this.chunkSize(t),n=Math.pow(t,i),r=!1,a=0,o=0,s=0;s<e.length;++s){var l=w(e,s);l<0?e.charAt(s)=="-"&&this.signum()==0&&(r=!0):(o=t*o+l,++a>=i&&(this.dMultiply(n),this.dAddOffset(o,0),o=a=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0));r&&u.ZERO.subTo(this,this)}function ce(e,t,i){if("number"==typeof t){if(e<2)this.fromInt(1);else{this.fromNumber(e,i);this.testBit(e-1)||this.bitwiseTo(u.ONE.shiftLeft(e-1),be,this);for(this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);){this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(u.ONE.shiftLeft(e-1),this)}}}else{var i=[],n=e&7;i.length=(e>>3)+1;t.nextBytes(i);n>0?i[0]&=(1<<n)-1:i[0]=0;this.fromString(i,256)}}function de(){var e=this.t,t=[];t[0]=this.s;var i=this.DB-e*this.DB%8,n,r=0;if(e-- >0){if(i<this.DB&&(n=this[e]>>i)!=(this.s&this.DM)>>i)t[r++]=n|this.s<<this.DB-i;for(;e>=0;){if(i<8?(n=(this[e]&(1<<i)-1)<<8-i,n|=this[--e]>>(i+=this.DB-8)):(n=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),(n&128)!=0&&(n|=-256),r==0&&(this.s&128)!=(n&128)&&++r,r>0||n!=this.s)t[r++]=n}}return t}function pe(e){return this.compareTo(e)==0}function ve(e){return this.compareTo(e)<0?this:e}function ye(e){return this.compareTo(e)>0?this:e}function me(e,t,i){var n,r,a=Math.min(e.t,this.t);for(n=0;n<a;++n){i[n]=t(this[n],e[n])}if(e.t<this.t){r=e.s&this.DM;for(n=a;n<this.t;++n){i[n]=t(this[n],r)}i.t=this.t}else{r=this.s&this.DM;for(n=a;n<e.t;++n){i[n]=t(r,e[n])}i.t=e.t}i.s=t(this.s,e.s);i.clamp()}function ge(e,t){return e&t}function Se(e){var t=f();this.bitwiseTo(e,ge,t);return t}function be(e,t){return e|t}function we(e){var t=f();this.bitwiseTo(e,be,t);return t}function _e(e,t){return e^t}function Pe(e){var t=f();this.bitwiseTo(e,_e,t);return t}function Ce(e,t){return e&~t}function xe(e){var t=f();this.bitwiseTo(e,Ce,t);return t}function Te(){for(var e=f(),t=0;t<this.t;++t){e[t]=this.DM&~this[t]}e.t=this.t;e.s=~this.s;return e}function De(e){var t=f();e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t);return t}function ke(e){var t=f();e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t);return t}function Me(e){if(e==0)return-1;var t=0;(e&65535)==0&&(e>>=16,t+=16);(e&255)==0&&(e>>=8,t+=8);(e&15)==0&&(e>>=4,t+=4);(e&3)==0&&(e>>=2,t+=2);(e&1)==0&&++t;return t}function Re(){for(var e=0;e<this.t;++e){if(this[e]!=0)return e*this.DB+Me(this[e])}return this.s<0?this.t*this.DB:-1}function Ee(e){for(var t=0;e!=0;){e&=e-1,++t}return t}function Ie(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i){e+=Ee(this[i]^t)}return e}function ze(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function Ae(e,t){var i=u.ONE.shiftLeft(e);this.bitwiseTo(i,t,i);return i}function Oe(e){return this.changeBit(e,be)}function Be(e){return this.changeBit(e,Ce)}function Fe(e){return this.changeBit(e,_e)}function Le(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;){n+=this[i]+e[i],t[i++]=n&this.DM,n>>=this.DB}if(e.t<this.t){for(n+=e.s;i<this.t;){n+=this[i],t[i++]=n&this.DM,n>>=this.DB}n+=this.s}else{for(n+=this.s;i<e.t;){n+=e[i],t[i++]=n&this.DM,n>>=this.DB}n+=e.s}t.s=n<0?-1:0;n>0?t[i++]=n:n<-1&&(t[i++]=this.DV+n);t.t=i;t.clamp()}function qe(e){var t=f();this.addTo(e,t);return t}function Ne(e){var t=f();this.subTo(e,t);return t}function He(e){var t=f();this.multiplyTo(e,t);return t}function We(){var e=f();this.squareTo(e);return e}function Ue(e){var t=f();this.divRemTo(e,t,null);return t}function je(e){var t=f();this.divRemTo(e,null,t);return t}function Ge(e){var t=f(),i=f();this.divRemTo(e,t,i);return[t,i]}function Ve(e){this[this.t]=this.am(0,e-1,this,0,0,this.t);++this.t;this.clamp()}function Je(e,t){if(e!=0){for(;this.t<=t;){this[this.t++]=0}for(this[t]+=e;this[t]>=this.DV;){this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}}function Ye(){}function Xe(e){return e}function Ke(e,t,i){e.multiplyTo(t,i)}function $e(e,t){e.squareTo(t)}Ye.prototype.convert=Xe;Ye.prototype.revert=Xe;Ye.prototype.mulTo=Ke;Ye.prototype.sqrTo=$e;function Ze(e){return this.exp(e,new Ye)}function Qe(e,t,i){var n=Math.min(this.t+e.t,t);i.s=0;for(i.t=n;n>0;){i[--n]=0}var r;for(r=i.t-this.t;n<r;++n){i[n+this.t]=this.am(0,e[n],i,n,0,this.t)}for(r=Math.min(e.t,t);n<r;++n){this.am(0,e[n],i,n,0,t-n)}i.clamp()}function et(e,t,i){--t;var n=i.t=this.t+e.t-t;for(i.s=0;--n>=0;){i[n]=0}for(n=Math.max(t-this.t,0);n<e.t;++n){i[this.t+n-t]=this.am(t-n,e[n],i,0,0,this.t+n-t)}i.clamp();i.drShiftTo(1,i)}function tt(e){this.r2=f();this.q3=f();u.ONE.dlShiftTo(2*e.t,this.r2);this.mu=this.r2.divide(e);this.m=e}function it(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);else if(e.compareTo(this.m)<0)return e;else{var t=f();e.copyTo(t);this.reduce(t);return t}}function nt(e){return e}function rt(e){e.drShiftTo(this.m.t-1,this.r2);if(e.t>this.m.t+1)e.t=this.m.t+1,e.clamp();this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;){e.dAddOffset(1,this.m.t+1)}for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;){e.subTo(this.m,e)}}function at(e,t){e.squareTo(t);this.reduce(t)}function ot(e,t,i){e.multiplyTo(t,i);this.reduce(i)}tt.prototype.convert=it;tt.prototype.revert=nt;tt.prototype.reduce=rt;tt.prototype.mulTo=ot;tt.prototype.sqrTo=at;function st(e,t){var i=e.bitLength(),n,r=C(1),a;if(i<=0)return r;else n=i<18?1:i<48?3:i<144?4:i<768?5:6;a=i<8?new W(t):t.isEven()?new tt(t):new X(t);var o=[],s=3,l=n-1,u=(1<<n)-1;o[1]=a.convert(this);if(n>1){i=f();for(a.sqrTo(o[1],i);s<=u;){o[s]=f(),a.mulTo(i,o[s-2],o[s]),s+=2}}for(var h=e.t-1,c,d=!0,p=f(),i=E(e[h])-1;h>=0;){i>=l?c=e[h]>>i-l&u:(c=(e[h]&(1<<i+1)-1)<<l-i,h>0&&(c|=e[h-1]>>this.DB+i-l));for(s=n;(c&1)==0;){c>>=1,--s}if((i-=s)<0)i+=this.DB,--h;if(d)o[c].copyTo(r),d=!1;else{for(;s>1;){a.sqrTo(r,p),a.sqrTo(p,r),s-=2}s>0?a.sqrTo(r,p):(s=r,r=p,p=s);a.mulTo(p,o[c],r)}for(;h>=0&&(e[h]&1<<i)==0;){a.sqrTo(r,p),s=r,r=p,p=s,--i<0&&(i=this.DB-1,--h)}}return a.revert(r)}function lt(e){var t=this.s<0?this.negate():this.clone(),e=e.s<0?e.negate():e.clone();if(t.compareTo(e)<0)var i=t,t=e,e=i;var i=t.getLowestSetBit(),n=e.getLowestSetBit();if(n<0)return t;i<n&&(n=i);n>0&&(t.rShiftTo(n,t),e.rShiftTo(n,e));for(;t.signum()>0;){(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e))}n>0&&e.lShiftTo(n,e);return e}function ut(e){if(e<=0)return 0;var t=this.DV%e,i=this.s<0?e-1:0;if(this.t>0)if(t==0)i=this[0]%e;else for(var n=this.t-1;n>=0;--n){i=(t*i+this[n])%e}return i}function ft(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return u.ZERO;for(var i=e.clone(),n=this.clone(),r=C(1),a=C(0),o=C(0),s=C(1);i.signum()!=0;){for(;i.isEven();){i.rShiftTo(1,i);if(t){if(!r.isEven()||!a.isEven())r.addTo(this,r),a.subTo(e,a);r.rShiftTo(1,r)}else a.isEven()||a.subTo(e,a);a.rShiftTo(1,a)}for(;n.isEven();){n.rShiftTo(1,n);if(t){if(!o.isEven()||!s.isEven())o.addTo(this,o),s.subTo(e,s);o.rShiftTo(1,o)}else s.isEven()||s.subTo(e,s);s.rShiftTo(1,s)}i.compareTo(n)>=0?(i.subTo(n,i),t&&r.subTo(o,r),a.subTo(s,a)):(n.subTo(i,n),t&&o.subTo(r,o),s.subTo(a,s))}if(n.compareTo(u.ONE)!=0)return u.ZERO;if(s.compareTo(e)>=0)return s.subtract(e);if(s.signum()<0)s.addTo(e,s);else return s;return s.signum()<0?s.add(e):s}var ht=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ct=67108864/ht[ht.length-1];function dt(e){var t,i=this.abs();if(i.t==1&&i[0]<=ht[ht.length-1]){for(t=0;t<ht.length;++t){if(i[0]==ht[t])return!0}return!1}if(i.isEven())return!1;for(t=1;t<ht.length;){for(var n=ht[t],r=t+1;r<ht.length&&n<ct;){n*=ht[r++]}for(n=i.modInt(n);t<r;){if(n%ht[t++]==0)return!1}}return i.millerRabin(e)}function pt(e){var t=this.subtract(u.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var n=t.shiftRight(i),e=e+1>>1;if(e>ht.length)e=ht.length;for(var r=f(),a=0;a<e;++a){r.fromInt(ht[Math.floor(Math.random()*ht.length)]);var o=r.modPow(n,this);if(o.compareTo(u.ONE)!=0&&o.compareTo(t)!=0){for(var s=1;s++<i&&o.compareTo(t)!=0;){if(o=o.modPowInt(2,this),o.compareTo(u.ONE)==0)return!1}if(o.compareTo(t)!=0)return!1}}return!0}u.prototype.chunkSize=le;u.prototype.toRadix=fe;u.prototype.fromRadix=he;u.prototype.fromNumber=ce;u.prototype.bitwiseTo=me;u.prototype.changeBit=Ae;u.prototype.addTo=Le;u.prototype.dMultiply=Ve;u.prototype.dAddOffset=Je;u.prototype.multiplyLowerTo=Qe;u.prototype.multiplyUpperTo=et;u.prototype.modInt=ut;u.prototype.millerRabin=pt;u.prototype.clone=re;u.prototype.intValue=ae;u.prototype.byteValue=oe;u.prototype.shortValue=se;u.prototype.signum=ue;u.prototype.toByteArray=de;u.prototype.equals=pe;u.prototype.min=ve;u.prototype.max=ye;u.prototype.and=Se;u.prototype.or=we;u.prototype.xor=Pe;u.prototype.andNot=xe;u.prototype.not=Te;u.prototype.shiftLeft=De;u.prototype.shiftRight=ke;u.prototype.getLowestSetBit=Re;u.prototype.bitCount=Ie;u.prototype.testBit=ze;u.prototype.setBit=Oe;u.prototype.clearBit=Be;u.prototype.flipBit=Fe;u.prototype.add=qe;u.prototype.subtract=Ne;u.prototype.multiply=He;u.prototype.divide=Ue;u.prototype.remainder=je;u.prototype.divideAndRemainder=Ge;u.prototype.modPow=st;u.prototype.modInverse=ft;u.prototype.pow=Ze;u.prototype.gcd=lt;u.prototype.isProbablePrime=dt;u.prototype.square=We;(function(e,t,i,n,a,o,s){function l(e){var t,n,r=this,a=e.length,o=0,s=r.i=r.j=r.m=0;r.S=[];r.c=[];for(a||(e=[a++]);o<i;){r.S[o]=o++}for(o=0;o<i;o++){t=r.S[o],s=s+t+e[o%a]&i-1,n=r.S[s],r.S[o]=n,r.S[s]=t}r.g=function(e){var t=r.S,n=r.i+1&i-1,a=t[n],o=r.j+a&i-1,s=t[o];t[n]=s;t[o]=a;for(var l=t[a+s&i-1];--e;){n=n+1&i-1,a=t[n],o=o+a&i-1,s=t[o],t[n]=s,t[o]=a,l=l*i+t[a+s&i-1]}r.i=n;r.j=o;return l};r.g(i)}function u(e,t,i,n,a){i=[];a=typeof e==="undefined"?"undefined":r(e);if(t&&a=="object")for(n in e){if(n.indexOf("S")<5)try{i.push(u(e[n],t-1))}catch(e){}}return i.length?i:e+(a!="string"?"\0":"")}function f(e,t,n,r){e+="";for(r=n=0;r<e.length;r++){var a=t,o=r&i-1,s=(n^=t[r&i-1]*19)+e.charCodeAt(r);a[o]=s&i-1}e="";for(r in t){e+=String.fromCharCode(t[r])}return e}t.seedrandom=function(r,h){var c=[],d,r=f(u(h?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),c);d=new l(c);f(d.S,e);t.random=function(){for(var e=d.g(n),t=s,r=0;e<a;){e=(e+r)*i,t*=i,r=d.g(1)}for(;e>=o;){e/=2,t/=2,r>>>=1}return(e+r)/t};return r};s=t.pow(i,n);a=t.pow(2,a);o=a*2;f(t.random(),e)})([],Math,256,6,52);function vt(){}function yt(e){var t;for(t=0;t<e.length;t++){e[t]=Math.floor(Math.random()*256)}}vt.prototype.nextBytes=yt;function mt(){this.j=this.i=0;this.S=[]}function gt(e){var t,i,n;for(t=0;t<256;++t){this.S[t]=t}for(t=i=0;t<256;++t){i=i+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[i],this.S[i]=n}this.j=this.i=0}function St(){var e;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;e=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=e;return this.S[e+this.S[this.i]&255]}mt.prototype.init=gt;mt.prototype.next=St;function bt(){return new mt}var wt=256,_t,Pt,Ct;function xt(e){Pt[Ct++]^=e&255;Pt[Ct++]^=e>>8&255;Pt[Ct++]^=e>>16&255;Pt[Ct++]^=e>>24&255;Ct>=wt&&(Ct-=wt)}function Tt(){xt((new Date).getTime())}if(Pt==null){Pt=[];Ct=0;var Dt;if(a.appName=="Netscape"&&a.appVersion<"5"&&window.crypto){var kt=window.crypto.random(32);for(Dt=0;Dt<kt.length;++Dt){Pt[Ct++]=kt.charCodeAt(Dt)&255}}for(;Ct<wt;){Dt=Math.floor(65536*Math.random()),Pt[Ct++]=Dt>>>8,Pt[Ct++]=Dt&255}Ct=0;Tt()}function Mt(){if(_t==null){Tt();_t=bt();_t.init(Pt);for(Ct=0;Ct<Pt.length;++Ct){Pt[Ct]=0}Ct=0}return _t.next()}function Rt(e){var t;for(t=0;t<e.length;++t){e[t]=Mt()}}function Et(){}Et.prototype.nextBytes=Rt;function It(e){function t(e,t){var i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}function i(e,t){return e>>>t|e<<32-t}e=function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(n&63|128))}return t}(e);return function(e){for(var t="",i=0;i<e.length*4;i++){t+="0123456789abcdef".charAt(e[i>>2]>>(3-i%4)*8+4&15)+"0123456789abcdef".charAt(e[i>>2]>>(3-i%4)*8&15)}return t}(function(e,n){var r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o=Array(64),s,l,u,f,h,c,d,p,v,y,m,g;e[n>>5]|=128<<24-n%32;e[(n+64>>9<<4)+15]=n;for(v=0;v<e.length;v+=16){s=a[0];l=a[1];u=a[2];f=a[3];h=a[4];c=a[5];d=a[6];p=a[7];for(y=0;y<64;y++){o[y]=y<16?e[y+v]:t(t(t(i(o[y-2],17)^i(o[y-2],19)^o[y-2]>>>10,o[y-7]),i(o[y-15],7)^i(o[y-15],18)^o[y-15]>>>3),o[y-16]),m=t(t(t(t(p,i(h,6)^i(h,11)^i(h,25)),h&c^~h&d),r[y]),o[y]),g=t(i(s,2)^i(s,13)^i(s,22),s&l^s&u^l&u),p=d,d=c,c=h,h=t(f,m),f=u,u=l,l=s,s=t(m,g)}a[0]=t(s,a[0]);a[1]=t(l,a[1]);a[2]=t(u,a[2]);a[3]=t(f,a[3]);a[4]=t(h,a[4]);a[5]=t(c,a[5]);a[6]=t(d,a[6]);a[7]=t(p,a[7])}return a}(function(e){for(var t=[],i=0;i<e.length*8;i+=8){t[i>>5]|=(e.charCodeAt(i/8)&255)<<24-i%32}return t}(e),e.length*8))}var zt={hex:function e(t){return It(t)}};function At(e){function t(e,t){return e<<t|e>>>32-t}function i(e){var t="",i,n;for(i=7;i>=0;i--){n=e>>>i*4&15,t+=n.toString(16)}return t}var n,r,a=Array(80),o=1732584193,s=4023233417,l=2562383102,u=271733878,f=3285377520,h,c,d,p,v,e=function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(n&63|128))}return t}(e);h=e.length;var y=[];for(n=0;n<h-3;n+=4){r=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),y.push(r)}switch(h%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(h-1)<<24|8388608;break;case 2:n=e.charCodeAt(h-2)<<24|e.charCodeAt(h-1)<<16|32768;break;case 3:n=e.charCodeAt(h-3)<<24|e.charCodeAt(h-2)<<16|e.charCodeAt(h-1)<<8|128}for(y.push(n);y.length%16!=14;){y.push(0)}y.push(h>>>29);y.push(h<<3&4294967295);for(e=0;e<y.length;e+=16){for(n=0;n<16;n++){a[n]=y[e+n]}for(n=16;n<=79;n++){a[n]=t(a[n-3]^a[n-8]^a[n-14]^a[n-16],1)}r=o;h=s;c=l;d=u;p=f;for(n=0;n<=19;n++){v=t(r,5)+(h&c|~h&d)+p+a[n]+1518500249&4294967295,p=d,d=c,c=t(h,30),h=r,r=v}for(n=20;n<=39;n++){v=t(r,5)+(h^c^d)+p+a[n]+1859775393&4294967295,p=d,d=c,c=t(h,30),h=r,r=v}for(n=40;n<=59;n++){v=t(r,5)+(h&c|h&d|c&d)+p+a[n]+2400959708&4294967295,p=d,d=c,c=t(h,30),h=r,r=v}for(n=60;n<=79;n++){v=t(r,5)+(h^c^d)+p+a[n]+3395469782&4294967295,p=d,d=c,c=t(h,30),h=r,r=v}o=o+r&4294967295;s=s+h&4294967295;l=l+c&4294967295;u=u+d&4294967295;f=f+p&4294967295}v=i(o)+i(s)+i(l)+i(u)+i(f);return v.toLowerCase()}var Ot={hex:function e(t){return At(t)}},Bt=function e(t){function i(e,t){var i,n,r,a,o;r=e&2147483648;a=t&2147483648;i=e&1073741824;n=t&1073741824;o=(e&1073741823)+(t&1073741823);return i&n?o^2147483648^r^a:i|n?o&1073741824?o^3221225472^r^a:o^1073741824^r^a:o^r^a}function n(e,t,n,r,a,o,s){e=i(e,i(i(t&n|~t&r,a),s));return i(e<<o|e>>>32-o,t)}function r(e,t,n,r,a,o,s){e=i(e,i(i(t&r|n&~r,a),s));return i(e<<o|e>>>32-o,t)}function a(e,t,n,r,a,o,s){e=i(e,i(i(t^n^r,a),s));return i(e<<o|e>>>32-o,t)}function o(e,t,n,r,a,o,s){e=i(e,i(i(n^(t|~r),a),s));return i(e<<o|e>>>32-o,t)}function s(e){var t="",i="",n;for(n=0;n<=3;n++){i=e>>>n*8&255,i="0"+i.toString(16),t+=i.substr(i.length-2,2)}return t}var l=[],u,f,h,c,d,p,v,y,t=function(e){for(var e=e.replace(/\r\n/g,"\n"),t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(n>127&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(n&63|128))}return t}(t),l=function(e){var t,i=e.length;t=i+8;for(var n=((t-t%64)/64+1)*16,r=Array(n-1),a=0,o=0;o<i;){t=(o-o%4)/4,a=o%4*8,r[t]|=e.charCodeAt(o)<<a,o++}r[(o-o%4)/4]|=128<<o%4*8;r[n-2]=i<<3;r[n-1]=i>>>29;return r}(t);d=1732584193;p=4023233417;v=2562383102;y=271733878;for(t=0;t<l.length;t+=16){u=d,f=p,h=v,c=y,d=n(d,p,v,y,l[t+0],7,3614090360),y=n(y,d,p,v,l[t+1],12,3905402710),v=n(v,y,d,p,l[t+2],17,606105819),p=n(p,v,y,d,l[t+3],22,3250441966),d=n(d,p,v,y,l[t+4],7,4118548399),y=n(y,d,p,v,l[t+5],12,1200080426),v=n(v,y,d,p,l[t+6],17,2821735955),p=n(p,v,y,d,l[t+7],22,4249261313),d=n(d,p,v,y,l[t+8],7,1770035416),y=n(y,d,p,v,l[t+9],12,2336552879),v=n(v,y,d,p,l[t+10],17,4294925233),p=n(p,v,y,d,l[t+11],22,2304563134),d=n(d,p,v,y,l[t+12],7,1804603682),y=n(y,d,p,v,l[t+13],12,4254626195),v=n(v,y,d,p,l[t+14],17,2792965006),p=n(p,v,y,d,l[t+15],22,1236535329),d=r(d,p,v,y,l[t+1],5,4129170786),y=r(y,d,p,v,l[t+6],9,3225465664),v=r(v,y,d,p,l[t+11],14,643717713),p=r(p,v,y,d,l[t+0],20,3921069994),d=r(d,p,v,y,l[t+5],5,3593408605),y=r(y,d,p,v,l[t+10],9,38016083),v=r(v,y,d,p,l[t+15],14,3634488961),p=r(p,v,y,d,l[t+4],20,3889429448),d=r(d,p,v,y,l[t+9],5,568446438),y=r(y,d,p,v,l[t+14],9,3275163606),v=r(v,y,d,p,l[t+3],14,4107603335),p=r(p,v,y,d,l[t+8],20,1163531501),d=r(d,p,v,y,l[t+13],5,2850285829),y=r(y,d,p,v,l[t+2],9,4243563512),v=r(v,y,d,p,l[t+7],14,1735328473),p=r(p,v,y,d,l[t+12],20,2368359562),d=a(d,p,v,y,l[t+5],4,4294588738),y=a(y,d,p,v,l[t+8],11,2272392833),v=a(v,y,d,p,l[t+11],16,1839030562),p=a(p,v,y,d,l[t+14],23,4259657740),d=a(d,p,v,y,l[t+1],4,2763975236),y=a(y,d,p,v,l[t+4],11,1272893353),v=a(v,y,d,p,l[t+7],16,4139469664),p=a(p,v,y,d,l[t+10],23,3200236656),d=a(d,p,v,y,l[t+13],4,681279174),y=a(y,d,p,v,l[t+0],11,3936430074),v=a(v,y,d,p,l[t+3],16,3572445317),p=a(p,v,y,d,l[t+6],23,76029189),d=a(d,p,v,y,l[t+9],4,3654602809),y=a(y,d,p,v,l[t+12],11,3873151461),v=a(v,y,d,p,l[t+15],16,530742520),p=a(p,v,y,d,l[t+2],23,3299628645),d=o(d,p,v,y,l[t+0],6,4096336452),y=o(y,d,p,v,l[t+7],10,1126891415),v=o(v,y,d,p,l[t+14],15,2878612391),p=o(p,v,y,d,l[t+5],21,4237533241),d=o(d,p,v,y,l[t+12],6,1700485571),y=o(y,d,p,v,l[t+3],10,2399980690),v=o(v,y,d,p,l[t+10],15,4293915773),p=o(p,v,y,d,l[t+1],21,2240044497),d=o(d,p,v,y,l[t+8],6,1873313359),y=o(y,d,p,v,l[t+15],10,4264355552),v=o(v,y,d,p,l[t+6],15,2734768916),p=o(p,v,y,d,l[t+13],21,1309151649),d=o(d,p,v,y,l[t+4],6,4149444226),y=o(y,d,p,v,l[t+11],10,3174756917),v=o(v,y,d,p,l[t+2],15,718787259),p=o(p,v,y,d,l[t+9],21,3951481745),d=i(d,u),p=i(p,f),v=i(v,h),y=i(y,c)}return(s(d)+s(p)+s(v)+s(y)).toLowerCase()};function Ft(e,t){return new u(e,t)}function Lt(e,t){for(var i="",n=0;n+t<e.length;){i+=e.substring(n,n+t)+"\n",n+=t}return i+e.substring(n,e.length)}function qt(e){return e<16?"0"+e.toString(16):e.toString(16)}function Nt(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var i=[],n=e.length-1;n>=0&&t>0;){var r=e.charCodeAt(n--);r<128?i[--t]=r:r>127&&r<2048?(i[--t]=r&63|128,i[--t]=r>>6|192):(i[--t]=r&63|128,i[--t]=r>>6&63|128,i[--t]=r>>12|224)}i[--t]=0;n=new Et;for(r=[];t>2;){for(r[0]=0;r[0]==0;){n.nextBytes(r)}i[--t]=r[0]}i[--t]=2;i[--t]=0;return new u(i)}function Ht(){this.n=null;this.e=0;this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function Wt(e,t){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=Ft(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function Ut(e){return e.modPowInt(this.e,this.n)}function jt(e){e=Nt(e,this.n.bitLength()+7>>3);if(e==null)return null;e=this.doPublic(e);if(e==null)return null;e=e.toString(16);return(e.length&1)==0?e:"0"+e}Ht.prototype.doPublic=Ut;Ht.prototype.setPublic=Wt;Ht.prototype.encrypt=jt;function Gt(e,t){for(var i=e.toByteArray(),n=0;n<i.length&&i[n]==0;){++n}if(i.length-n!=t-1||i[n]!=2)return null;for(++n;i[n]!=0;){if(++n>=i.length)return null}for(var r="";++n<i.length;){var a=i[n]&255;a<128?r+=String.fromCharCode(a):a>191&&a<224?(r+=String.fromCharCode((a&31)<<6|i[n+1]&63),++n):(r+=String.fromCharCode((a&15)<<12|(i[n+1]&63)<<6|i[n+2]&63),n+=2)}return r}function Vt(e,t,i){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=Ft(e,16),this.e=parseInt(t,16),this.d=Ft(i,16)):alert("Invalid RSA private key")}function Jt(e,t,i,n,r,a,o,s){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=Ft(e,16),this.e=parseInt(t,16),this.d=Ft(i,16),this.p=Ft(n,16),this.q=Ft(r,16),this.dmp1=Ft(a,16),this.dmq1=Ft(o,16),this.coeff=Ft(s,16)):alert("Invalid RSA private key")}function Yt(e,t){var i=new vt,n=e>>1;this.e=parseInt(t,16);for(var r=new u(t,16);;){for(;;){if(this.p=new u(e-n,1,i),this.p.subtract(u.ONE).gcd(r).compareTo(u.ONE)==0&&this.p.isProbablePrime(10))break}for(;;){if(this.q=new u(n,1,i),this.q.subtract(u.ONE).gcd(r).compareTo(u.ONE)==0&&this.q.isProbablePrime(10))break}if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q;this.q=a}var a=this.p.subtract(u.ONE),o=this.q.subtract(u.ONE),s=a.multiply(o);if(s.gcd(r).compareTo(u.ONE)==0){this.n=this.p.multiply(this.q);this.d=r.modInverse(s);this.dmp1=this.d.mod(a);this.dmq1=this.d.mod(o);this.coeff=this.q.modInverse(this.p);break}}}function Xt(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;){t=t.add(this.p)}return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)}function Kt(e){e=this.doPrivate(Ft(e,16));return e==null?null:Gt(e,this.n.bitLength()+7>>3)}Ht.prototype.doPrivate=Xt;Ht.prototype.setPrivate=Vt;Ht.prototype.setPrivateEx=Jt;Ht.prototype.generate=Yt;Ht.prototype.decrypt=Kt;var $t=[];$t.sha1="3021300906052b0e03021a05000414";$t.sha256="3031300d060960864801650304020105000420";var Zt=[];Zt.sha1=Ot.hex;Zt.sha256=zt.hex;function Qt(e,t,i){t/=4;for(var e=(0,Zt[i])(e),i="00"+$t[i]+e,e="",t=t-4-i.length,n=0;n<t;n+=2){e+="ff"}return sPaddedMessageHex="0001"+e+i}function ei(e,t){var i=Qt(e,this.n.bitLength(),t);return this.doPrivate(Ft(i,16)).toString(16)}function ti(e){e=Qt(e,this.n.bitLength(),"sha1");return this.doPrivate(Ft(e,16)).toString(16)}function ii(e){e=Qt(e,this.n.bitLength(),"sha256");return this.doPrivate(Ft(e,16)).toString(16)}function ni(e,t,i){var n=new Ht;n.setPublic(t,i);return n.doPublic(e)}function ri(e,t,i){return ni(e,t,i).toString(16).replace(/^1f+00/,"")}function ai(e){for(var t in $t){var i=$t[t],n=i.length;if(e.substring(0,n)==i)return[t,e.substring(n)]}return[]}function oi(e,t,i,n){t=ri(t,i,n);i=ai(t);if(i.length==0)return!1;t=i[1];e=(0,Zt[i[0]])(e);return t==e}function si(e,t){var i=Ft(e,16);return oi(t,i,this.n.toString(16),this.e.toString(16))}function li(e,t){var t=t.replace(/[ \n]+/g,""),i=this.doPublic(Ft(t,16)).toString(16).replace(/^1f+00/,""),n=ai(i);if(n.length==0)return!1;i=n[1];n=(0,Zt[n[0]])(e);return i==n}Ht.prototype.signString=ei;Ht.prototype.signStringWithSHA1=ti;Ht.prototype.signStringWithSHA256=ii;Ht.prototype.verifyString=li;Ht.prototype.verifyHexSignatureForMessage=si;var ui=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11]};e.Init=function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++){e.Sbox_Inv[e.Sbox[t]]=t}e.ShiftRowTab_Inv=Array(16);for(t=0;t<16;t++){e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t}e.xtime=Array(256);for(t=0;t<128;t++){e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27}};e.Done=function(){delete e.Sbox_Inv;delete e.ShiftRowTab_Inv;delete e.xtime};e.ExpandKey=function(t){var i=t.length,n,r=1;switch(i){case 16:n=176;break;case 24:n=208;break;case 32:n=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var a=i;a<n;a+=4){var o=t.slice(a-4,a);if(a%i==0){if(o=[e.Sbox[o[1]]^r,e.Sbox[o[2]],e.Sbox[o[3]],e.Sbox[o[0]]],(r<<=1)>=256)r^=283}else i>24&&a%i==16&&(o=[e.Sbox[o[0]],e.Sbox[o[1]],e.Sbox[o[2]],e.Sbox[o[3]]]);for(var s=0;s<4;s++){t[a+s]=t[a+s-i]^o[s]}}};e.Encrypt=function(t,i){var n=i.length;e.AddRoundKey(t,i.slice(0,16));for(var r=16;r<n-16;r+=16){e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,i.slice(r,r+16))}e.SubBytes(t,e.Sbox);e.ShiftRows(t,e.ShiftRowTab);e.AddRoundKey(t,i.slice(r,n))};e.Decrypt=function(t,i){var n=i.length;e.AddRoundKey(t,i.slice(n-16,n));e.ShiftRows(t,e.ShiftRowTab_Inv);e.SubBytes(t,e.Sbox_Inv);for(n-=32;n>=16;n-=16){e.AddRoundKey(t,i.slice(n,n+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv)}e.AddRoundKey(t,i.slice(0,16))};e.SubBytes=function(e,t){for(var i=0;i<16;i++){e[i]=t[e[i]]}};e.AddRoundKey=function(e,t){for(var i=0;i<16;i++){e[i]^=t[i]}};e.ShiftRows=function(e,t){for(var i=[].concat(e),n=0;n<16;n++){e[n]=i[t[n]]}};e.MixColumns=function(t){for(var i=0;i<16;i+=4){var n=t[i+0],r=t[i+1],a=t[i+2],o=t[i+3],s=n^r^a^o;t[i+0]^=s^e.xtime[n^r];t[i+1]^=s^e.xtime[r^a];t[i+2]^=s^e.xtime[a^o];t[i+3]^=s^e.xtime[o^n]}};e.MixColumns_Inv=function(t){for(var i=0;i<16;i+=4){var n=t[i+0],r=t[i+1],a=t[i+2],o=t[i+3],s=n^r^a^o,l=e.xtime[s],u=e.xtime[e.xtime[l^n^a]]^s;s^=e.xtime[e.xtime[l^r^o]];t[i+0]^=u^e.xtime[n^r];t[i+1]^=s^e.xtime[r^a];t[i+2]^=u^e.xtime[a^o];t[i+3]^=s^e.xtime[o^n]}};return e}(),fi=function(){var e={};ui.Init();e.b256to64=function(e){var t,i,n,r="",a=0,o=0,s=e.length;for(n=0;n<s;n++){i=e.charCodeAt(n),o==0?(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2&63),t=(i&3)<<4):o==1?(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>4&15),t=(i&15)<<2):o==2&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>6&3),a+=1,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i&63)),a+=1,o+=1,o==3&&(o=0)}o>0&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),r+="=");o==1&&(r+="=");return r};e.b64to256=function(e){var t,i,n="",r=0,a=0,o=e.length;for(i=0;i<o;i++){t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(i)),t>=0&&(r&&(n+=String.fromCharCode(a|t>>6-r&255)),r=r+2&7,a=t<<r&255)}return n};e.b16to64=function(e){var t,i,n="";e.length%2==1&&(e="0"+e);for(t=0;t+3<=e.length;t+=3){i=parseInt(e.substring(t,t+3),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i&63)}t+1==e.length?(i=parseInt(e.substring(t,t+1),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i<<2)):t+2==e.length&&(i=parseInt(e.substring(t,t+2),16),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((i&3)<<4));for(;(n.length&3)>0;){n+="="}return n};e.b64to16=function(e){var t="",i,n=0,r;for(i=0;i<e.length;++i){if(e.charAt(i)=="=")break;v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(i));v<0||(n==0?(t+=b(v>>2),r=v&3,n=1):n==1?(t+=b(r<<2|v>>4),r=v&15,n=2):n==2?(t+=b(r),t+=b(v>>2),r=v&3,n=3):(t+=b(r<<2|v>>4),t+=b(v&15),n=0))}n==1&&(t+=b(r<<2));return t};e.string2bytes=function(e){for(var t=[],i=0;i<e.length;i++){t.push(e.charCodeAt(i))}return t};e.bytes2string=function(e){for(var t="",i=0;i<e.length;i++){t+=String.fromCharCode(e[i])}return t};e.blockXOR=function(e,t){for(var i=Array(16),n=0;n<16;n++){i[n]=e[n]^t[n]}return i};e.blockIV=function(){var e=new Et,t=Array(16);e.nextBytes(t);return t};e.pad16=function(e){var t=e.slice(0),n=(16-e.length%16)%16;for(i=e.length;i<e.length+n;i++){t.push(0)}return t};e.depad=function(e){for(e=e.slice(0);e[e.length-1]==0;){e=e.slice(0,e.length-1)}return e};e.encryptAESCBC=function(t,i){var n=i.slice(0);ui.ExpandKey(n);for(var r=e.string2bytes(t),r=e.pad16(r),a=e.blockIV(),o=0;o<r.length/16;o++){var s=r.slice(o*16,o*16+16),l=a.slice(o*16,o*16+16),s=e.blockXOR(l,s);ui.Encrypt(s,n);a=a.concat(s)}n=e.bytes2string(a);return e.b256to64(n)};e.decryptAESCBC=function(t,i){var n=i.slice(0);ui.ExpandKey(n);for(var t=e.b64to256(t),r=e.string2bytes(t),a=[],o=1;o<r.length/16;o++){var s=r.slice(o*16,o*16+16),l=r.slice((o-1)*16,(o-1)*16+16);ui.Decrypt(s,n);s=e.blockXOR(l,s);a=a.concat(s)}a=e.depad(a);return e.bytes2string(a)};e.wrap60=function(e){for(var t="",i=0;i<e.length;i++){i%60==0&&i!=0&&(t+="\n"),t+=e[i]}return t};e.generateAESKey=function(){var e=Array(16);(new Et).nextBytes(e);return e};e.generateRSAKey=function(e,t){Math.seedrandom(zt.hex(e));var i=new Ht;i.generate(t,"10001");return i};e.publicKeyString=function(e){return pubkey=e.n.toString(16)};e.publicKeyID=function(e){return Bt(e)};e.publicKeyFromString=function(e){var e=e.split("|")[0],t=new Ht;t.setPublic(e,"10001");return t};e.encrypt=function(t,i,n){var r="";try{var a=e.publicKeyFromString(i);r+=a.encrypt(t)+"?"}catch(e){return{status:"Invalid public key"}}return{status:"success",cipher:r}};e.decrypt=function(e,t){var i=e.split("?"),n=t.decrypt(i[0]);return{status:"success",plaintext:n,signature:"unsigned"}};return e}();e.exports=fi},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=n||function(e,t){var i={},n=i.lib={},r=function e(){},a=n.Base={extend:function e(t){r.prototype=this;var i=new r;t&&i.mixIn(t);i.hasOwnProperty("init")||(i.init=function(){i.$super.init.apply(this,arguments)});i.init.prototype=i;i.$super=this;return i},create:function e(){var t=this.extend();t.init.apply(t,arguments);return t},init:function e(){},mixIn:function e(t){for(var i in t){t.hasOwnProperty(i)&&(this[i]=t[i])}t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function e(){return this.init.prototype.extend(this)}},o=n.WordArray=a.extend({init:function e(i,n){i=this.words=i||[];this.sigBytes=n!=t?n:4*i.length},toString:function e(t){return(t||l).stringify(this)},concat:function e(t){var i=this.words,n=t.words,r=this.sigBytes;t=t.sigBytes;this.clamp();if(r%4)for(var a=0;a<t;a++){i[r+a>>>2]|=(n[a>>>2]>>>24-8*(a%4)&255)<<24-8*((r+a)%4)}else if(65535<n.length)for(a=0;a<t;a+=4){i[r+a>>>2]=n[a>>>2]}else i.push.apply(i,n);this.sigBytes+=t;return this},clamp:function t(){var i=this.words,n=this.sigBytes;i[n>>>2]&=4294967295<<32-8*(n%4);i.length=e.ceil(n/4)},clone:function e(){var t=a.clone.call(this);t.words=this.words.slice(0);return t},random:function t(i){for(var n=[],r=0;r<i;r+=4){n.push(4294967296*e.random()|0)}return new o.init(n,i)}}),s=i.enc={},l=s.Hex={stringify:function e(t){var i=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var a=i[r>>>2]>>>24-8*(r%4)&255;n.push((a>>>4).toString(16));n.push((a&15).toString(16))}return n.join("")},parse:function e(t){for(var i=t.length,n=[],r=0;r<i;r+=2){n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8)}return new o.init(n,i/2)}},u=s.Latin1={stringify:function e(t){var i=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){n.push(String.fromCharCode(i[r>>>2]>>>24-8*(r%4)&255))}return n.join("")},parse:function e(t){for(var i=t.length,n=[],r=0;r<i;r++){n[r>>>2]|=(t.charCodeAt(r)&255)<<24-8*(r%4)}return new o.init(n,i)}},f=s.Utf8={stringify:function e(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function e(t){return u.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function e(){this._data=new o.init;this._nDataBytes=0},_append:function e(t){"string"==typeof t&&(t=f.parse(t));this._data.concat(t);this._nDataBytes+=t.sigBytes},_process:function t(i){var n=this._data,r=n.words,a=n.sigBytes,s=this.blockSize,l=a/(4*s),l=i?e.ceil(l):e.max((l|0)-this._minBufferSize,0);i=l*s;a=e.min(4*i,a);if(i){for(var u=0;u<i;u+=s){this._doProcessBlock(r,u)}u=r.splice(0,i);n.sigBytes-=a}return new o.init(u,a)},clone:function e(){var t=a.clone.call(this);t._data=this._data.clone();return t},_minBufferSize:0});n.Hasher=h.extend({cfg:a.extend(),init:function e(t){this.cfg=this.cfg.extend(t);this.reset()},reset:function e(){h.reset.call(this);this._doReset()},update:function e(t){this._append(t);this._process();return this},finalize:function e(t){t&&this._append(t);return this._doFinalize()},blockSize:16,_createHelper:function e(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function e(t){return function(e,i){return new c.HMAC.init(t,i).finalize(e)}}});var c=i.algo={};return i}(Math);(function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function e(t){var i=t.words,n=t.sigBytes,r=this._map;t.clamp();t=[];for(var a=0;a<n;a+=3){for(var o=(i[a>>>2]>>>24-8*(a%4)&255)<<16|(i[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|i[a+2>>>2]>>>24-8*((a+2)%4)&255,s=0;4>s&&a+.75*s<n;s++){t.push(r.charAt(o>>>6*(3-s)&63))}}if(i=r.charAt(64))for(;t.length%4;){t.push(i)}return t.join("")},parse:function e(i){var n=i.length,r=this._map,a=r.charAt(64);a&&(a=i.indexOf(a),-1!=a&&(n=a));for(var a=[],o=0,s=0;s<n;s++){if(s%4){var l=r.indexOf(i.charAt(s-1))<<2*(s%4),u=r.indexOf(i.charAt(s))>>>6-2*(s%4);a[o>>>2]|=(l|u)<<24-8*(o%4);o++}}return t.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(e,t,i,n,r,a,o){e=e+(t&i|~t&n)+r+o;return(e<<a|e>>>32-a)+t}function i(e,t,i,n,r,a,o){e=e+(t&n|i&~n)+r+o;return(e<<a|e>>>32-a)+t}function r(e,t,i,n,r,a,o){e=e+(t^i^n)+r+o;return(e<<a|e>>>32-a)+t}function a(e,t,i,n,r,a,o){e=e+(i^(t|~n))+r+o;return(e<<a|e>>>32-a)+t}for(var o=n,s=o.lib,l=s.WordArray,u=s.Hasher,s=o.algo,f=[],h=0;64>h;h++){f[h]=4294967296*e.abs(e.sin(h+1))|0}s=s.MD5=u.extend({_doReset:function e(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function e(n,o){for(var s=0;16>s;s++){var l=o+s,u=n[l];n[l]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}var s=this._hash.words,l=n[o+0],u=n[o+1],h=n[o+2],c=n[o+3],d=n[o+4],p=n[o+5],v=n[o+6],y=n[o+7],m=n[o+8],g=n[o+9],S=n[o+10],b=n[o+11],w=n[o+12],_=n[o+13],P=n[o+14],C=n[o+15],x=s[0],T=s[1],D=s[2],k=s[3],x=t(x,T,D,k,l,7,f[0]),k=t(k,x,T,D,u,12,f[1]),D=t(D,k,x,T,h,17,f[2]),T=t(T,D,k,x,c,22,f[3]),x=t(x,T,D,k,d,7,f[4]),k=t(k,x,T,D,p,12,f[5]),D=t(D,k,x,T,v,17,f[6]),T=t(T,D,k,x,y,22,f[7]),x=t(x,T,D,k,m,7,f[8]),k=t(k,x,T,D,g,12,f[9]),D=t(D,k,x,T,S,17,f[10]),T=t(T,D,k,x,b,22,f[11]),x=t(x,T,D,k,w,7,f[12]),k=t(k,x,T,D,_,12,f[13]),D=t(D,k,x,T,P,17,f[14]),T=t(T,D,k,x,C,22,f[15]),x=i(x,T,D,k,u,5,f[16]),k=i(k,x,T,D,v,9,f[17]),D=i(D,k,x,T,b,14,f[18]),T=i(T,D,k,x,l,20,f[19]),x=i(x,T,D,k,p,5,f[20]),k=i(k,x,T,D,S,9,f[21]),D=i(D,k,x,T,C,14,f[22]),T=i(T,D,k,x,d,20,f[23]),x=i(x,T,D,k,g,5,f[24]),k=i(k,x,T,D,P,9,f[25]),D=i(D,k,x,T,c,14,f[26]),T=i(T,D,k,x,m,20,f[27]),x=i(x,T,D,k,_,5,f[28]),k=i(k,x,T,D,h,9,f[29]),D=i(D,k,x,T,y,14,f[30]),T=i(T,D,k,x,w,20,f[31]),x=r(x,T,D,k,p,4,f[32]),k=r(k,x,T,D,m,11,f[33]),D=r(D,k,x,T,b,16,f[34]),T=r(T,D,k,x,P,23,f[35]),x=r(x,T,D,k,u,4,f[36]),k=r(k,x,T,D,d,11,f[37]),D=r(D,k,x,T,y,16,f[38]),T=r(T,D,k,x,S,23,f[39]),x=r(x,T,D,k,_,4,f[40]),k=r(k,x,T,D,l,11,f[41]),D=r(D,k,x,T,c,16,f[42]),T=r(T,D,k,x,v,23,f[43]),x=r(x,T,D,k,g,4,f[44]),k=r(k,x,T,D,w,11,f[45]),D=r(D,k,x,T,C,16,f[46]),T=r(T,D,k,x,h,23,f[47]),x=a(x,T,D,k,l,6,f[48]),k=a(k,x,T,D,y,10,f[49]),D=a(D,k,x,T,P,15,f[50]),T=a(T,D,k,x,p,21,f[51]),x=a(x,T,D,k,w,6,f[52]),k=a(k,x,T,D,c,10,f[53]),D=a(D,k,x,T,S,15,f[54]),T=a(T,D,k,x,u,21,f[55]),x=a(x,T,D,k,m,6,f[56]),k=a(k,x,T,D,C,10,f[57]),D=a(D,k,x,T,v,15,f[58]),T=a(T,D,k,x,_,21,f[59]),x=a(x,T,D,k,d,6,f[60]),k=a(k,x,T,D,b,10,f[61]),D=a(D,k,x,T,h,15,f[62]),T=a(T,D,k,x,g,21,f[63]);s[0]=s[0]+x|0;s[1]=s[1]+T|0;s[2]=s[2]+D|0;s[3]=s[3]+k|0},_doFinalize:function t(){var i=this._data,n=i.words,r=8*this._nDataBytes,a=8*i.sigBytes;n[a>>>5]|=128<<24-a%32;var o=e.floor(r/4294967296);n[(a+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;n[(a+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360;i.sigBytes=4*(n.length+1);this._process();i=this._hash;n=i.words;for(r=0;4>r;r++){a=n[r],n[r]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360}return i},clone:function e(){var t=u.clone.call(this);t._hash=this._hash.clone();return t}});o.MD5=u._createHelper(s);o.HmacMD5=u._createHmacHelper(s)})(Math);(function(){var e=n,t=e.lib,i=t.Base,r=t.WordArray,t=e.algo,a=t.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function e(t){this.cfg=this.cfg.extend(t)},compute:function e(t,i){for(var n=this.cfg,a=n.hasher.create(),o=r.create(),s=o.words,l=n.keySize,n=n.iterations;s.length<l;){u&&a.update(u);var u=a.update(t).finalize(i);a.reset();for(var f=1;f<n;f++){u=a.finalize(u),a.reset()}o.concat(u)}o.sigBytes=4*l;return o}});e.EvpKDF=function(e,t,i){return a.create(i).compute(e,t)}})();n.lib.Cipher||function(e){var t=n,i=t.lib,r=i.Base,a=i.WordArray,o=i.BufferedBlockAlgorithm,s=t.enc.Base64,l=t.algo.EvpKDF,u=i.Cipher=o.extend({cfg:r.extend(),createEncryptor:function e(t,i){return this.create(this._ENC_XFORM_MODE,t,i)},createDecryptor:function e(t,i){return this.create(this._DEC_XFORM_MODE,t,i)},init:function e(t,i,n){this.cfg=this.cfg.extend(n);this._xformMode=t;this._key=i;this.reset()},reset:function e(){o.reset.call(this);this._doReset()},process:function e(t){this._append(t);return this._process()},finalize:function e(t){t&&this._append(t);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function e(t){return{encrypt:function e(i,n,r){return("string"==typeof n?v:p).encrypt(t,i,n,r)},decrypt:function e(i,n,r){return("string"==typeof n?v:p).decrypt(t,i,n,r)}}}});i.StreamCipher=u.extend({_doFinalize:function e(){return this._process(!0)},blockSize:1});var f=t.mode={},h=function t(i,n,r){var a=this._iv;a?this._iv=e:a=this._prevBlock;for(var o=0;o<r;o++){i[n+o]^=a[o]}},c=(i.BlockCipherMode=r.extend({createEncryptor:function e(t,i){return this.Encryptor.create(t,i)},createDecryptor:function e(t,i){return this.Decryptor.create(t,i)},init:function e(t,i){this._cipher=t;this._iv=i}})).extend();c.Encryptor=c.extend({processBlock:function e(t,i){var n=this._cipher,r=n.blockSize;h.call(this,t,i,r);n.encryptBlock(t,i);this._prevBlock=t.slice(i,i+r)}});c.Decryptor=c.extend({processBlock:function e(t,i){var n=this._cipher,r=n.blockSize,a=t.slice(i,i+r);n.decryptBlock(t,i);h.call(this,t,i,r);this._prevBlock=a}});f=f.CBC=c;c=(t.pad={}).Pkcs7={pad:function e(t,i){for(var n=4*i,n=n-t.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4){o.push(r)}n=a.create(o,n);t.concat(n)},unpad:function e(t){t.sigBytes-=t.words[t.sigBytes-1>>>2]&255}};i.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:c}),reset:function e(){u.reset.call(this);var t=this.cfg,i=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,i&&i.words)},_doProcessBlock:function e(t,i){this._mode.processBlock(t,i)},_doFinalize:function e(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var i=this._process(!0)}else i=this._process(!0),t.unpad(i);return i},blockSize:4});var d=i.CipherParams=r.extend({init:function e(t){this.mixIn(t)},toString:function e(t){return(t||this.formatter).stringify(this)}}),f=(t.format={}).OpenSSL={stringify:function e(t){var i=t.ciphertext;t=t.salt;return(t?a.create([1398893684,1701076831]).concat(t).concat(i):i).toString(s)},parse:function e(t){t=s.parse(t);var i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var n=a.create(i.slice(2,4));i.splice(0,4);t.sigBytes-=16}return d.create({ciphertext:t,salt:n})}},p=i.SerializableCipher=r.extend({cfg:r.extend({format:f}),encrypt:function e(t,i,n,r){r=this.cfg.extend(r);var a=t.createEncryptor(n,r);i=a.finalize(i);a=a.cfg;return d.create({ciphertext:i,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function e(t,i,n,r){r=this.cfg.extend(r);i=this._parse(i,r.format);return t.createDecryptor(n,r).finalize(i.ciphertext)},_parse:function e(t,i){return"string"==typeof t?i.parse(t,this):t}}),t=(t.kdf={}).OpenSSL={execute:function e(t,i,n,r){r||(r=a.random(8));t=l.create({keySize:i+n}).compute(t,r);n=a.create(t.words.slice(i),4*n);t.sigBytes=4*i;return d.create({key:t,iv:n,salt:r})}},v=i.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function e(t,i,n,r){r=this.cfg.extend(r);n=r.kdf.execute(n,t.keySize,t.ivSize);r.iv=n.iv;t=p.encrypt.call(this,t,i,n.key,r);t.mixIn(n);return t},decrypt:function e(t,i,n,r){r=this.cfg.extend(r);i=this._parse(i,r.format);n=r.kdf.execute(n,t.keySize,t.ivSize,i.salt);r.iv=n.iv;return p.decrypt.call(this,t,i,n.key,r)}})}();(function(){for(var e=n,t=e.lib.BlockCipher,i=e.algo,r=[],a=[],o=[],s=[],l=[],u=[],f=[],h=[],c=[],d=[],p=[],v=0;256>v;v++){p[v]=128>v?v<<1:v<<1^283}for(var y=0,m=0,v=0;256>v;v++){var g=m^m<<1^m<<2^m<<3^m<<4,g=g>>>8^g&255^99;r[y]=g;a[g]=y;var S=p[y],b=p[S],w=p[b],_=257*p[g]^16843008*g;o[y]=_<<24|_>>>8;s[y]=_<<16|_>>>16;l[y]=_<<8|_>>>24;u[y]=_;_=16843009*w^65537*b^257*S^16843008*y;f[g]=_<<24|_>>>8;h[g]=_<<16|_>>>16;c[g]=_<<8|_>>>24;d[g]=_;y?(y=S^p[p[p[w^S]]],m^=p[p[m]]):y=m=1}var P=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=t.extend({_doReset:function e(){for(var t=this._key,i=t.words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],o=0;o<t;o++){if(o<n)a[o]=i[o];else{var s=a[o-1];o%n?6<n&&4==o%n&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[s&255]):(s=s<<8|s>>>24,s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[s&255],s^=P[o/n|0]<<24);a[o]=a[o-n]^s}}i=this._invKeySchedule=[];for(n=0;n<t;n++){o=t-n,s=n%4?a[o]:a[o-4],i[n]=4>n||4>=o?s:f[r[s>>>24]]^h[r[s>>>16&255]]^c[r[s>>>8&255]]^d[r[s&255]]}},encryptBlock:function e(t,i){this._doCryptBlock(t,i,this._keySchedule,o,s,l,u,r)},decryptBlock:function e(t,i){var n=t[i+1];t[i+1]=t[i+3];t[i+3]=n;this._doCryptBlock(t,i,this._invKeySchedule,f,h,c,d,a);n=t[i+1];t[i+1]=t[i+3];t[i+3]=n},_doCryptBlock:function e(t,i,n,r,a,o,s,l){for(var u=this._nRounds,f=t[i]^n[0],h=t[i+1]^n[1],c=t[i+2]^n[2],d=t[i+3]^n[3],p=4,v=1;v<u;v++){var y=r[f>>>24]^a[h>>>16&255]^o[c>>>8&255]^s[d&255]^n[p++],m=r[h>>>24]^a[c>>>16&255]^o[d>>>8&255]^s[f&255]^n[p++],g=r[c>>>24]^a[d>>>16&255]^o[f>>>8&255]^s[h&255]^n[p++],d=r[d>>>24]^a[f>>>16&255]^o[h>>>8&255]^s[c&255]^n[p++],f=y,h=m,c=g}y=(l[f>>>24]<<24|l[h>>>16&255]<<16|l[c>>>8&255]<<8|l[d&255])^n[p++];m=(l[h>>>24]<<24|l[c>>>16&255]<<16|l[d>>>8&255]<<8|l[f&255])^n[p++];g=(l[c>>>24]<<24|l[d>>>16&255]<<16|l[f>>>8&255]<<8|l[h&255])^n[p++];d=(l[d>>>24]<<24|l[f>>>16&255]<<16|l[h>>>8&255]<<8|l[c&255])^n[p++];t[i]=y;t[i+1]=m;t[i+2]=g;t[i+3]=d},keySize:8});e.AES=t._createHelper(i)})();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){var e=function(){function e(){r(this,e)}n(e,[{key:"createClientObject",value:function e(t,i,n,r){return{socket:t,id:i,playURL:n,deviceSerial:r.deviceSerial||"",verificationCode:r.verificationCode||"",resolve:null,reject:null}}},{key:"playCmd",value:function e(t){var i={sequence:0,cmd:"realplay",deviceSerial:t.deviceSerial,verificationCode:t.verificationCode,url:t.playURL};return JSON.stringify(i)}},{key:"playbackCmd",value:function e(t,i,n){var r={sequence:0,cmd:"playback",deviceSerial:t.deviceSerial,verificationCode:t.verificationCode,url:t.playURL,startTime:i,endTime:n};return JSON.stringify(r)}}]);return e}();return e}();t.LocalService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=0;var o=1;var s=2;var l=3;var u=4;var f=5;var h=6;var c=7;var d=11;var p=12;var v=13;var y=14;var m=15;var g=16;var S=17;var b=18;var w=19;var _=20;var P=21;var C=22;var x=24;var T=25;var D=26;var k=27;var M=28;var R=29;var E=30;var I=31;var z=33;var A=34;var O=99;var B=40;var F=41;var L=42;var q=43;var N=44;var H=45;var W=46;var U=47;var j=48;var G=60;var V=61;var J=62;var Y=63;var X=71;var K=72;var $=73;var Z=74;var Q=75;var ee=76;var te=77;var ie=78;var ne=79;var re=1;var ae=1;var oe=2;var se=3;var le=4;var ue=1;var fe=2;var he=8;var ce=16;var de=8e3;var pe=16e3;var ve=24e3;var ye=32e3;var me=48e3;var ge=64e3;var Se={AUDIO_G711_U:28944,AUDIO_G711_A:28945,AUDIO_G722_1:29217,AUDIO_G726_U:29280,AUDIO_G726_A:29281,AUDIO_G726_2:29282,AUDIO_AACLC:8193,AUDIO_MPEG:8192,AUDIO_NULL:0};var be=0;var we=1;var _e=1;var Pe=256;var Ce=28944;var xe=28945;var Te=0;var De=1;var ke="BMP";var Me="JPEG";var Re=0;var Ee=1;var Ie=15;var ze=8;var Ae=1;var Oe=25;var Be=20;var Fe=5;var Le=5*1024*1024;var qe=5e3;var Ne=500;var He=10;var We=10;var Ue=100;var je={left:0,top:0,right:0,bottom:0};var Ge=false;var Ve=false;var Je=false;var Ye={id:null,cmd:null,data:null,errorCode:0,status:null};var Xe=t.JSPlayCtrl=function(){function e(t,i,n){r(this,e);if(t!=null&&t!==undefined&&typeof t==="string"){this.szBasePath=t}else{return o}if(i&&typeof i==="function"){this.fnCallBack=i}else{return o}this.decodeWorker=null;this.streamOpenMode=null;this.bOpenStream=false;this.audioRenderer=null;this.aAudioBuffer=[];this.iAudioBufferSize=0;this.aAudioEncBuffer=[];this.iAudioEncBufferSize=0;this.bWriteAudEnc=true;this.bWriteYUVData=false;this.iYUV10size=0;this.aVideoYUVBuffer=[];this.bWritePCMData=false;this.iAudioBuffer500Size=0;this.aAudioPCMBuffer=[];this.bWriteRawData=false;this.iRawDataSize=0;this.aRawDataBuffer=[];this.oSuperRender=null;this.aVideoFrameBuffer=[];this.YUVBufferSize=Ae;this.szOSDTime=null;this.bPlaySound=false;this.bPlay=false;this.bPause=false;this.bOnebyOne=false;this.bPlayRateChange=false;this.bAudioTypeSupport=true;this.bOnlyPlaySound=false;this.dataCallBackFun=null;this.YUVBufSizeCBFun=null;this.AudEncodeDataCBFun=null;this.nWidth=0;this.nHeight=0;this.sCanvasId=null;this.aDisplayBuf=null;this.bVisibility=true;this.nDecFrameType=Re;this.iCanvasWidth=0;this.iCanvasHeight=0;this.iZoomNum=0;this.iRatio_x=1;this.iRatio_y=1;this.stDisplayRect={top:0,left:0,right:0,bottom:0};this.bDisRect=false;this.stYUVRect={top:0,left:0,right:0,bottom:0};this.aInputDataLens=[];this.aInputDataBuffer=[];this.bIsGetYUV=false;this.bIsFirstFrame=true;this.iInputMaxBufSize=Le;this.bIsInput=false;this.bIsInputBufOver=false;this.iInputDataLen=qe;var l=this;this.setCallBack=function(e,t,i,r,a){var o=Ye;o.id=n;o.cmd=t;o.data=i;o.errorCode=r;o.status=a;e.fnCallBack(o)};if(!Ge){Ge=true;var u=document.createElement("script");u.type="text/javascript";u.src=l.szBasePath+"AudioRenderer.js";var f=document.getElementsByTagName("head")[0];f.appendChild(u);u.onload=u.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){if(Je){console.log(">>>JS AudioRenderer.js load finish!")}}}}if(!Ve){Ve=true;var h=document.createElement("script");h.type="text/javascript";h.src=l.szBasePath+"SuperRender_10.js";var c=document.getElementsByTagName("head")[0];c.appendChild(h);h.onload=h.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){if(Je){console.log(">>>JS SuperRender_10.js load finish!")}}}}this.convertErrorCode=function(e){switch(e){case 1:return a;case 98:return o;default:return e}};this.arrayBufferCopy=function(e){var t=e.byteLength;var i=new Uint8Array(t);var n=new Uint8Array(e);var r=0;for(r=0;r<t;r++){i[r]=n[r]}return i};this.inputDataFun=function(){var e;var t=0;l.bIsGetYUV=false;if(l.bIsInputBufOver){if(Je){console.log(">>>JS inputDataFun over!")}e=new Uint8Array(1)}else{while(l.aInputDataLens.length>0){t+=l.aInputDataLens.shift();if(t>l.iInputDataLen){break}}e=l.aInputDataBuffer.splice(0,t);if(Je){console.log(">>>JS inputDataFun-len:%d",t)}}var i=new Uint8Array(e);var n={command:"InputData",data:i.buffer,dataSize:t};if(this.bOnlyPlaySound){if(Je){console.log(">>>JS inputDataFun-len 1-2 size:%d",t)}l.decodeWorker.postMessage(n,[n.data])}else{if(l.bPlay){if(!l.bPause){l.decodeWorker.postMessage(n,[n.data])}else{if(l.bOnebyOne){l.decodeWorker.postMessage(n,[n.data])}}}}e=null;i=null};this.getPic=function(e,t){if(this.decodeWorker==null||this.oSuperRender==null){return s}if(!this.bPlay){return s}if(e&&typeof e==="function"){this.dataCallBackFun=e}else{return o}if(0===this.iZoomNum){this.stYUVRect.left=0;this.stYUVRect.top=0;this.stYUVRect.right=0;this.stYUVRect.bottom=0}else{if(0===this.iCanvasWidth||0===this.iCanvasHeight){this.stYUVRect.left=0;this.stYUVRect.top=0;this.stYUVRect.right=0;this.stYUVRect.bottom=0}else{var i=this.nWidth/this.iCanvasWidth;var n=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*i);this.stYUVRect.top=Math.round(this.stDisplayRect.top*n);this.stYUVRect.right=Math.round(this.stDisplayRect.right*i);this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*n)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32){return o}}if(this.aDisplayBuf==null){return s}var r=this.arrayBufferCopy(this.aDisplayBuf);var l={command:t,data:r.buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};if(Je){console.log(">>>JS capture nWidth = %d,nWidth = %d",this.nWidth,this.nHeight)}this.decodeWorker.postMessage(l,[l.data]);return a};this.createWorker=function(e){if(window.Worker){if(this.decodeWorker==null){this.decodeWorker=new Worker(l.szBasePath+"DecodeWorker.js");if(this.decodeWorker==null){return G}}this.decodeWorker.onmessage=function(t){var i=null;var n=t.data;switch(n.function){case"printLog":console.log("print JSPlayerSDK log failed");break;case"loaded":i="loaded";e.setCallBack(e,"loaded",0,0,true);break;case"SetStreamOpenMode":i="SetStreamOpenMode";break;case"OpenStream":i="OpenStream";if(1===n.errorCode){l.bOpenStream=true;return}break;case"InputData":i="InputData";if(n.errorCode===d){l.bIsInputBufOver=true;l.inputDataFun();if(Je){console.log(">>>JS InputData PLAYM4_BUF_OVER")}}if(n.errorCode===I){l.bIsInputBufOver=false;if(Je){console.log(">>>JS InputData PLAYM4_NEED_MORE_DATA")}}break;case"GetFrameData":i="GetFrameData";if(!l.bOnlyPlaySound){if(Je){console.log(">>>JS mainthread display GetFrameData 1-1")}if(n.data!=null&&n.frameInfo!=null){var r=n.frameInfo.width;var a=n.frameInfo.height}if(!l.bPlay){return}if(!l.bIsFirstFrame&&n.errorCode===I){l.bIsInputBufOver=false;setTimeout(l.inputDataFun(),5);break}else if(l.bIsInputBufOver){l.inputDataFun()}else{if(n.type==="videoType"){if(l.aInputDataLens.length>0&&l.bIsInput){l.inputDataFun();l.bIsInput=false}else{l.bIsGetYUV=true}l.bIsFirstFrame=false}}}if(Je){console.log(">>>JS mainthread display GetFrameData bVisibility:"+l.bVisibility)}if(l.bVisibility){switch(n.type){case"videoType":if(Je){console.log(">>>JS mainthread display GetFrameData type:"+n.type)}if(n.data==null||n.frameInfo==null){return o}l.bIsFirstFrame=false;e.nWidth=n.frameInfo.width;e.nHeight=n.frameInfo.height;var s=new Object;s.data=n.data;s.osdTime=n.osd;s.nWidth=n.frameInfo.width;s.nHeight=n.frameInfo.height;if(e.bWriteYUVData){var u=new Uint8Array(n.data);var f=e.aVideoYUVBuffer.length;for(var h=0,c=u.length;h<c;h++){e.aVideoYUVBuffer[f+h]=u[h]}e.iYUV10size++;u=null}if(e.bWriteYUVData&&e.iYUV10size>=We){var p=new Uint8Array(e.aVideoYUVBuffer);e.downloadFile(p,"videoYUV.data");e.bWriteYUVData=false;e.iYUV10size=0;p=null}if(Je){console.log(">>>JS mainthread getVideoInfo Width:%d, Height:%d",s.nWidth,s.nHeight)}e.aVideoFrameBuffer.push(s);s=null;var v=e.aVideoFrameBuffer.length;if(v>Be){if(Je){console.log(">>>JS render loose frame iYUVNum:%d",v)}if(!e.bOnebyOne){e.aVideoFrameBuffer.splice(0,Fe)}}if(e.bOnebyOne){if(e.aVideoFrameBuffer.length>=Ie){e.setCallBack(e,"OnebyOne",0,0,false);e.bIsFirstFrame=true;break}}break;case"audioType":if(Je){console.log(">>>JS mainthread display GetFrameData 2-3 type:"+n.type+".bOnlyPlaySound:"+l.bOnlyPlaySound)}if(e.bPlaySound&&!e.bPlayRateChange||l.bOnlyPlaySound){if(Je){console.log(">>>JS mainthread display GetFrameData 2-4 type"+n.type+"bOnlyPlaySound:"+l.bOnlyPlaySound)}var u=new Uint8Array(n.data);var f=e.aAudioBuffer.length;for(var h=0,c=u.length;h<c;h++){e.aAudioBuffer[f+h]=u[h]}e.iAudioBufferSize++;u=null;if(Je){console.log(">>>JS play sound 1 iAudioBufferNum:%d, BufferLen:%d",e.iAudioBufferSize,e.aAudioBuffer.length)}if(e.bWritePCMData){var u=new Uint8Array(n.data);var f=e.aAudioPCMBuffer.length;for(var h=0,c=u.length;h<c;h++){e.aAudioPCMBuffer[f+h]=u[h]}e.iAudioBuffer500Size++;u=null}if(e.bWritePCMData&&e.iAudioBuffer500Size>=He){var y=new Uint8Array(e.aAudioPCMBuffer);e.downloadFile(y,"audioPCM.data");e.bWritePCMData=false;e.iAudioBuffer500Size=0;y=null}if(e.iAudioBufferSize>=Oe){if(Je){console.log(">>>JS play sound 2 iAudioBufferNum:%d, BufferLen:%d",e.iAudioBufferSize,e.aAudioBuffer.length)}e.audioRenderer.Play(e.aAudioBuffer,e.aAudioBuffer.length,n.frameInfo);if(Je){console.log(">>>JS mainthread display Audio push 3 sysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}e.aAudioBuffer.splice(0,e.aAudioBuffer.length);e.aAudioBuffer.length=0;e.iAudioBufferSize=0}}break;case"privateType":if(Je){console.log(">>>JS mainthread display GetFrameData 2-5 type"+n.type+"bOnlyPlaySound:"+l.bOnlyPlaySound)}break;default:if(Je){console.log(">>>JS mainthread display GetFrameData 2-6 type:"+n.type+",bOnlyPlaySound:"+l.bOnlyPlaySound)}break}}break;case"GetRawData":if(e.bWriteRawData){var m=new Uint8Array(n.data);var S=e.aRawDataBuffer.length;for(var h=0,c=m.length;h<c;h++){e.aRawDataBuffer[S+h]=m[h]}e.iRawDataSize++;m=null}if(e.bWriteRawData&&e.iRawDataSize>=Ue){var b=new Uint8Array(e.aRawDataBuffer);e.downloadFile(b,"rawBuffer.data");e.bWriteRawData=false;e.iRawDataSize=0;b=null}break;case"PlaySound":i="PlaySound";break;case"GetJPEG":i="GetJPEG";var w=n.data;e.dataCallBackFun(w);break;case"GetBMP":i="GetBMP";var _=n.data;e.dataCallBackFun(_);break;case"GetAudEncodeData":if(Je){console.log(">>>JS MainThread-GetAudEncodeData 1")}i="GetAudEncodeData";if(re===n.errorCode){if(l.AudEncodeDataCBFun!=null){if(Je){console.log(">>>JS MainThread-GetAudEncodeData 1-2")}l.AudEncodeDataCBFun(new Uint8Array(n.data))}if(this.bWriteAudEnc){var u=new Uint8Array(n.data);var f=e.aAudioEncBuffer.length;for(var h=0,c=u.length;h<c;h++){e.aAudioEncBuffer[f+h]=u[h]}e.iAudioEncBufferSize++;u=null}if(this.bWriteAudEnc&&e.iAudioEncBufferSize>=Ne){e.downloadFile(e.aAudioEncBuffer,audioEnc.data);this.bWriteAudEnc=false;e.iAudioEncBufferSize=0}}else{if(Je){console.log(">>>JS MainThread-GetAudEncodeData 2 err")}}break;default:break}if("GetFrameData"!==i||"GetAudEncodeData"!==i){e.setCallBack(e,i,0,e.convertErrorCode(n.errorCode),true)}else{if(g===n.errorCode){e.setCallBack(e,i,0,e.convertErrorCode(n.errorCode),true)}}}}};this.createWorker(l);this.draw=function(){if(l.bPlay){if(!l.bPause){requestAnimationFrame(l.draw)}var e=l.aVideoFrameBuffer.length;if(l.YUVBufSizeCBFun!=null){l.YUVBufSizeCBFun(e)}if(l.bOnebyOne){if(e<=ze){l.setCallBack(l,"OnebyOne",0,I,true)}}if(Je){console.log(">>>JS aVideoFrameBuffer.length == "+e)}if(e>l.YUVBufferSize){var t=l.aVideoFrameBuffer.shift();l.aDisplayBuf=t.data;var i=new Uint8Array(l.aDisplayBuf);if((l.nWidth==1920&&l.nHeight==1088||l.nWidth==2688&&l.nHeight==1520)&&!l.bDisRect){var n=document.getElementById(l.sCanvasId).getBoundingClientRect();var r=n.width;var a=n.height-8;l.stDisRect={top:0,left:0,right:r,bottom:a};l.oSuperRender.SR_SetDisplayRect(l.stDisRect)}else if(l.nWidth==640&&l.nHeight==368&&!l.bDisRect){var n=document.getElementById(l.sCanvasId).getBoundingClientRect();var r=n.width;var a=Math.floor(n.height*360/368);l.stDisRect={top:0,left:0,right:r,bottom:a};l.oSuperRender.SR_SetDisplayRect(l.stDisRect)}if(Je){console.log(">>>JS SR_DisplayFrameData 1 nWidth:%d, nHeight:%d, nWidth1:%d, nHeight1:%d",t.nWidth,t.nHeight,l.nWidth,l.nHeight)}l.oSuperRender.SR_DisplayFrameData(t.nWidth,t.nHeight,i);if(Je){console.log(">>>JS SR_DisplayFrameData 2 nWidth:%d, nHeight:%d, nWidth1:%d, nHeight1:%d",t.nWidth,t.nHeight,l.nWidth,l.nHeight)}i=null;l.szOSDTime=t.osdTime;t=null}}else{if(!l.bPlay){if(Je){console.log(">>>JS mainThread stop play jsplaySDKInterface")}l.aVideoFrameBuffer.splice(0,l.aVideoFrameBuffer.length);l.aAudioBuffer.splice(0,l.aAudioBuffer.length)}}};this.checkAudioType=function(e){var t=function e(t,i){var n=t[i]&255|(t[i+1]&255)<<8|(t[i+2]&255)<<16|(t[i+3]&255)<<24;return n};var i=[e[12],e[13],0,0];var n=t(i,0);switch(n){case Se.AUDIO_G711_A:case Se.AUDIO_G711_U:case Se.AUDIO_G722_1:case Se.AUDIO_G726_2:case Se.AUDIO_G726_A:case Se.AUDIO_G726_U:case Se.AUDIO_AACLC:case Se.AUDIO_MPEG:return a;default:return g}}}n(e,[{key:"OpenPlayerSDKPrintLog",value:function e(){Je=true;this.decodeWorker.postMessage({command:"printLog"})}},{key:"DownloadYUVdata",value:function e(){this.bWriteYUVData=true}},{key:"DownloadPCMdata",value:function e(){this.bWritePCMData=true}},{key:"PlayM4_SetStreamOpenMode",value:function e(t){if(t==null||t===undefined){return o}if(t!==Te&&t!==De){return o}this.streamOpenMode=t;if(Je){console.log(">>>JS PlayM4_SetStreamOpenMode nMode:"+t)}return a}},{key:"PlayM4_OpenStream",value:function e(t,i,n){if(Je){console.log(">>>JS PlayM4_OpenStream 1 nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}if(this.decodeWorker==null){return s}if(t==null||i<=0||n<=0){return o}this.bPlay=false;this.bPause=false;this.bOnebyOne=false;this.bIsFirstFrame=true;this.bIsGetYUV=false;this.bIsInput=false;var r=this.checkAudioType(t);if(a!==r){this.bAudioTypeSupport=false}else{this.bAudioTypeSupport=true}this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode});if(Je){console.log(">>>JS PlayM4_OpenStream 2 nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}this.decodeWorker.postMessage({command:"OpenStream",data:t,dataSize:i,bufPoolSize:n});if(Je){console.log(">>>JS PlayM4_OpenStream 3 nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}this.bOpenStream=true;return a}},{key:"PlayM4_CloseStream",value:function e(){if(Je){console.log(">>>JS PlayM4_CloseStream 1 nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}if(this.decodeWorker===null||this.bOpenStream===false){return s}this.bOnlyPlaySound=false;this.PlayM4_Stop();this.decodeWorker.postMessage({command:"CloseStream"});if(this.oSuperRender!==null){this.oSuperRender.SR_Destroy();this.oSuperRender=null}if(this.audioRenderer!==null){this.audioRenderer.Stop();this.audioRenderer=null}this.aAudioBuffer.splice(0,this.aAudioBuffer.length);this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length);this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length);this.aInputDataLens.splice(0,this.aInputDataLens.length);this.bOpenStream=false;this.iAudioBufferSize=0;this.szOSDTime=null;return a}},{key:"PlayM4_Destroy",value:function e(){if(Je){console.log(">>>JS PlayM4_Destroy 1 nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}if(this.decodeWorker===null){return a}this.PlayM4_CloseStream();this.decodeWorker.terminate();this.decodeWorker=null;return a}},{key:"PlayM4_InputData",value:function e(t,i){if(this.decodeWorker===null||this.bOpenStream===false){return s}var n=this.aInputDataBuffer.length;if(i===4){var r=new Uint8Array(t.buffer);if(r[0]===1&&r[1]===2&&r[2]===3&&r[3]===4){if(Je){console.log(">>>JS PlaySDKInterface PlayM4_InputData:intput end")}if(this.bIsFirstFrame){this.inputDataFun()}else{if(this.bIsGetYUV){this.inputDataFun()}else{this.bIsInput=true}}r=null;return a}}if(n>this.iInputMaxBufSize){console.log("input over\n");return d}var o=null;var l=i;switch(this.streamOpenMode){case De:o=new Uint8Array(t.buffer);this.aInputDataLens.push(i);break;case Te:l=i+4;var u=new Uint32Array([i]);var f=new Uint8Array(u.buffer);o=new Uint8Array(l);o.set(f,0);o.set(t,4);u=null;f=null;this.aInputDataLens.push(i+4);break;default:return g}for(var h=0;h<l;h++){this.aInputDataBuffer[n+h]=o[h]}o=null;if(Je){console.log(">>>JS PlayM4_InputData 1： nSize:%d, iInputBufLen:%d, iInputMaxBufSize;%d",i,this.aInputDataBuffer.length,this.iInputMaxBufSize)}if(this.bOnlyPlaySound){if(Je){console.log(">>>JS PlayM4_InputData: OnlyPlaySound")}this.inputDataFun()}else{if(this.bIsFirstFrame){if(Je){console.log(">>>JS PlayM4_InputData is firstFrame:")}this.inputDataFun()}else{if(this.bIsGetYUV){if(Je){console.log(">>>JS PlayM4_InputData is GetYUV")}this.inputDataFun()}else{if(Je){console.log(">>>JS PlayM4_InputData 1-3 sysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds())}this.bIsInput=true}}}return a}},{key:"PlayM4_Play",value:function e(t){if(this.decodeWorker===null){return s}if(Je){console.log(">>>JS PlayM4_Play canvasID: "+t)}if(t===null){this.bOnlyPlaySound=true;this.sCanvasId=null}else{if(typeof t!=="string"){return o}if(this.bOnebyOne){this.bPlayRateChange=false;this.bOnebyOne=false;this.bPause=false;this.draw()}if(this.bPlay){return a}if(this.oSuperRender==null){this.oSuperRender=new SuperRender(t,this.szBasePath);if(this.oSuperRender==null){return V}}this.sCanvasId=t;this.bPlay=true;this.bPause=false;this.bOnebyOne=false;this.bPlaySound=false;this.bPlayRateChange=false;this.bOnlyPlaySound=false;this.draw()}if(this.audioRenderer==null){this.audioRenderer=new AudioRenderer;if(this.audioRenderer==null){return V}}return a}},{key:"PlayM4_Stop",value:function e(){if(Je){console.log(">>>JS PlayM4_Stop 1")}if(this.decodeWorker==null||this.oSuperRender==null){return s}if(!this.bPlay){return s}if(this.bPlaySound){this.PlayM4_StopSound();this.bPlaySound=true}this.bPlay=false;this.bOnebyOne=false;this.bPause=false;this.oSuperRender.SR_SetDisplayRect(null);this.iZoomNum=0;this.bDisRect=false;this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,null);if(Je){console.log(">>>JS PlayM4_Stop 2")}return a}},{key:"PlayM4_PlayRate",value:function e(t){if(this.decodeWorker==null){return s}if(t===1){this.bPlayRateChange=false}else{this.bPlayRateChange=true}if(t<1){t=1}this.iInputDataLen=t*qe;return a}},{key:"PlayM4_Pause",value:function e(t){if(this.decodeWorker==null||this.oSuperRender==null){return s}if(!this.bPlay){return s}if(this.bOnebyOne){return s}if(typeof t!=="boolean"){return o}this.bPause=t;this.bIsFirstFrame=true;if(Je){console.log(">>>JS PlayM4_Pause");console.log(t)}if(t){if(this.bPlaySound){this.PlayM4_StopSound();this.bPlaySound=true}}else{if(this.bPlaySound){this.PlayM4_PlaySound()}this.draw()}return a}},{key:"PlayM4_OneByOne",value:function e(){if(this.decodeWorker==null||this.oSuperRender==null){return s}if(!this.bPlay){return s}this.iInputDataLen=qe;this.bPause=true;this.bOnebyOne=true;this.bPlayRateChange=true;this.draw();return a}},{key:"PlayM4_PlaySound",value:function e(t){if(this.decodeWorker===null||this.bOpenStream===false){return s}if(!this.bAudioTypeSupport){return g}if(t<0||t>16){return o}if(this.audioRenderer==null){this.audioRenderer=new AudioRenderer;if(this.audioRenderer==null){return V}}this.audioRenderer.SetWndNum(t);this.bPlaySound=true;return a}},{key:"PlayM4_StopSound",value:function e(){if(this.decodeWorker==null||this.audioRenderer==null){return s}if(!this.bPlaySound){return s}this.bPlaySound=false;return a}},{key:"PlayM4_SetDisplayBuf",value:function e(t){if(this.decodeWorker==null){return s}if(t<=0){return o}this.YUVBufferSize=t;return a}},{key:"PlayM4_SetSecretKey",value:function e(t,i,n){if(this.decodeWorker==null||this.bOpenStream===false){return s}if(i==null){return o}if(we===t){if(128===n){if(i==null||i===undefined){return o}}else{return o}}else if(be===t){}else{return o}this.decodeWorker.postMessage({command:"SetSecretKey",data:i,nKeyType:t,nKeyLen:n});return a}},{key:"PlayM4_SetDecodeFrameType",value:function e(t){if(this.decodeWorker==null||this.oSuperRender==null){return s}if(t!==Re&&t!==Ee){return o}if(Je){console.log(">>>JS PlayM4_SetDecodeFrameType");console.log(t)}this.nDecFrameType=t;this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:t});return a}},{key:"PlayM4_SetIFrameDecInterval",value:function e(t){if(this.nDecFrameType!==Ee){return s}if(t<0){return o}this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:t});return a}},{key:"PlayM4_SetDisplayRegion",value:function e(t,i){if(this.decodeWorker===null||this.bPlay===false||this.oSuperRender===null){return s}if(this.canvasId===null){return s}if(i===true){if(t===null||t===undefined){return o}if(typeof t.left==="number"&&typeof t.top==="number"&&typeof t.right==="number"&&typeof t.bottom==="number"){if(t.right<0||t.left<0||t.top<0||t.bottom<0){return o}var n=t.left;var r=t.right;var l=t.top;var u=t.bottom;var f=document.getElementById(this.sCanvasId).getBoundingClientRect();this.iCanvasWidth=f.width;this.iCanvasHeight=f.height;if(r-n<16||u-l<16||r-n>this.iCanvasWidth||u-l>this.iCanvasHeight){return o}if(this.iZoomNum!==0){n=Math.round(n/this.iRatio_x)+this.stDisplayRect.left;l=Math.round(l/this.iRatio_y)+this.stDisplayRect.top;r=Math.round(r/this.iRatio_x)+this.stDisplayRect.left;u=Math.round(u/this.iRatio_y)+this.stDisplayRect.top}this.stDisplayRect={top:l,left:n,right:r,bottom:u};this.oSuperRender.SR_SetDisplayRect(this.stDisplayRect);this.bDisRect=true;var h=r-n;var c=u-l;this.iRatio_x=this.iCanvasWidth/h;this.iRatio_y=this.iCanvasHeight/c;this.iZoomNum++}else{return o}}else{this.oSuperRender.SR_SetDisplayRect(null);this.iZoomNum=0;this.bDisRect=false}if(this.bPause||this.bOnebyOne||this.bPlayRateChange){this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,new Uint8Array(this.aDisplayBuf))}return a}},{key:"PlayM4_GetBMP",value:function e(t){return this.getPic(t,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function e(t){return this.getPic(t,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function e(t){if(this.decodeWorker==null){return s}if(this.audioRenderer==null){return s}if(t<0||t>100){return o}this.audioRenderer.SetVolume(t/100);return a}},{key:"PlayM4_GetVolume",value:function e(t){if(this.decodeWorker==null){return s}if(this.audioRenderer==null){return s}if(t&&typeof t==="function"){var i=this.audioRenderer.GetVolume();if(i===null){return Y}else{t(Math.round(i*10)*10);return a}}else{return o}}},{key:"PlayM4_GetOSDTime",value:function e(t){if(this.decodeWorker==null){return s}if(!this.bPlay){return s}if(t&&typeof t==="function"){t(this.szOSDTime);return a}else{return o}}},{key:"PlayM4_IsVisible",value:function e(t){this.bVisibility=t;if(Je){console.log(">>>JS PlayM4_IsVisible visibility:"+t)}return a}},{key:"PlayM4_GetSdkVersion",value:function e(){return"07020138"}},{key:"PlayM4_GetInputBufSize",value:function e(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function e(t){if(t>0){this.iInputMaxBufSize=t;return a}else{return o}}},{key:"PlayM4_GetYUVBufSize",value:function e(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function e(t){if(this.decodeWorker==null){return s}if(t&&typeof t==="function"){t(this.nWidth,this.nHeight);return a}else{return o}}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function e(t){if(t&&typeof t==="function"){this.YUVBufSizeCBFun=t;return a}else{return o}}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function e(){if(this.YUVBufSizeCBFun!=null){this.YUVBufSizeCBFun=null}return a}},{key:"PlayM4_ClearCanvas",value:function e(){if(this.oSuperRender==null){return s}this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,null);return a}},{key:"PlayM4_ReleaseInputBuffer",value:function e(){if(this.aInputDataBuffer===null){return s}this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length);this.aInputDataLens.splice(0,this.aInputDataLens.length);return a}},{key:"PlayM4_GetDecodeFrameType",value:function e(){return this.nDecFrameType}},{key:"PlayM4_CreateAudEncode",value:function e(t){if(Je){console.log(">>>JS JSMainThread-PlayM4_CreateAudEncode")}if(this.decodeWorker==null){return ne}if(t<ae||t>le){return X}this.decodeWorker.postMessage({command:"CreateAudEncode",encodertype:t});return a}},{key:"PlayM4_SetAudEncodeParam",value:function e(t,i,n,r){if(Je){console.log(">>>JS MainThread-PlayM4_SetAudEncodeParam:nSampleRate:%d nChannel:%d nBitRate:%d nBitWidth:%d",t,i,n,r)}if(this.decodeWorker==null){return ne}if(i!=ue||r!=ce){return X}this.decodeWorker.postMessage({command:"SetAudEncodeParam",samplerate:t,channel:i,bitrate:n,bitwidth:r});return a}},{key:"PlayM4_InputAudEncodeData",value:function e(t,i){if(Je){console.log(">>>JS MainThread-PlayM4_InputAudEncodeData")}if(this.decodeWorker==null){return ne}this.decodeWorker.postMessage({command:"InputAudEncodeData",data:t,dataSize:i});return a}},{key:"PlayM4_DestroyAudEncode",value:function e(){if(Je){console.log(">>>JS MainThread-PlayM4_DestroyAudEncode")}if(this.decodeWorker==null){return ne}this.aAudioEncBuffer.splice(0,this.aAudioEncBuffer.length);this.iAudioEncBufferSize=0;this.decodeWorker.postMessage({command:"DestroyAudEncode"});return a}},{key:"PlayM4_GetAudioEmcBuf",value:function e(){return this.aAudioEncBuffer}},{key:"PlayM4_RegisterAudEncodeCB",value:function e(t){if(Je){console.log(">>>JS MainThread-PlayM4_RegisterAudEncodeCB")}if(t&&typeof t==="function"){this.AudEncodeDataCBFun=t;return a}else{return o}}},{key:"downloadFile",value:function e(t,i){var n=t;if(!(t instanceof Blob||t instanceof File)){n=new Blob([t])}var r=window.URL.createObjectURL(n);var a=window.document.createElement("a");a.href=r;a.download=i;var o=document.createEvent("MouseEvents");o.initEvent("click",true,true);a.dispatchEvent(o)}}]);return e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StorageManager=undefined;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=i(1);var a=s(r);var o=i(0);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u="Web/RecordFiles/";var f="Web/PlaybackFiles/";var h=1e3;var c=1;var d=3001;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.URL=window.URL||window.webkitURL;var p=function(){function e(t,i,n,r){l(this,e);this.szUUID=t;this.szFileName=i;this.iStreamType=n;this.szPath="";this.bStart=false;this.aStreamList=[];this.options=r}n(e,[{key:"init",value:function e(){var t=this;if(0===this.iStreamType){this.szPath=u}else if(1===this.iStreamType){this.szPath=f}this.szPath+=this.getDateDir();var i=t.szPath.split("/");var n=new Promise(function(e){window.requestFileSystem(window.TEMPORARY,t.options.iFileSize,function(n){t.createDir(n.root,i,function(){e()})},t.errorHandler)});return n}},{key:"getDateDir",value:function e(){return o.oTool.dateFormat(new Date,"yyyy-MM-dd")}},{key:"createDir",value:function e(t,i,n){var r=this;if(i.length){t.getDirectory(i[0],{create:true},function(e){r.createDir(e,i.slice(1),n)},r.errorHandler)}else{n()}}},{key:"errorHandler",value:function e(){}},{key:"writeFileHeader",value:function e(t){var i=this;window.requestFileSystem(window.TEMPORARY,i.options.iFileSize,function(e){e.root.getFile(i.szPath+"/"+i.szFileName,{create:true},function(e){e.createWriter(function(e){e.onwriteend=function(){i.bStart=true;i.writeFile(e)};e.onerror=function(){};e.seek(e.length);var n=new Blob([t]);e.write(n)},i.errorHandler)},i.errorHandler)},i.errorHandler)}},{key:"writeFileContent",value:function e(t){this.aStreamList.push(t)}},{key:"writeFile",value:function e(t){var i=this;if(this.bStart){if(this.aStreamList.length>0){var n=this.aStreamList.shift();t.seek(t.length);if(t.length>=this.options.iFileSize){if(this.options.cbEventHandler){this.options.cbEventHandler(d,this.szUUID)}return}var r=new Blob([n]);t.write(r)}else{setTimeout(function(){i.writeFile(t)},h)}}}},{key:"stopWriteFile",value:function e(){var t=this;this.bStart=false;this.aStreamList.length=0;var i=new Promise(function(e){window.requestFileSystem(window.TEMPORARY,t.options.iFileSize,function(i){i.root.getFile(t.szPath+"/"+t.szFileName,{create:false},function(t){t.file(function(t){e();o.oTool.downloadFile(t,t.name)})},t.errorHandler)},t.errorHandler)});return i}}]);return e}();var v=function(){function e(t,i,n,r,a,o,s){l(this,e);this.szBasePath=t;this.szUUID=i;this.szFileName=n;this.aHeadBuf=new Uint8Array(r);this.iPackType=a;this.iStreamType=o;this.oWorker=null;this.oFileSystem=null;this.options=s;this.bHead=true}n(e,[{key:"init",value:function e(){var t=this;var i=new Promise(function(e,i){t.initFileSystem().then(function(){t.initWorker().then(function(){e(t.szUUID)},function(e){i(e)})},function(e){i(e)})});return i}},{key:"initFileSystem",value:function e(){var t=this;this.oFileSystem=new p(this.szUUID,this.szFileName,this.iStreamType,this.options);var i=new Promise(function(e,i){t.oFileSystem.init().then(function(){e()},function(e){i(e)})});return i}},{key:"initWorker",value:function e(){var t=this;var i=new Promise(function(e){t.oWorker=new Worker(t.szBasePath+"/systemTransform-worker.min.js");t.oWorker.onmessage=function(i){var n=i.data;var r=t.iPackType;if(t.options.iPackage===1){r=12}if("loaded"===n.type){t.oWorker.postMessage({type:"create",buf:t.aHeadBuf.buffer,len:40,packType:r},[t.aHeadBuf.buffer])}else if("created"===n.type){e()}else if("outputData"===n.type){var a=new Uint8Array(n.buf);if(t.options.iPackage===1){if(t.bHead){t.oFileSystem.writeFileHeader(a);t.bHead=false}else{t.oFileSystem.writeFileContent(a)}}else{if(c===n.dType){t.oFileSystem.writeFileHeader(a)}else{t.oFileSystem.writeFileContent(a)}}}}});return i}},{key:"inputData",value:function e(t){if(this.oWorker){var i=new Uint8Array(t);this.oWorker.postMessage({type:"inputData",buf:i.buffer,len:i.length},[i.buffer])}}},{key:"stopRecord",value:function e(){var t=this;var i=new Promise(function(e,i){if(t.oWorker){t.oWorker.postMessage({type:"release"})}else{i()}if(t.oFileSystem){t.oFileSystem.stopWriteFile().then(function(){t.bHead=true;e()},function(){i()})}else{i()}});return i}}]);return e}();var y=function(){var e=Symbol("STORAGELIST");var t=function(){function t(i,n){l(this,t);this.szBasePath=i;this[e]={};this.options={iFileSize:1024*1024*1024};Object.assign(this.options,n)}n(t,[{key:"startRecord",value:function t(i,n,r,o,s){var l=this;var u=a.default.v4();var f=Object.assign({},this.options,s);var h=new v(this.szBasePath,u,i,n,r,o,f);var c=new Promise(function(t,i){h.init().then(function(i){l[e][i]=h;t(i)},function(e){i(e)})});return c}},{key:"inputData",value:function t(i,n){var r=this[e][i];if(r){r.inputData(n)}}},{key:"stopRecord",value:function t(i){var n=this;var r=new Promise(function(t,r){var a=n[e][i];if(a){a.stopRecord().then(function(){delete n[e][i];t()},function(){r()})}else{r()}});return r}}]);return t}();return t}();t.StorageManager=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ESCanvas=undefined;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var r=i(4);var a=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){var e=null;var t=Symbol("CANVAS");var i=Symbol("CONTEXT");var r=Symbol("SHAPES");var o=Symbol("DRAWSTATUS");var f=Symbol("SHAPETYPE");var h=Symbol("MAXSHAPENUMSUPPORT");var c=Symbol("SHAPESTYLE");var d=Symbol("POLYGONDRAWING");var p=Symbol("CURRENTSHAPEINFO");var v=Symbol("DRAWSHAPEMULTIONETIME");var y=Symbol("EVENTCALLBACK");function m(){e[i].clearRect(0,0,e.m_iCanvasWidth,e.m_iCanvasHeight);for(var t=0,n=e[r].length;t<n;t++){e[r][t].draw()}}function g(t){var i=e[r].length;if(i<e[h]){e[r].push(t)}}function S(){var i=false;var n=0;var a=0;var s="draw";var l=null;function u(){var t=-1;for(var i=0,n=e[r].length;i<n;i++){if(e[r][i].m_bChoosed){t=i;break}}return t}e[t][0].oncontextmenu=function(){return false};e[t][0].onselectstart=function(){return false};e[t].unbind();e[t].bind("mousedown",function(c){if(c.button===2){if(e[d]&&l){if(l.m_aPoint.length>=l.m_iMinClosed){l.m_bClosed=true;e[d]=false;l.setPointInfo(l.m_aPoint);g(l);m();i=false;if(!e[v]){e[o]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(l.m_szType,"onDrawEnd",l.m_szId)}}}else if(c.button===0){n=c.offsetX;a=c.offsetY;s="draw";if(!e[d]){var y=u();if(y!==-1){if(e[r][y].inArc(c.offsetX,c.offsetY,5)){s="stretch"}}if(s!=="stretch"){for(var S=0,b=e[r].length;S<b;S++){if(e[r][S].inShape(c.offsetX,c.offsetY)){e[r][S].m_bChoosed=true;e[r][S].getMouseDownPoints(c.offsetX,c.offsetY);s="drag";window.onDrawShapeEvent&&window.onDrawShapeEvent(e[r][S].m_szType,"onChoose",e[r][S].m_szId)}else{e[r][S].m_bChoosed=false}}}if(s==="drag"){e[t][0].style.cursor="move"}else{e[t][0].style.cursor="default"}if("draw"===s&&1===e[r].length&&1===e[r][0].m_iRedrawMode){e.deleteRepeatPolyonById(e[r][0].m_szId);e[o]=true}if(e[o]&&!e[v]){s="draw"}}if(s==="draw"){if(e[o]){if(e[h]<=e[r].length&&e[f]!=="Grid"&&e[f]!=="Point"){return}if(e[f]==="Rect"){l=new w}else if(e[f]==="Grid"){if(e[r].length===0){l=new P;g(l)}}else if(e[f]==="Polygon"){if(!e[d]){e[d]=true;l=new x;l.m_szId=e[p].szId||"";l.m_szTips=e[p].szTips||"";l.m_iMinClosed=e[p].iMinClosed||3;l.m_iMaxPointNum=e[p].iMaxPointNum||11;l.m_iPolygonType=e[p].iPolygonType;l.m_szDrawColor=e[p].szDrawColor;l.m_szFillColor=e[p].szFillColor;l.m_iTranslucent=e[p].iTranslucent;l.m_iRedrawMode=e[p].iRedrawMode}if(l.m_iPolygonType===1){l.addPoint(n,a);if(l.m_aPoint.length===l.m_iMaxPointNum){l.m_bClosed=true;e[d]=false;g(l);m();i=false;if(!e[v]){e[o]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(l.m_szType,"onDrawEnd",l.m_szId)}}}else if(e[f]==="Point"){e.clearShapeByType("Point");l=new T;l.m_szId=e[p].szId||"";l.m_szDrawColor=e[p].szDrawColor;l.setPointInfo([[n,a]]);g(l);m()}}}i=true}});e[t].bind("mousemove",function(t){if(!e[d]){var h=u();if(h>-1){if(i){if(s==="drag"){e[r][h].drag(t.offsetX,t.offsetY);window.onDrawShapeEvent&&window.onDrawShapeEvent(e[r][h].m_szType,"onDrag",e[r][h].m_szId)}else if(s==="stretch"){e[r][h].stretch(t.offsetX,t.offsetY);window.onDrawShapeEvent&&window.onDrawShapeEvent(e[r][h].m_szType,"onStretch",e[r][h].m_szId)}}}else{if(e[o]){if(i){if(e[f]==="Rect"){l.move([[n,a],[t.offsetX,t.offsetY]])}else if(e[f]==="Grid"){e[r][0].move(n,a,t.offsetX,t.offsetY)}}}}}else{if(e[o]){if(i){if(e[f]==="Polygon"&&l.m_iPolygonType===0){l.m_bClosed=true}m();l.move(t.offsetX,t.offsetY,n,a)}}}});e[t].bind("mouseup",function(r){e[t][0].style.cursor="default";if(l!==null&&typeof l!=="undefined"&&s==="draw"){if(e[f]==="Rect"){if(Math.abs(r.offsetX-n)>2&&Math.abs(r.offsetY-a)>2){g(l);if(!e[v]){e[o]=false}}if(e[y]){var u={startPos:[],endPos:[]};if(r.offsetX>n&&r.offsetY>a){u.startPos=l.m_aPoint[0]||[r.offsetX,r.offsetY];u.endPos=l.m_aPoint[2]||[r.offsetX,r.offsetY]}else{u.startPos=l.m_aPoint[2]||[r.offsetX,r.offsetY];u.endPos=l.m_aPoint[0]||[r.offsetX,r.offsetY]}e[y]&&e[y](u);e.clearAllShape()}l=null}else if(e[f]==="Polygon"&&l.m_iPolygonType===0&&e[d]){if(Math.abs(r.offsetX-n)>2&&Math.abs(r.offsetY-a)>2){g(l);e[d]=false;if(!e[v]){e[o]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(l.m_szType,"onDrawEnd",l.m_szId)}}}if(!e[d]){i=false}else{i=true}if(!e[d]){m()}});e[t].bind("dblclick",function(){if(e[o]){if(e[f]==="Grid"){e[r][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc";m()}}});e[t].bind("mouseout",function(){e[t][0].style.cursor="default";if(!e[d]){i=false}else{i=true}})}var b=function(){function t(){u(this,t);this.m_szId="";this.m_aPoint=[];this.m_bChoosed=false;this.m_szDrawColor=e[c].szDrawColor;this.m_szFillColor=e[c].szFillColor;this.m_iTranslucent=e[c].iTranslucent;this.m_iIndexChoosePoint=-1;this.m_iDriftStartX=0;this.m_iDriftStartY=0;this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}};this.m_szTips="";this.m_iEditType=0;this.m_iMinClosed=3;this.m_iMaxPointNum=11;this.m_bClosed=false;this.m_iRedrawMode=0}n(t,[{key:"draw",value:function e(){}},{key:"drag",value:function t(i,n){var r=this.m_aPoint.length;var a=0;for(a=0;a<r;a++){if(this.m_aPoint[a][0]+i-this.m_iDriftStartX>e.m_iCanvasWidth||this.m_aPoint[a][1]+n-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][0]+i-this.m_iDriftStartX<0||this.m_aPoint[a][1]+n-this.m_iDriftStartY<0){this.m_iDriftStartX=i;this.m_iDriftStartY=n;return}}for(a=0;a<r;a++){this.m_aPoint[a][0]=this.m_aPoint[a][0]+i-this.m_iDriftStartX;this.m_aPoint[a][1]=this.m_aPoint[a][1]+n-this.m_iDriftStartY}this.m_iDriftStartX=i;this.m_iDriftStartY=n;this.setPointInfo(this.m_aPoint);m()}},{key:"stretch",value:function e(t,i){if(this.m_iEditType===0){if(this.m_iIndexChoosePoint!==-1){this.m_aPoint[this.m_iIndexChoosePoint][0]=t;this.m_aPoint[this.m_iIndexChoosePoint][1]=i}this.setPointInfo(this.m_aPoint);m()}}},{key:"inShape",value:function e(t,i){var n=false;var r=this.m_aPoint.length;for(var a=0,o=r-1;a<r;o=a++){if(this.m_aPoint[a][1]>i!==this.m_aPoint[o][1]>i&&t<(this.m_aPoint[o][0]-this.m_aPoint[a][0])*(i-this.m_aPoint[a][1])/(this.m_aPoint[o][1]-this.m_aPoint[a][1])+this.m_aPoint[a][0]){n=!n}}return n}},{key:"inArc",value:function e(t,i,n){var r=false;for(var a=0,o=this.m_aPoint.length;a<o;a++){var s=Math.sqrt((t-this.m_aPoint[a][0])*(t-this.m_aPoint[a][0])+(i-this.m_aPoint[a][1])*(i-this.m_aPoint[a][1]));if(s<n){r=true;this.m_iIndexChoosePoint=a;break}}return r}},{key:"getMouseDownPoints",value:function e(t,i){this.m_iDriftStartX=t;this.m_iDriftStartY=i}},{key:"getPointInfo",value:function e(){return this.m_aPoint}},{key:"setPointInfo",value:function e(t){if(t!==null&&typeof t!=="undefined"&&t.length>0){this.m_aPoint=t;this.setEdgePoints(t)}}},{key:"addPoint",value:function e(t,i){if(this.m_aPoint.length<this.m_iMaxPointNum){this.m_aPoint.push([t,i])}if(this.m_aPoint.length===this.m_iMaxPointNum){this.setPointInfo(this.m_aPoint)}}},{key:"setEdgePoints",value:function e(t){for(var i=0,n=t.length;i<n;i++){if(i===0){this.m_oEdgePoints.top.x=t[i][0];this.m_oEdgePoints.top.y=t[i][1];this.m_oEdgePoints.left.x=t[i][0];this.m_oEdgePoints.left.y=t[i][1];this.m_oEdgePoints.right.x=t[i][0];this.m_oEdgePoints.right.y=t[i][1];this.m_oEdgePoints.bottom.x=t[i][0];this.m_oEdgePoints.bottom.y=t[i][1]}else{if(t[i][1]<this.m_oEdgePoints.top.y){this.m_oEdgePoints.top.x=t[i][0];this.m_oEdgePoints.top.y=t[i][1]}if(t[i][0]>this.m_oEdgePoints.right.x){this.m_oEdgePoints.right.x=t[i][0];this.m_oEdgePoints.right.y=t[i][1]}if(t[i][1]>this.m_oEdgePoints.bottom.y){this.m_oEdgePoints.bottom.x=t[i][0];this.m_oEdgePoints.bottom.y=t[i][1]}if(t[i][0]<this.m_oEdgePoints.left.x){this.m_oEdgePoints.left.x=t[i][0];this.m_oEdgePoints.left.y=t[i][1]}}}}}]);return t}();var w=function(t){l(r,t);function r(){u(this,r);var e=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));e.m_szType="Rect";return e}n(r,[{key:"setPointInfo",value:function e(t){if(t!==null&&typeof t!=="undefined"){var i=t[0][0];var n=t[0][1];var r=t[0][0];var a=t[0][1];for(var o=0,s=t.length;o<s;o++){if(i>t[o][0]){i=t[o][0]}if(n>t[o][1]){n=t[o][1]}if(r<t[o][0]){r=t[o][0]}if(a<t[o][1]){a=t[o][1]}}this.m_aPoint=[[i,n],[r,n],[r,a],[i,a]]}}},{key:"draw",value:function t(){e[i].fillStyle=this.m_szFillColor;e[i].strokeStyle=this.m_szDrawColor;var n=this.m_aPoint[0][0];var r=this.m_aPoint[0][1];var a=this.m_aPoint[2][0]-n;var o=this.m_aPoint[2][1]-r;e[i].globalAlpha=this.m_iTranslucent;e[i].fillRect(n,r,a,o);e[i].globalAlpha=1;e[i].fillText(this.m_szTips,(n+this.m_aPoint[2][0])/2,(r+this.m_aPoint[2][1])/2);if(this.m_bChoosed){var s=Math.round(a/2);var l=Math.round(o/2);if(this.m_iEditType===0){var u=[n,n+s,n+a,n,n+a,n,n+s,n+a];var f=[r,r,r,r+l,r+l,r+o,r+o,r+o];for(var h=0;h<8;h++){e[i].beginPath();e[i].arc(u[h],f[h],3,0,360,false);e[i].fillStyle=this.m_szDrawColor;e[i].closePath();e[i].fill()}}}e[i].strokeRect(n,r,a,o)}},{key:"stretch",value:function e(t,i){if(this.m_iEditType===0){if(this.m_iIndexChoosePoint===0){if(t<this.m_aPoint[2][0]&&i<this.m_aPoint[2][1]){this.m_aPoint[0][0]=t;this.m_aPoint[0][1]=i;this.m_aPoint[3][0]=t;this.m_aPoint[1][1]=i}}else if(this.m_iIndexChoosePoint===1){if(i<this.m_aPoint[2][1]){this.m_aPoint[0][1]=i;this.m_aPoint[1][1]=i}}else if(this.m_iIndexChoosePoint===2){if(t>this.m_aPoint[3][0]&&i<this.m_aPoint[3][1]){this.m_aPoint[1][0]=t;this.m_aPoint[1][1]=i;this.m_aPoint[2][0]=t;this.m_aPoint[0][1]=i}}else if(this.m_iIndexChoosePoint===3){if(t<this.m_aPoint[2][0]){this.m_aPoint[0][0]=t;this.m_aPoint[3][0]=t}}else if(this.m_iIndexChoosePoint===4){if(t>this.m_aPoint[0][0]){this.m_aPoint[1][0]=t;this.m_aPoint[2][0]=t}}else if(this.m_iIndexChoosePoint===5){if(t<this.m_aPoint[1][0]&&i>this.m_aPoint[1][1]){this.m_aPoint[3][0]=t;this.m_aPoint[3][1]=i;this.m_aPoint[0][0]=t;this.m_aPoint[2][1]=i}}else if(this.m_iIndexChoosePoint===6){if(i>this.m_aPoint[1][1]){this.m_aPoint[2][1]=i;this.m_aPoint[3][1]=i}}else if(this.m_iIndexChoosePoint===7){if(t>this.m_aPoint[0][0]&&i>this.m_aPoint[0][1]){this.m_aPoint[2][0]=t;this.m_aPoint[2][1]=i;this.m_aPoint[1][0]=t;this.m_aPoint[3][1]=i}}m()}}},{key:"move",value:function e(t){m();this.m_bChoosed=true;var i=t[0][0];var n=t[0][1];var r=t[1][0];var a=t[1][1];this.setPointInfo([[i,n],[r,n],[r,a],[i,a]]);this.draw()}},{key:"inArc",value:function e(t,i,n){var r=this.m_aPoint[0][0];var a=this.m_aPoint[0][1];var o=this.m_aPoint[2][0]-r;var s=this.m_aPoint[2][1]-a;var l=Math.round(o/2);var u=Math.round(s/2);var f=[r,r+l,r+o,r,r+o,r,r+l,r+o];var h=[a,a,a,a+u,a+u,a+s,a+s,a+s];for(var c=0;c<8;c++){var d=Math.sqrt((t-f[c])*(t-f[c])+(i-h[c])*(i-h[c]));if(d<n){this.m_iIndexChoosePoint=c;return true}}return false}}]);return r}(b);var _=function(t){l(r,t);function r(e,t){u(this,r);var i=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));i.m_szType="RectOSD";i.m_szOSDType="overlay-date";i.m_szText=e||"";i.m_szEnabled=t||"";i.m_szDateStyle="";i.m_szClockType="";i.m_szDisplayWeek="";i.m_szId="";i.m_szAlignment="0";return i}n(r,[{key:"draw",value:function t(){if(this.m_szEnabled==="true"){var n=this.m_aPoint[0][0];var r=this.m_aPoint[0][1];var a=this.m_aPoint[2][0]-n;var o=this.m_aPoint[2][1]-r;e[i].beginPath();e[i].strokeStyle=this.m_szDrawColor;e[i].globalAlpha=1;e[i].rect(n,r,a,o);e[i].font="15px serif";e[i].strokeText(this.m_szText,n,r+15);e[i].stroke()}}},{key:"drag",value:function t(i,n){var r=this.m_aPoint.length;var a=0;if("0"===this.m_szAlignment){for(a=0;a<r;a++){if(this.m_aPoint[a][1]+n-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][0]+i-this.m_iDriftStartX<0||this.m_aPoint[a][1]+n-this.m_iDriftStartY<0){this.m_iDriftStartX=i;this.m_iDriftStartY=n;return}}for(a=0;a<r;a++){this.m_aPoint[a][0]=this.m_aPoint[a][0]+i-this.m_iDriftStartX;this.m_aPoint[a][1]=this.m_aPoint[a][1]+n-this.m_iDriftStartY}}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(a=0;a<r;a++){if(this.m_aPoint[a][1]+n-this.m_iDriftStartY>e.m_iCanvasHeight||this.m_aPoint[a][1]+n-this.m_iDriftStartY<0){this.m_iDriftStartX=i;this.m_iDriftStartY=n;return}}for(a=0;a<r;a++){this.m_aPoint[a][1]=this.m_aPoint[a][1]+n-this.m_iDriftStartY}}this.m_iDriftStartX=i;this.m_iDriftStartY=n;this.setEdgePoints(this.m_aPoint);m()}},{key:"stretch",value:function e(){}}]);return r}(b);var P=function(t){l(r,t);function r(){u(this,r);var e=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));e.m_szType="Grid";e.m_iGridColNum=22;e.m_iGridRowNum=18;e.m_szGridMap="";e.m_aAddGridMap=[];return e}n(r,[{key:"draw",value:function t(){var n=e.m_iCanvasWidth/this.m_iGridColNum;var r=e.m_iCanvasHeight/this.m_iGridRowNum;var a="";for(var o=0;o<this.m_iGridRowNum;o++){var s=this.m_szGridMap.substring(o*6,o*6+6);var l=parseInt("f"+s,16).toString(2).split("").slice(4);var u="";for(var f=0;f<this.m_iGridColNum;f++){var h="";if(l[f]==="1"){e[i].strokeStyle=this.m_szDrawColor;e[i].globalAlpha=1;e[i].strokeRect(n*f,r*o,n,r);h="1"}else{h="0"}if(this.m_aAddGridMap.length){if(this.m_aAddGridMap[o][f]===1){e[i].strokeStyle=this.m_szDrawColor;e[i].strokeRect(n*f,r*o,n,r);h="1"}}u+=h}a+=parseInt("1111"+u+"00",2).toString(16).substring(1)}this.m_szGridMap=a}},{key:"move",value:function t(i,n,r,a){var o=e.m_iCanvasWidth/this.m_iGridColNum;var s=e.m_iCanvasHeight/this.m_iGridRowNum;var l=Math.floor(i/o);var u=Math.floor(n/s);var f=Math.floor(Math.abs(r-i)/o);var h=Math.floor(Math.abs(a-n)/s);var c=1;var d=1;if(r-i>0){c=1}else{c=-1}if(a-n>0){d=1}else{d=-1}var p=[];for(var v=0;v<this.m_iGridRowNum;v++){p[v]=[];for(var y=0;y<this.m_iGridColNum;y++){if(c===1){if(d===1){if(v>=u&&v<=u+h&&y>=l&&y<=l+f){p[v][y]=1}else{p[v][y]=0}}else{if(v<=u&&v>=u-h&&y>=l&&y<=l+f){p[v][y]=1}else{p[v][y]=0}}}else{if(d===1){if(v>=u&&v<=u+h&&y<=l&&y>=l-f){p[v][y]=1}else{p[v][y]=0}}else{if(v<=u&&v>=u-h&&y<=l&&y>=l-f){p[v][y]=1}else{p[v][y]=0}}}}}this.m_aAddGridMap=p;this.draw()}}]);return r}(b);var C=function(t){l(r,t);function r(){u(this,r);var e=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));e.m_szType="Line";e.m_iLineType=0;e.m_iDirection=0;e.m_iArrowType=0;e.m_aCrossArrowPoint=[];return e}n(r,[{key:"draw",value:function e(){if(this.m_iLineType===0){this.drawNormalLine()}else if(this.m_iLineType===1){this.drawArrowLine()}else if(this.m_iLineType===3){this.drawCrossLine()}else if(this.m_iLineType===4){this.drawLineCount()}}},{key:"drawNormalLine",value:function t(){e[i].globalAlpha=1;if(this.m_aPoint.length>0){e[i].beginPath();e[i].strokeStyle=this.m_szDrawColor;e[i].lineWidth=2;e[i].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var n=1,r=this.m_aPoint.length;n<r;n++){e[i].lineTo(this.m_aPoint[n][0],this.m_aPoint[n][1])}e[i].stroke();if(this.m_bChoosed){for(var a=0,o=this.m_aPoint.length;a<o;a++){e[i].beginPath();e[i].fillStyle=this.m_szDrawColor;e[i].arc(this.m_aPoint[a][0],this.m_aPoint[a][1],3,0,Math.PI*2,true);e[i].closePath();e[i].fill()}}if(this.m_szTips!==""){e[i].strokeStyle=this.m_szDrawColor;e[i].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4)}}}},{key:"drawArrowLine",value:function t(n,r,a,o,s,l,u,f){l=typeof l!=="undefined"?l:30;u=typeof u!=="undefined"?u:10;f=typeof f!=="undefined"?f:1;var h=Math.atan2(a-s,r-o)*180/Math.PI;var c=(h+l)*Math.PI/180;var d=(h-l)*Math.PI/180;var p=u*Math.cos(c);var v=u*Math.sin(c);var y=u*Math.cos(d);var m=u*Math.sin(d);e[i].save();e[i].beginPath();var g=r-p;var S=a-v;e[i].moveTo(g,S);e[i].lineTo(r,a);g=r-y;S=a-m;e[i].lineTo(g,S);e[i].moveTo(r,a);e[i].lineTo(o,s);if(n===1){g=o+p;S=s+v;e[i].moveTo(g,S);e[i].lineTo(o,s);g=o+y;S=s+m;e[i].lineTo(g,S)}e[i].strokeStyle=this.m_szDrawColor;e[i].lineWidth=f;e[i].stroke();e[i].restore()}},{key:"drawCrossLine",value:function t(){this.drawNormalLine();var n=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2;var r=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2;var a=Math.atan2(r-this.m_aPoint[0][1],n-this.m_aPoint[0][0])*180/Math.PI;var o=(a+90)*Math.PI/180;var s=(a-90)*Math.PI/180;var l=25*Math.cos(o);var u=25*Math.sin(o);var f=25*Math.cos(s);var h=25*Math.sin(s);var c=0;var d=0;c=n-l;d=r-u;var p=0;var v=0;if(this.m_iDirection===0){p=-10;v=-15}else if(this.m_iDirection===1){p=10;v=10}else{p=10;v=-15}if(this.m_iDirection!==0){this.drawArrowLine(0,c,d,n,r)}e[i].strokeStyle=this.m_szDrawColor;e[i].font="8px";e[i].strokeText("A",c+p,d+4);c=n-f;d=r-h;if(this.m_iDirection!==1){this.drawArrowLine(0,c,d,n,r)}e[i].strokeStyle=this.m_szDrawColor;e[i].font="8px";e[i].strokeText("B",c+v,d+4)}},{key:"drawLineCount",value:function e(){this.drawNormalLine();var t=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2;var i=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2;var n=Math.atan2(i-this.m_aPoint[0][1],t-this.m_aPoint[0][0])*180/Math.PI;var r=(n+90)*Math.PI/180;var a=(n-90)*Math.PI/180;var o=25*Math.cos(r);var s=25*Math.sin(r);var l=25*Math.cos(a);var u=25*Math.sin(a);var f=0;var h=0;f=t-o;h=i-s;if(this.m_iArrowType===1){f=t-l;h=i-u;this.drawArrowLine(0,f,h,t,i)}else if(this.m_iArrowType===0){this.drawArrowLine(0,f,h,t,i)}this.m_aCrossArrowPoint=[[t,i],[f,h]]}},{key:"inShape",value:function e(t,i){var n=false;for(var r=0,a=this.m_aPoint.length-1;r<a;r++){var o=Math.sqrt((this.m_aPoint[r+1][0]-this.m_aPoint[r][0])*(this.m_aPoint[r+1][0]-this.m_aPoint[r][0])+(this.m_aPoint[r+1][1]-this.m_aPoint[r][1])*(this.m_aPoint[r+1][1]-this.m_aPoint[r][1]));var s=Math.sqrt((t-this.m_aPoint[r][0])*(t-this.m_aPoint[r][0])+(i-this.m_aPoint[r][1])*(i-this.m_aPoint[r][1]));var l=Math.sqrt((t-this.m_aPoint[r+1][0])*(t-this.m_aPoint[r+1][0])+(i-this.m_aPoint[r+1][1])*(i-this.m_aPoint[r+1][1]));if(s+l-o<1){n=true}}return n}}]);return r}(b);var x=function(t){l(r,t);function r(){u(this,r);var e=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));e.m_szType="Polygon";e.m_iPolygonType=1;return e}n(r,[{key:"setPointInfo",value:function e(t){if(t!==null&&typeof t!=="undefined"){if(this.m_iPolygonType===0){var i=t[0][0];var n=t[0][1];var r=t[0][0];var a=t[0][1];for(var o=0,s=t.length;o<s;o++){if(i>t[o][0]){i=t[o][0]}if(n>t[o][1]){n=t[o][1]}if(r<t[o][0]){r=t[o][0]}if(a<t[o][1]){a=t[o][1]}}this.m_aPoint=[[i,n],[r,n],[r,a],[i,a]]}else if(this.m_iPolygonType===1){this.m_aPoint=t}else{this.m_aPoint=t}this.setEdgePoints(t)}}},{key:"draw",value:function t(){if(this.m_aPoint.length>0){e[i].fillStyle=this.m_szFillColor;e[i].strokeStyle=this.m_szDrawColor;e[i].globalAlpha=1;var n=0;var r=0;if(this.m_bChoosed){for(n=0,r=this.m_aPoint.length;n<r;n++){e[i].beginPath();e[i].arc(this.m_aPoint[n][0],this.m_aPoint[n][1],3,0,360,false);e[i].fillStyle=this.m_szDrawColor;e[i].closePath();e[i].fill()}}e[i].beginPath();e[i].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(n=0,r=this.m_aPoint.length;n<r;n++){if(n!==0){e[i].lineTo(this.m_aPoint[n][0],this.m_aPoint[n][1])}}e[i].stroke();if(this.m_bClosed){e[i].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2);e[i].closePath();e[i].stroke();e[i].globalAlpha=this.m_iTranslucent;e[i].fill()}}}},{key:"move",value:function t(n,r,a,o){if(this.m_iPolygonType===1){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){e[i].fillStyle=this.m_szFillColor;e[i].strokeStyle=this.m_szDrawColor;e[i].globalAlpha=1;var s=0;var l=0;for(s=0,l=this.m_aPoint.length;s<l;s++){e[i].beginPath();e[i].arc(this.m_aPoint[s][0],this.m_aPoint[s][1],3,0,360,false);e[i].fillStyle=this.m_szDrawColor;e[i].closePath();e[i].fill()}e[i].beginPath();e[i].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(s=0,l=this.m_aPoint.length;s<l;s++){if(s!==0){e[i].lineTo(this.m_aPoint[s][0],this.m_aPoint[s][1])}}e[i].lineTo(n,r);e[i].closePath();e[i].stroke()}}else if(this.m_iPolygonType===0){this.m_bChoosed=true;var u=a;var f=o;var h=n;var c=r;this.setPointInfo([[u,f],[h,f],[h,c],[u,c]]);this.draw()}}},{key:"stretch",value:function e(t,i){if(this.m_iEditType===0){if(this.m_iPolygonType===1){if(this.m_iIndexChoosePoint!==-1){this.m_aPoint[this.m_iIndexChoosePoint][0]=t;this.m_aPoint[this.m_iIndexChoosePoint][1]=i}}else{if(this.m_iIndexChoosePoint===0){if(t<this.m_aPoint[2][0]&&i<this.m_aPoint[2][1]){this.m_aPoint[0][0]=t;this.m_aPoint[0][1]=i;this.m_aPoint[3][0]=t;this.m_aPoint[1][1]=i}}else if(this.m_iIndexChoosePoint===1){if(t>this.m_aPoint[3][0]&&i<this.m_aPoint[3][1]){this.m_aPoint[1][0]=t;this.m_aPoint[1][1]=i;this.m_aPoint[2][0]=t;this.m_aPoint[0][1]=i}}else if(this.m_iIndexChoosePoint===2){if(t>this.m_aPoint[0][0]&&i>this.m_aPoint[0][1]){this.m_aPoint[2][0]=t;this.m_aPoint[2][1]=i;this.m_aPoint[1][0]=t;this.m_aPoint[3][1]=i}}else if(this.m_iIndexChoosePoint===3){if(t<this.m_aPoint[1][0]&&i>this.m_aPoint[1][1]){this.m_aPoint[3][0]=t;this.m_aPoint[3][1]=i;this.m_aPoint[0][0]=t;this.m_aPoint[2][1]=i}}}this.setPointInfo(this.m_aPoint);m()}}}]);return r}(b);var T=function(t){l(r,t);function r(){u(this,r);var e=s(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));e.m_szType="Point";e.m_szId="";return e}n(r,[{key:"draw",value:function t(){e[i].beginPath();e[i].fillStyle=this.m_szDrawColor;e[i].globalAlpha=1;e[i].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,Math.PI*2,true);e[i].closePath();e[i].fill()}},{key:"drag",value:function e(){}},{key:"stretch",value:function e(){}}]);return r}(b);var D=function(){function s(n){u(this,s);e=this;this[t]=(0,a.default)("#"+n);this[i]=this[t][0].getContext("2d");this[r]=[];this[o]=false;this[f]="Rect";this[h]=10;this[v]=true;this[p]={};this[y]=null;this[c]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7};this[d]=false;this.m_iCanvasWidth=this[t].width();this.m_iCanvasHeight=this[t].height();this.m_iHorizontalResolution=0;this.m_iVerticalResolution=0;this.m_szDisplayMode="";this.m_szVideoFormat="";S();this[r].length=0}n(s,[{key:"setDrawMutiShapeOneTime",value:function e(t){this[v]=t}},{key:"setMaxShapeSupport",value:function e(t){this[h]=t}},{key:"getMaxShapeSupport",value:function e(){return this[h]}},{key:"setDrawStatus",value:function e(t,i){this[o]=t;if(i&&t){this[y]=i}if(!t){this[y]=null}}},{key:"setShapeType",value:function e(t){this[f]=t;m()}},{key:"setCurrentShapeInfo",value:function e(t){this[p]=t||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}}},{key:"getShapeType",value:function e(){return this[f]}},{key:"getAllShapesInfo",value:function e(){var t=[];for(var i=0,n=this[r].length;i<n;i++){if(this[r][i].m_szType==="Grid"){t.push({szType:this[r][i].m_szType,szGridMap:this[r][i].m_szGridMap,iGridColNum:this[r][i].m_iGridColNum,iGridRowNum:this[r][i].m_iGridRowNum})}else if(this[r][i].m_szType==="RectOSD"){t.push({szType:this[r][i].m_szType,szText:this[r][i].m_szText,szEnabled:this[r][i].m_szEnabled,szOSDType:this[r][i].m_szOSDType,iPositionX:this[r][i].m_aPoint[0][0],iPositionY:this[r][i].m_aPoint[0][1],szDateStyle:this[r][i].m_szDateStyle,szClockType:this[r][i].m_szClockType,szDisplayWeek:this[r][i].m_szDisplayWeek,szId:this[r][i].m_szId,szAlignment:this[r][i].m_szAlignment})}else{t.push({szType:this[r][i].m_szType,aPoint:this[r][i].m_aPoint,szId:this[r][i].m_szId,bChoosed:this[r][i].m_bChoosed})}}return t}},{key:"deleteRepeatPolyonById",value:function e(t){var i=this.getAllShapesInfo();var n=i.length;if(n>0){for(var r=0;r<n;r++){if(i[r].szType==="Polygon"){if(i[r].szId===t){this.deleteShape(r)}}}}}},{key:"getShapesInfoByType",value:function e(t){var i=[];for(var n=0,a=this[r].length;n<a;n++){if(this[r][n].m_szType===t){if(this[r][n].m_szType==="Grid"){i.push({szType:this[r][n].m_szType,szGridMap:this[r][n].m_szGridMap,iGridColNum:this[r][n].m_iGridColNum,iGridRowNum:this[r][n].m_iGridRowNum})}else if(this[r][n].m_szType==="RectOSD"){i.push({szType:this[r][n].m_szType,szText:this[r][n].m_szText,szEnabled:this[r][n].m_szEnabled,szOSDType:this[r][n].m_szOSDType,iPositionX:this[r][n].m_aPoint[0][0],iPositionY:this[r][n].m_aPoint[0][1],szDateStyle:this[r][n].m_szDateStyle,szClockType:this[r][n].m_szClockType,szDisplayWeek:this[r][n].m_szDisplayWeek,szId:this[r][n].m_szId,szAlignment:this[r][n].m_szAlignment})}else if(t==="Polygon"){i.push({szType:this[r][n].m_szType,szId:this[r][n].m_szId,iPolygonType:this[r][n].m_iPolygonType,iMinClosed:this[r][n].m_iMinClosed,iMaxPointNum:this[r][n].m_iMaxPointNum,iEditType:this[r][n].m_iEditType,aPoint:this[r][n].m_aPoint,bClosed:this[r][n].m_bClosed,szTips:this[r][n].m_szTips,szDrawColor:this[r][n].m_szDrawColor,szFillColor:this[r][n].m_szFillColor,iTranslucent:this[r][n].m_iTranslucent})}else if(t==="Line"){i.push({szType:this[r][n].m_szType,szId:this[r][n].m_szId,aPoint:this[r][n].m_aPoint,szTips:this[r][n].m_szTips,iLineType:this[r][n].m_iLineType,iDirection:this[r][n].m_iDirection,iArrowType:this[r][n].m_iArrowType,szDrawColor:this[r][n].m_szDrawColor,aCrossArrowPoint:this[r][n].m_aCrossArrowPoint})}else if(t==="Rect"){i.push({szType:this[r][n].m_szType,iEditType:this[r][n].m_iEditType,aPoint:this[r][n].m_aPoint,szTips:this[r][n].m_szTips,szDrawColor:this[r][n].m_szDrawColor,szFillColor:this[r][n].m_szFillColor,iTranslucent:this[r][n].m_iTranslucent})}else{i.push({szType:this[r][n].m_szType,aPoint:this[r][n].m_aPoint})}}}return i}},{key:"setShapesInfoByType",value:function e(t,i){if(!i){i=[]}var n=null;if(t==="Rect"||t==="Polygon"||t==="Line"||t==="Point"){for(var r=0,a=i.length;r<a;r++){if(t==="Rect"){n=new w;n.m_iEditType=i[r].iEditType;n.m_szTips=i[r].szTips||"";n.m_szDrawColor=i[r].szDrawColor;n.m_szFillColor=i[r].szFillColor;n.m_iTranslucent=i[r].iTranslucent;n.m_iRedrawMode=i[r].iRedrawMode}else if(t==="Polygon"){n=new x;if(i[r].iPolygonType===0){n.m_bClosed=true}else{n.m_bClosed=i[r].bClosed}n.m_szTips=i[r].szTips||"";n.m_szId=i[r].szId||"";n.m_iPolygonType=i[r].iPolygonType;n.m_iMinClosed=i[r].iMinClosed||3;n.m_iMaxPointNum=i[r].iMaxPointNum||11;n.m_iEditType=i[r].iEditType;n.m_szDrawColor=i[r].szDrawColor;n.m_szFillColor=i[r].szFillColor;n.m_iTranslucent=i[r].iTranslucent;n.m_iRedrawMode=i[r].iRedrawMode}else if(t==="Line"){n=new C;n.m_iLineType=i[r].iLineType;n.m_szTips=i[r].szTips||"";n.m_szId=i[r].szId;n.m_iDirection=i[r].iDirection;n.m_iArrowType=i[r].iArrowType;n.m_szDrawColor=i[r].szDrawColor;n.setPointInfo(i[r].aPoint)}else if(t==="Point"){n=new T;n.m_szId=i[r].szId;n.m_szDrawColor=i[r].szDrawColor;n.setPointInfo(i[r].aPoint)}n.setPointInfo(i[r].aPoint);if(r===0){n.m_bChoosed=true}g(n)}}else if(t==="Grid"){n=new P;n.m_szGridMap=i[0].szGridMap||"";n.m_iGridColNum=i[0].iGridColNum||22;n.m_iGridRowNum=i[0].iGridRowNum||18;g(n)}m()}},{key:"addOSDShape",value:function e(t,i,n,r,a){if(!n&&!r){n=0;r=0}if(!a){a={}}var o=new _(t,i);var s=t.replace(/[^x00-xff]/g,"rr").length*10;o.m_szOSDType=a.szOSDType||"";o.m_szDateStyle=a.szDateStyle||"";o.m_szClockType=a.szClockType||"";o.m_szDisplayWeek=a.szDisplayWeek||"";o.m_szId=a.szId||"";o.m_szAlignment=""+a.szAlignment||"0";if("0"===o.m_szAlignment){o.m_aPoint=[[n,r],[s+n,r],[s+n,r+20],[n,r+20]]}else if("1"===o.m_szAlignment){o.m_aPoint=[[0,r],[s,r],[s,r+20],[0,r+20]]}else if("2"===o.m_szAlignment){o.m_aPoint=[[this.m_iCanvasWidth-s,r],[this.m_iCanvasWidth,r],[this.m_iCanvasWidth,r+20],[this.m_iCanvasWidth-s,r+20]]}else{o.m_aPoint=[[n,r],[s+n,r],[s+n,r+20],[n,r+20]]}g(o);m()}},{key:"selectShapeById",value:function t(i,n){for(var a=0,o=e[r].length;a<o;a++){if(i===e[r][a].m_szType){if(n===e[r][a].m_szId){e[r][a].m_bChoosed=true}else{e[r][a].m_bChoosed=false}}}m()}},{key:"setCanvasSize",value:function e(t,i){if(t>0&&i>0){this.m_iCanvasWidth=t;this.m_iCanvasHeight=i;m()}}},{key:"setDrawStyle",value:function e(t,i,n){this[c]={szDrawColor:t,szFillColor:i,iTranslucent:n}}},{key:"clearAllShape",value:function t(){this[r].length=0;e[d]=false;m()}},{key:"clearShapeByType",value:function t(i){var n=this[r].length;for(var a=n;a>0;a--){if(this[r][a-1].m_szType===i){if(i==="Grid"){this[r][a-1].m_szGridMap="";this[r][a-1].m_aAddGridMap=[]}else{this[r].splice(a-1,1)}}}if("Polygon"===i){e[d]=false}m()}},{key:"deleteShape",value:function e(t){if(this[r].length>t){this[r].splice(t,1)}m()}},{key:"updateCanvas",value:function e(n){this[t]=(0,a.default)("#"+n);this[i]=this[t][0].getContext("2d");this.m_iCanvasWidth=this[t].width();this.m_iCanvasHeight=this[t].height();S()}},{key:"resizeCanvas",value:function e(){this.m_iCanvasWidth=this[t].width();this.m_iCanvasHeight=this[t].height()}},{key:"canvasRedraw",value:function e(){m()}}]);return s}();return D}();t.ESCanvas=f}])});